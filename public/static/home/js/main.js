function loadCss(e){var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function seriesLoadScripts(e,t){if("object"!=typeof e)var e=[e];var i=document.getElementsByTagName("head").item(0)||document.documentElement,n=new Array,s=e.length-1,o=function(a){n[a]=document.createElement("script"),n[a].setAttribute("type","text/javascript"),n[a].onload=n[a].onreadystatechange=function(){this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),a!=s?o(a+1):"function"==typeof t&&t()},n[a].setAttribute("src",e[a]),i.appendChild(n[a])};o(0)}function isVisiable(e){if(e){var t=e.getBoundingClientRect();return t.top>0&&window.innerHeight-t.top>0||t.top<=0&&t.bottom>=0}}function isEmptyObject(e){var t;for(t in e)return!1;return!0}function getQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!=i?unescape(i[2]):null}function localStorageInstance(e,t){try{if(window.localStorage)if(""===t)window.localStorage.removeItem(e);else{if(0!=t&&!t)return window.localStorage[e];window.localStorage[e]=t}else if(""===t)cookie.clearcookie(e);else{if(0!=t&&!t)return cookie.get(e);cookie.set(e,t,1e4)}}catch(e){}}function getUuid(e,t){var i,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=[];if(t=t||n.length,e)for(i=0;i<e;i++)s[i]=n[0|Math.random()*t];else{var o;for(s[8]=s[13]=s[18]=s[23]="-",s[14]="4",i=0;i<36;i++)s[i]||(o=0|16*Math.random(),s[i]=n[19==i?3&o|8:o])}return s.join("")}function filterXss(e){return e?e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;"):e}function bindObjOutsiteClick(e,t,i){var n="doc_"+(new Date).getTime(),s="doc_"+(new Date).getTime()+1;e.attr("class")&&e.attr("class",e.attr("class").replace(/doc_(\d+)/g,"")),e.addClass(n),t&&(t.attr("class",t.attr("class").replace(/doc_(\d+)/g,"")),t.addClass(s)),setTimeout(function(){$(document).bind("click",function(t){$(t.target).hasClass(s)||$(t.target).parents(".showErrorBox").length||0==$(t.target).parents("."+n).length&&(e.hide(),"function"==typeof i&&i(),$(document).unbind("click"))})},200)}function unbindObjOutsiteClick(e,t){"function"==typeof t&&t(),$(document).unbind("click")}function Utemplate(e,t){function i(e,t){return o+=t?e.match(s)?e+"\n":"arr.push("+e+");\n":""!=e?"arr.push('"+e.replace(/"/g,'\\"')+"');\n":"",arguments.callee}for(var n=/<%([^%>]+)?%>/g,s=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,o="var arr = []; \n",a=0;match=n.exec(e);)i(e.slice(a,match.index))(match[1],!0),a=match.index+match[0].length;return i(e.substr(a,e.length-a)),o+="return arr.join('')",new Function(o.replace(/[\r\t\n]/g,"")).apply(t)}function placeholderSupport(){return"placeholder"in document.createElement("input")}function EventManger(){var e={};this.subscribe=function(t,i){void 0===e[t]&&(e[t]=[]),e[t].push({context:this,callback:i})},this.publish=function(t){if(void 0===e[t])return!1;for(var i=Array.prototype.slice.call(arguments,1),n=0,s=e[t].length;n<s;n++){var o=e[t][n];o.callback.apply(o.context,i)}}}var DEBUG=!0,UA=window.navigator.userAgent,isIE,isWebkit,isZpdesk,ipcRenderer,isTouch=!1;if((UA.indexOf("Edge/")>-1||UA.indexOf("MSIE ")>-1||UA.indexOf("Trident/")>-1)&&(isIE=!0),UA.indexOf("ZhipinDesktop/")>-1&&(isZpdesk=!0,ipcRenderer=window.top.ipcRenderer),isZpdesk&&ipcRenderer.send("messageLogout"),"ontouchstart"in window){var isTouch=!0;document.addEventListener("touchstart",function(){},!1)}var loadScript=function(e){var t,i;if(e&&""!=e)for(t=e.split(","),i=0;i<t.length;i++)$.getScript(t[i])};$(function(){"undefined"!=typeof loginjson&&1==loginjson.act&&($(".sign-register .form-btn .btn").html(""==loginjson.btnValue?"登录":loginjson.btnValue),$(".sign-register .sign-tab").hide(),$(".sign-register .title").html(loginjson.titleValue))});var Cookie={get:function(e){var t,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(i))?unescape(t[2]):null},getObj:function(){for(var e=document.cookie.split(";"),t="{",i=0;i<e.length;i++){var n=e[i].split("=");t+='"'+n[0].replace(/\s+/g,"")+'":"'+decodeURIComponent(n[1])+'",'}return t=t.slice(0,-1),t+="}",JSON.parse(t)},set:function(e,t,i,n,s){var o=e+"="+encodeURIComponent(t);if(i){o+=";expires="+new Date(i).toGMTString()}o=n?o+";domain="+n:o,o=s?o+";path="+s:o,document.cookie=o},del:function(e,t,i){var n=new Date("1970-01-01"),s=e+"=null;expires="+n.toGMTString();s=t?s+";domain="+t:s,s=i?s+";path="+i:s,document.cookie=s}},cookie={get:function(e){var t,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(i))?unescape(t[2]):null},set:function(e,t,i){if(i){var n=new Date;n.setMinutes(i),document.cookie=e+"="+encodeURIComponent(t)+";expires="+n.toGMTString()}else document.cookie=e+"="+encodeURIComponent(t)},clearcookie:function(e,t,i){cookie.get(e)&&(document.cookie=e+"="+(t?";path="+t:"")+(i?";domain="+i:"")+";expires=Thu,01-Jan-1970 00:00:01 GMT")}},PAGE_ACTIVITY=!0;!function(){function e(e){var i={focus:!0,focusin:!0,pageshow:!0,blur:!1,focusout:!1,pagehide:!1};e=e||window.event,PAGE_ACTIVITY=e.type in i?i[e.type]:!this[t]}var t="hidden";t in document?document.addEventListener("visibilitychange",e):(t="mozHidden")in document?document.addEventListener("mozvisibilitychange",e):(t="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",e):(t="msHidden")in document?document.addEventListener("msvisibilitychange",e):"onfocusin"in document?document.onfocusin=document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e}(),window.INTERFACE_URLS={homeUrl:"/",logoutUrl:"/logout/",chatProtoUrl:"/v2/web/boss/js/module/chat.proto"},$(function(){$(".nav-figure").length&&($(".standard").length||($(".user-nav a").eq(0).attr("disabled","disabled"),$(".user-nav a").eq(0).on("click",function(e){alert("请升级您的浏览器才能使用聊天功能"),e.preventDefault()})))});var KZ=KZ||{};KZ={form:{Prompt:function(e,t){var i=$('<div class="kz_tishi" style="position:absolute;z-index:9999;"/>').html(e);0==$(".kz_tishi").length&&(i.appendTo("body").delay(1500).fadeOut(500,function(){$(this).remove()}),i.css({left:1==t?($(window).width()-i.outerWidth())/2:0,top:1==t?($(window).height()-i.outerHeight())/2:0,width:1==t?"auto":"100%",position:"fixed"}))}},pageLock:{show:function(e,t,i,n,s){var o;if(o=$(".guide").length?$(window.document):$(window.parent.document),0==o.find(t.selector).length){o.width(),$(t).outerWidth(),$(window).height(),$(t).outerHeight()}else{o.width(),o.find(t.selector).outerWidth(),$(window).height(),o.find(t.selector).outerHeight()}if(!o.find("#lockpage").length>0){$("<div id='lockpage'/>").css({position:"fixed",zIndex:e?e:20,left:0,top:0,width:"100%",height:"100%",background:"#000",opacity:.8}).appendTo(o.find("body"))}o.find("#lockpage").css("height",$(document).height()+"px"),0==o.find(t.selector).length?($(t).appendTo(o.find("body")),o.find(t).css({position:"fixed",zIndex:e+1,left:"50%",top:"50%","margin-left":"-"+$(t).outerWidth()/2+"px","margin-top":"-"+$(t).outerHeight()/2+"px",display:"block"})):o.find(t.selector).css({position:"fixed",zIndex:e+1,left:"50%",top:"50%","margin-left":"-"+$(t.selector).outerWidth()/2+"px","margin-top":"-"+$(t.selector).outerHeight()/2+"px",display:"block"}),KZ.pageLock.hide(i,t,s),"function"==typeof n&&n()},hide:function(e,t,i){var n;n=$(".guide").length?$(window.document):$(window.parent.document),n.find(e).click(function(e){void 0===i&&n.find(t).appendTo("body"),$(t).hide(),n.find("#lockpage").remove(),e.preventDefault()})},runHide:function(e){var t;t=$(".guide").length?$(window.document):$(window.parent.document),t.find(e.selector).length>0?setTimeout(function(){t.find(e).remove()},100):t.find(e).hide(),t.find("#lockpage").remove()},runRemove:function(e){var t;t=$(".guide").length?$(window.document):$(window.parent.document),t.find(e).appendTo("body"),$(e).hide(),t.find("#lockpage").remove()}}};var explorer=window.navigator.userAgent;if(explorer.indexOf("MSIE")>=0){var b_version=navigator.appVersion,version=b_version.split(";");window.IE=parseInt(version[1].replace(/[^\d\.]/g,"")),$("html").addClass("ie")}else window.IE=0;window.IE>0&&window.IE<9&&!Array.prototype.indexOf&&(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(e===this[t])return t;return-1}),$(function(){$.extend({initUploadPortrait:function(e){var t=$.extend({title:"上传照片",url:"uploadURL=/companyugc/upload/logo.json?c=uploadPortrit&amp;jsCallback=uploadOk",callback:null},e),i="";i+='<section class="p_dialog uploadPortrait"><div class="dialog_con"><a href="#" rel="nofollow" class="dialog_close"></a><div id="uploadLogoFlash"><h3>'+t.title+'</h3><object id="FlashID" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="550" height="440"><param name="movie" value="/v2/web/geek/images/portrait.swf" /><param name="quality" value="high" /><param name="wmode" value="transparent" /><param name="flashVars" value="'+t.url+'" /><!--[if !IE]>--><object type="application/x-shockwave-flash" data="/v2/web/geek/images/portrait.swf" width="550" height="440"><!--<![endif]--><param name="quality" value="high" /><param name="wmode" value="transparent" /><param name="flashVars" value="'+t.url+'" /><!--[if !IE]>--></object><!--<![endif]--></object></div></div></section>',$(".p_dialog").length<=0&&$(i).appendTo("body"),KZ.pageLock.show(1e3,".uploadPortrait",".uploadPortrait .dialog_close"),top.uploadOk=function(e){var i="string"==typeof e?$.parseJSON(e):e;if(i&&1==i.rescode){var n=i.url||[];t.callback&&(t.callback(n,i),KZ.pageLock.runHide(".uploadPortrait"))}else alert("图片上传失败")}}})});var crop={cWidth:350,cHeight:350,cR:175,show:function(e){this.opts=e,crop.uploadEl=e.element,this.inited||(this.bindFileInput(e.defaultAvatarHtml),this.inited=!0),e.title&&this.html.find(".hd span").text(e.title),KZ.pageLock.show(1e3,".avatar_layer_html5",".avatar_layer_html5 .close"),this.selected=!1},hide:function(){this.html.find(".close").click()},bindFileInput:function(e){var t=this;this.html||(this.html=e||$('<div class="avatar_layer avatar_layer_html5">\t\t\t\t\t\t\t\t<div class="hd"><span/><i class="close"/></div>\t\t\t\t\t\t\t\t<div class="main">\t\t\t\t\t\t\t\t\t<div class="selectpic">\t\t\t\t\t\t\t\t\t\t<div class="sbox">\t\t\t\t\t\t\t\t\t\t\t<a class="btns" href="#">选择图片</a>\t\t\t\t\t\t\t\t\t\t\t<input type="file" class="selectfile">\t\t\t\t\t\t\t\t\t\t\t<p>只支持JPG、PNG，大小不超过2M</p>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t<div class="editbox">\t\t\t\t\t\t\t\t\t\t\t<canvas></canvas>\t\t\t\t\t\t\t\t\t\t\t<div class="pop"><i></i></div>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="layer_btns">\t\t\t\t\t\t\t\t\t\t<span class="change">更换图片<input type="file" class="selectfile"></span>\t\t\t\t\t\t\t\t\t\t<a class="cancel close" href="#">取 消</a>\t\t\t\t\t\t\t\t\t\t<a class="sure"  href="#" ka="avatar_layer_html5_button_sure">确 定</a>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>'),this.html.appendTo("body"),e?(t.html.find(".img-box").on("click",function(){$(this).addClass("img-checked").siblings().removeClass("img-checked")}),this.html.find(".sure").on("click",function(e){if(t.selected)"function"==typeof t.opts.callback&&crop.getCropData(t.opts.callback),t.hide(),t.clear(),e.preventDefault();else{if(!t.html.find(".img-checked").length)return alert("请选择图片"),!1;$.ajax({url:$("[upload-base64-url]").attr("upload-base64-url"),type:"post",data:{headImg:t.html.find(".img-checked img").attr("data-id")},dataType:"json",success:function(i){if(i.rescode){var n=$(".avatar_box .avatar img");n.attr("src",i.url[0]),n.closest("dd").find("input:hidden[name=tiny]").val(i.url[0]),n.closest("dd").find("input:hidden[name=large]").val(i.url[1]),t.hide(),t.clear(),e.preventDefault(),crop.uploadEl.find(".tip-text").remove()}else alert("图片保存失败")}})}})):this.html.find(".sure").on("click",function(e){if(!t.selected)return alert("请选择图片"),!1;"function"==typeof t.opts.callback&&crop.getCropData(t.opts.callback),t.hide(),t.clear(),e.preventDefault()}),this.html.find(".cancel").bind("click",function(e){t.clear(),e.preventDefault()})),this.html.find(".selectfile,.layer_btns .selectfile").change(function(t){if(t.target.files.length){e&&crop.uploadEl.find(".tip-text").remove();var i=t.target.files[0];if(!/image\/\w+/.test(i.type))return alert("请确保文件为图像类型"),!1;if(window.FileReader){var n=new FileReader;n.onloadstart=function(e){},n.onloadend=function(e){var t=new Image;t.onload=function(){crop.resetImg(t)},t.src=e.target.result},n.readAsDataURL(i)}}})},clear:function(){this.editbox&&(this.html.find(".selectfile").val(""),this.editbox.css({backgroundImage:"none"}).hide(),this.html.find(".selectpic").find(".sbox").show(),this.msk.clearRect(0,0,this.cWidth,this.cHeight),this.html.find(".layer_btns .change").hide())},resetImg:function(e){this.selected=!0;var t=this,i=this.html.find(".selectpic").find(".sbox").hide().end().find(".editbox").show();this.html.find(".layer_btns .change").css("display","inline-block"),this.editbox=i;var n=this.compress(e,1);this.img=n,i.css({backgroundImage:"url("+n+")"}),this.circle={x:this.cWidth/2,y:this.cHeight/2,r:75},this.popbox=i.find(".pop"),this.pop=i.find(".pop i"),this.popbox.css({left:this.circle.x-this.circle.r,top:this.circle.y-this.circle.r,width:2*this.circle.r,height:2*this.circle.r}),this.popbox.bind("mousedown",function(e){var i={x:crop.circle.x,y:crop.circle.y,r:crop.circle.r},n={x:e.clientX,y:e.clientY,left:$(this).position().left,top:$(this).position().top};t.html.bind("mousemove",function(e){var t=e.clientX-n.x,s=e.clientY-n.y;crop.circle.x=i.x+t,crop.circle.y=i.y+s,crop.popbox.css({left:crop.circle.x-crop.circle.r,top:crop.circle.y-crop.circle.r,width:2*crop.circle.r,height:2*crop.circle.r}),crop.draw(crop.circle)}),t.html.bind("mouseup",function(e){crop.circle.x-crop.circle.r<0&&(crop.circle.x=crop.circle.r),crop.circle.x+crop.circle.r>t.cWidth&&(crop.circle.x=t.cWidth-crop.circle.r),crop.circle.y-crop.circle.r<0&&(crop.circle.y=crop.circle.r),crop.circle.y+crop.circle.r>t.cHeight&&(crop.circle.y=t.cHeight-crop.circle.r),crop.popbox.css({left:crop.circle.x-crop.circle.r,top:crop.circle.y-crop.circle.r,width:2*crop.circle.r,height:2*crop.circle.r}),crop.draw(crop.circle),t.html.unbind("mousemove mouseup")})}),this.pop.bind("mousedown",function(e){var i={x:crop.circle.x,y:crop.circle.y,r:crop.circle.r},n={x:e.clientX,y:e.clientY,left:$(this).position().left,top:$(this).position().top};t.html.bind("mousemove",function(e){var t=e.clientX-n.x,s=e.clientY-n.y,o=Math.max(t,s);crop.circle.r=i.r+o,crop.popbox.css({left:crop.circle.x-crop.circle.r,top:crop.circle.y-crop.circle.r,width:2*crop.circle.r,height:2*crop.circle.r}),crop.draw(crop.circle)}),t.html.bind("mouseup",function(){crop.circle.r<75&&(crop.circle.r=75),crop.circle.r>t.cR&&(crop.circle.r=t.cR),crop.circle.x-crop.circle.r<0&&(crop.circle.x=crop.circle.r),crop.circle.x+crop.circle.r>t.cWidth&&(crop.circle.x=t.cWidth-crop.circle.r),crop.circle.y-crop.circle.r<0&&(crop.circle.y=crop.circle.r),crop.circle.y+crop.circle.r>t.cHeight&&(crop.circle.y=t.cHeight-crop.circle.r),crop.popbox.css({left:crop.circle.x-crop.circle.r,top:crop.circle.y-crop.circle.r,width:2*crop.circle.r,height:2*crop.circle.r}),crop.draw(crop.circle),t.html.unbind("mousemove mouseup")}),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}),this.mask=this.html.find(".selectpic canvas").get(0),this.msk=this.mask.getContext("2d"),this.mask.width=this.cWidth,this.mask.height=this.cHeight,this.draw(this.circle)},draw:function(e){var t=this.msk;t.clearRect(0,0,this.cWidth,this.cHeight),t.globalCompositeOperation="source-over",t.beginPath(),t.fillStyle="#000000",t.rect(0,0,this.cWidth,this.cHeight),t.globalAlpha=.6,t.fill(),t.closePath(),t.globalCompositeOperation="destination-out",t.beginPath(),t.fillStyle="",t.arc(e.x,e.y,e.r,0,2*Math.PI,!1),t.fill(),t.closePath()},getCropData:function(e){var t=this.circle,i=new Image;i.crossOrigin="Anonymous",i.onload=function(){var n=document.createElement("canvas");n.width=2*t.r,n.height=2*t.r;var s=n.getContext("2d");s.clearRect(0,0,n.width,n.height),s.fillStyle="#fff",s.fillRect(0,0,n.width,n.height),s.drawImage(i,(t.x-t.r)*-1,(t.y-t.r)*-1);var o=n.toDataURL("image/jpeg",1);e(o)},i.src=this.img},compress:function(e,t){var i=this.cWidth,n=this.cHeight;e.width>e.height?(imageWidth=i,imageHeight=Math.round(n*(e.height/e.width))):e.width<e.height?(imageHeight=n,imageWidth=Math.round(i*(e.width/e.height))):(imageWidth=i,imageHeight=n),t=imageWidth/e.width;var s=document.createElement("canvas");s.width=i,s.height=n;var o=s.getContext("2d");return o.clearRect(0,0,s.width,s.height),imageWidth<s.width?o.drawImage(e,(s.width-imageWidth)/2,0,imageWidth,imageHeight):o.drawImage(e,0,(s.height-imageHeight)/2,imageWidth,imageHeight),s.toDataURL("image/png",t)}};if(function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}var i=function(t,i){var o=this;this.element=e(t),this.container=i.container||"body",this.language=i.language||this.element.data("date-language")||"en",this.language=this.language in n?this.language:"en",this.isRTL=n[this.language].rtl||!1,this.formatType=i.formatType||this.element.data("format-type")||"standard",this.format=s.parseFormat(i.format||this.element.data("date-format")||n[this.language].format||s.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.bootcssVer=this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2,this.component=!!this.element.is(".date")&&(3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar").parent()),this.componentReset=!!this.element.is(".date")&&(3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-remove").parent():this.element.find(".add-on .icon-remove").parent()),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=i.linkField||this.element.data("link-field")||!1,this.linkFormat=s.parseFormat(i.linkFormat||this.element.data("link-format")||s.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=i.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=i.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=i.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=i.initialDate||new Date,this.minLimitYear=i.minLimitYear||!1,this._attachEvents(),this.formatViewType="datetime","formatViewType"in i?this.formatViewType=i.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in i?this.minView=i.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=s.convertViewMode(this.minView),this.maxView=s.modes.length-1,"maxView"in i?this.maxView=i.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=s.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in i?this.wheelViewModeNavigation=i.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in i?this.wheelViewModeNavigationInverseDirection=i.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in i?this.wheelViewModeNavigationDelay=i.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in i?this.startViewMode=i.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=s.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in i?this.viewSelect=i.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=s.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in i?this.forceParse=i.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=e(3==this.bootcssVer?s.templateV3:s.template).appendTo(this.isInline?this.element:this.container).on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(e.fn.mousewheel?this.picker.on({mousewheel:e.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition),this.isRTL&&(this.picker.addClass("datetimepicker-rtl"),3==this.bootcssVer?this.picker.find(".prev span, .next span").toggleClass("glyphicon-arrow-left glyphicon-arrow-right"):this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.minLimitYear&&this.picker.addClass("date-showminyear"),e(document).on("click",function(t){0===e(t.target).closest(".datetimepicker").length&&o.hide()}),this.autoclose=!1,"autoclose"in i?this.autoclose=i.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in i?this.keyboardNavigation=i.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=i.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=i.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(i.weekStart||this.element.data("date-weekstart")||n[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-(1/0),this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(i.startDate||this.element.data("date-startdate")),this.setEndDate(i.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.timer=null,this.isInline&&this.show()};i.prototype={constructor:i,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{click:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{click:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:e.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]];for(var t,i,n=0;n<this._events.length;n++)t=this._events[n][0],i=this._events[n][1],t.on(i)},_detachEvents:function(){for(var e,t,i=0;i<this._events.length;i++)e=this._events[i][0],t=this._events[i][1],e.off(t);this._events=[]},show:function(t){if(this.picker.is(":visible"))return void this.picker.hide();e(".datetimepicker").hide(),e(".dropdown-select-open").removeClass("dropdown-select-open"),e(".dropdown-menu-open").removeClass("dropdown-menu-open"),this.element.closest(".dropdown-select").addClass("dropdown-select-open"),this.element.closest(".dropdown-wrap").addClass("dropdown-menu-open"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(t){this.isVisible&&(this.isInline||(this.element.closest(".dropdown-select").removeClass("dropdown-select-open"),this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var e=this.getUTCDate();return new Date(e.getTime()+6e4*e.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(new Date(e.getTime()-6e4*e.getTimezoneOffset()))},setUTCDate:function(e){e>=this.startDate&&e<=this.endDate?(this.date=e,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:e,startDate:this.startDate,endDate:this.endDate})},setFormat:function(e){this.format=s.parseFormat(e,this.formatType);var t;this.isInput?t=this.element:this.component&&(t=this.element.find("input")),t&&t.val()&&this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t)),this.linkField&&e("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(e){return void 0==e&&(e=this.format),s.formatDate(this.date,e,this.language,this.formatType)},setStartDate:function(e){this.startDate=e||-(1/0),this.startDate!==-(1/0)&&(this.startDate=s.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(e){this.endDate=e||1/0,this.endDate!==1/0&&(this.endDate=s.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this.daysOfWeekDisabled=t||[],e.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t=0;e("div").each(function(){var i=parseInt(e(this).css("zIndex"),10);i>t&&(t=i)});var i,n,s,o,a=t+10;o=this.container instanceof e?this.container.offset():e(this.container).offset(),this.component?(i=this.component.offset(),s=i.left,"bottom-left"!=this.pickerPosition&&"top-left"!=this.pickerPosition||(s+=this.component.outerWidth()-this.picker.outerWidth())):(i=this.element.offset(),s=i.left),s+220>document.body.clientWidth&&(s=document.body.clientWidth-220),n="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?i.top-this.picker.outerHeight():i.top+this.height,n-=o.top,s-=o.left,this.picker.css({top:n,left:s,zIndex:a})}},update:function(){var e,t=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],t=!0):("string"==typeof(e=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate)||e instanceof String)&&(e=e.replace(/^\s+|\s+$/g,"")),e||(e=new Date,t=!1),this.date=s.parseDate(e,this.format,this.language,this.formatType),t&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){for(var e=this.weekStart,t="<tr>";e<this.weekStart+7;)t+='<th class="dow">'+n[this.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datetimepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;t<12;)e+='<span class="month">'+n[this.language].monthsShort[t++]+"</span>";this.picker.find(".datetimepicker-months td").html(e)},fill:function(){if(null!=this.date&&null!=this.viewDate){var i=new Date(this.viewDate),o=i.getUTCFullYear(),a=i.getUTCMonth(),r=i.getUTCDate(),l=i.getUTCHours(),c=i.getUTCMinutes(),d=this.startDate!==-(1/0)?this.startDate.getUTCFullYear():-(1/0),h=this.startDate!==-(1/0)?this.startDate.getUTCMonth():-(1/0),u=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,p=this.endDate!==1/0?this.endDate.getUTCMonth():1/0,f=new t(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(n[this.language].months[a]+" "+o),"time"==this.formatViewType){var g=l%12?l%12:12,v=(g<10?"0":"")+g,w=(c<10?"0":"")+c,y=n[this.language].meridiem[l<12?0:1];this.picker.find(".datetimepicker-hours thead th:eq(1)").text(v+":"+w+" "+(y?y.toUpperCase():"")),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(v+":"+w+" "+(y?y.toUpperCase():""))}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(r+" "+n[this.language].months[a]+" "+o),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(r+" "+n[this.language].months[a]+" "+o);this.picker.find("tfoot th.today").html('<div class="today-btn">'+n[this.language].today+"</div>").toggle(this.todayBtn!==!1),this.fillMonths();var b=t(o,a-1,28,0,0,0,0),$=s.getDaysInMonth(b.getUTCFullYear(),b.getUTCMonth());b.setUTCDate($),b.setUTCDate($-(b.getUTCDay()-this.weekStart+7)%7);var C=new Date(b);C.setUTCDate(C.getUTCDate()+42),C=C.valueOf();for(var k,x=[],D="";b.valueOf()<C;)b.getUTCDay()==this.weekStart&&x.push("<tr>"),k="",D=b.getUTCDate(),b.getUTCFullYear()<o||b.getUTCFullYear()==o&&b.getUTCMonth()<a?k+=" old":(b.getUTCFullYear()>o||b.getUTCFullYear()==o&&b.getUTCMonth()>a)&&(k+=" new"),this.todayHighlight&&b.getUTCFullYear()==m.getFullYear()&&b.getUTCMonth()==m.getMonth()&&D==m.getDate()&&(k+=" today",D="今日"),b.valueOf()==f&&(k+=" active"),(b.valueOf()+864e5<=this.startDate||b.valueOf()>this.endDate||e.inArray(b.getUTCDay(),this.daysOfWeekDisabled)!==-1)&&(k+=" disabled"),x.push('<td class="day'+k+'"><em>'+b.getUTCDate()+"</em></td>"),b.getUTCDay()==this.weekEnd&&x.push("</tr>"),b.setUTCDate(b.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(x.join("")),x=[];for(var T="",_="",S="",E=0;E<24;E++){var j=t(o,a,r,E);k="",j.valueOf()+36e5<=this.startDate||j.valueOf()>this.endDate?k+=" disabled":l==E&&(k+=" active"),this.showMeridian&&2==n[this.language].meridiem.length?(_=E<12?n[this.language].meridiem[0]:n[this.language].meridiem[1],_!=S&&(""!=S&&x.push("</fieldset>"),x.push('<fieldset class="hour"><legend>'+_.toUpperCase()+"</legend>")),S=_,T=E%12?E%12:12,x.push('<span class="hour'+k+" hour_"+(E<12?"am":"pm")+'">'+T+"</span>"),23==E&&x.push("</fieldset>")):(T=E+":00",x.push('<span class="hour'+k+'">'+T+"</span>"))}this.picker.find(".datetimepicker-hours td").html(x.join("")),x=[],T="",_="",S="";for(var E=0;E<60;E+=this.minuteStep){var j=t(o,a,r,l,E,0);k="",j.valueOf()<this.startDate||j.valueOf()>this.endDate?k+=" disabled":Math.floor(c/this.minuteStep)==Math.floor(E/this.minuteStep)&&(k+=" active"),this.showMeridian&&2==n[this.language].meridiem.length?(_=l<12?n[this.language].meridiem[0]:n[this.language].meridiem[1],_!=S&&(""!=S&&x.push("</fieldset>"),x.push('<fieldset class="minute"><legend>'+_.toUpperCase()+"</legend>")),S=_,T=l%12?l%12:12,x.push('<span class="minute'+k+'">'+T+":"+(E<10?"0"+E:E)+"</span>"),59==E&&x.push("</fieldset>")):(T=E+":00",x.push('<span class="minute'+k+'">'+l+":"+(E<10?"0"+E:E)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(x.join(""));var I=this.date.getUTCFullYear(),U=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active")
;I==o&&U.eq(this.date.getUTCMonth()).addClass("active"),(o<d||o>u)&&U.addClass("disabled"),o==d&&U.slice(0,h).addClass("disabled"),o==u&&U.slice(p+1).addClass("disabled"),x="",o=10*parseInt(o/10,10);var M=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var E=-1;E<11;E++){var P=o;if(this.minLimitYear&&o<this.minLimitYear)return;this.minLimitYear&&o==this.minLimitYear&&(P=o+1+"以前"),x+='<span class="year'+(E==-1||10==E?" old":"")+(I==o?" active":"")+(o<d||o>u?" disabled":"")+'" data-year="'+o+'">'+P+"</span>",o+=1}M.html(x),this.place(),this.updateNavArrows()}},updateNavArrows:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth(),n=e.getUTCDate(),s=e.getUTCHours(),o=this.picker.find(".datetimepicker-years").find(".year").last().hasClass("disabled");switch(this.viewMode){case 0:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()&&s<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()&&s>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-(1/0)&&t<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&t>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):o?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(t){if(t.preventDefault(),t.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var i=t.originalEvent,n=i.wheelDelta,s=n>0?1:0===n?0:-1;this.wheelViewModeNavigationInverseDirection&&(s=-s),this.showMode(s),setTimeout(e.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(i){i.stopPropagation(),i.preventDefault();var n=e(i.target).closest("span, td, th, legend");if(n.is(".glyphicon")&&(n=e(n).parent().closest("span, td, th, legend")),1==n.length){if(n.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.picker.find(".prev").css({visibility:"hidden"}),this.picker.find(".next").css({visibility:"hidden"}),this.throttle(function(){var e=s.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,e);break;case 1:this.viewDate=this.moveDate(this.viewDate,e);break;case 2:this.viewDate=this.moveMonth(this.viewDate,e);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,e)}this.fill(),this.element.trigger({type:n[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate})},300);break;case"today":var o=new Date;o=t(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),0),o<this.startDate?o=this.startDate:o>this.endDate&&(o=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(o),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){var a=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),l=this.viewDate.getUTCDate(),c=this.viewDate.getUTCHours(),d=this.viewDate.getUTCMinutes(),h=this.viewDate.getUTCSeconds();if(n.is(".month")?(this.viewDate.setUTCDate(1),r=n.parent().find("span").index(n),l=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(r),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(t(a,r,l,c,d,h,0))):n.is(".year")?(this.viewDate.setUTCDate(1),a=parseInt(n.text(),10)||0,n.text().indexOf("以前")>-1&&(a-=1),this.viewDate.setUTCFullYear(a),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(t(a,r,l,c,d,h,0)),this.minLimitYear&&this.minLimitYear==a&&(this.viewMode=this.startViewMode,this.showMode(0),this._setDate(t(a,0,l,c,d,h,0)),this.fill(),this.hide())):n.is(".hour")?(c=parseInt(n.text(),10)||0,(n.hasClass("hour_am")||n.hasClass("hour_pm"))&&(12==c&&n.hasClass("hour_am")?c=0:12!=c&&n.hasClass("hour_pm")&&(c+=12)),this.viewDate.setUTCHours(c),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(t(a,r,l,c,d,h,0))):n.is(".minute")&&(d=parseInt(n.text().substr(n.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(d),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(t(a,r,l,c,d,h,0))),0!=this.viewMode){var u=this.viewMode;this.minLimitYear&&this.minLimitYear==a?this.showMode(0):this.showMode(-1),this.fill(),u==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var l=parseInt(n.text(),10)||1,a=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCHours(),d=this.viewDate.getUTCMinutes(),h=this.viewDate.getUTCSeconds();n.is(".old")?0===r?(r=11,a-=1):r-=1:n.is(".new")&&(11==r?(r=0,a+=1):r+=1),this.viewDate.setUTCFullYear(a),this.viewDate.setUTCMonth(r,l),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(t(a,r,l,c,d,h,0))}var u=this.viewMode;this.showMode(-1),this.fill(),u==this.viewMode&&this.autoclose&&this.hide()}}},throttle:function(e,t){var i=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.call(i)},t)},_setDate:function(e,t){t&&"date"!=t||(this.date=e),t&&"view"!=t||(this.viewDate=e),this.fill(),this.setValue();var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),this.autoclose),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCMinutes(i.getUTCMinutes()+t*this.minuteStep),i},moveHour:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCHours(i.getUTCHours()+t),i},moveDate:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCDate(i.getUTCDate()+t),i},moveMonth:function(e,t){if(!t)return e;var i,n,s=new Date(e.valueOf()),o=s.getUTCDate(),a=s.getUTCMonth(),r=Math.abs(t);if(t=t>0?1:-1,1==r)n=t==-1?function(){return s.getUTCMonth()==a}:function(){return s.getUTCMonth()!=i},i=a+t,s.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var l=0;l<r;l++)s=this.moveMonth(s,t);i=s.getUTCMonth(),s.setUTCDate(o),n=function(){return i!=s.getUTCMonth()}}for(;n();)s.setUTCDate(--o),s.setUTCMonth(i);return s},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.startDate&&e<=this.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27==e.keyCode&&this.show());var t,i,n,s=!1;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;t=37==e.keyCode?-1:1,viewMode=this.viewMode,e.ctrlKey?viewMode+=2:e.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):3==viewMode?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):2==viewMode?(i=this.moveDate(this.date,t),n=this.moveDate(this.viewDate,t)):1==viewMode?(i=this.moveHour(this.date,t),n=this.moveHour(this.viewDate,t)):0==viewMode&&(i=this.moveMinute(this.date,t),n=this.moveMinute(this.viewDate,t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),s=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;t=38==e.keyCode?-1:1,viewMode=this.viewMode,e.ctrlKey?viewMode+=2:e.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):3==viewMode?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):2==viewMode?(i=this.moveDate(this.date,7*t),n=this.moveDate(this.viewDate,7*t)):1==viewMode?this.showMeridian?(i=this.moveHour(this.date,6*t),n=this.moveHour(this.viewDate,6*t)):(i=this.moveHour(this.date,4*t),n=this.moveHour(this.viewDate,4*t)):0==viewMode&&(i=this.moveMinute(this.date,4*t),n=this.moveMinute(this.viewDate,4*t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),s=!0);break;case 13:if(0!=this.viewMode){var o=this.viewMode;this.showMode(-1),this.fill(),o==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();e.preventDefault();break;case 9:this.hide()}if(s){var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(e){if(e){var t=Math.max(0,Math.min(s.modes.length-1,this.viewMode+e));t>=this.minView&&t<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:t}),this.viewMode=t)}this.picker.find(">div").hide().filter(".datetimepicker-"+s.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(e){this._setDate(null,"date")},convertViewModeText:function(e){switch(e){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}},e.fn.datetimepicker=function(t){var n=Array.apply(null,arguments);n.shift();var s;return this.each(function(){var o=e(this),a=o.data("datetimepicker"),r="object"==typeof t&&t;if(a||o.data("datetimepicker",a=new i(this,e.extend({},e.fn.datetimepicker.defaults,r))),"string"==typeof t&&"function"==typeof a[t]&&void 0!==(s=a[t].apply(a,n)))return!1}),void 0!==s?s:this},e.fn.datetimepicker.defaults={},e.fn.datetimepicker.Constructor=i;var n=e.fn.datetimepicker.dates={en:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"至今",suffix:[],meridiem:["上午","下午"]}},s={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getDaysInMonth:function(e,t){return[31,s.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getDefaultFormat:function(e,t){if("standard"==e)return"input"==t?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==e)return"input"==t?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(e){if("standard"==e)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==e)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(e,t){var i=e.replace(this.validParts(t),"\0").split("\0"),n=e.match(this.validParts(t));if(!i||!i.length||!n||0==n.length)throw new Error("Invalid date format.");return{separators:i,parts:n}},parseDate:function(s,o,a,r){if(s instanceof Date){var l=new Date(s.valueOf()-6e4*s.getTimezoneOffset());return l.setMilliseconds(0),l}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(s)&&(o=this.parseFormat("yyyy-mm-dd",r)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(s)&&(o=this.parseFormat("yyyy-mm-dd hh:ii",r)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(s)&&(o=this.parseFormat("yyyy-mm-dd hh:ii:ss",r)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(s)){var c,d,h=/([-+]\d+)([dmwy])/,u=s.match(/([-+]\d+)([dmwy])/g);s=new Date;for(var p=0;p<u.length;p++)switch(c=h.exec(u[p]),d=parseInt(c[1]),c[2]){case"d":s.setUTCDate(s.getUTCDate()+d);break;case"m":s=i.prototype.moveMonth.call(i.prototype,s,d);break;case"w":s.setUTCDate(s.getUTCDate()+7*d);break;case"y":s=i.prototype.moveYear.call(i.prototype,s,d)}return t(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),0)}var f,m,c,u=s&&s.match(this.nonpunctuation)||[],s=new Date(0,0,0,0,0,0,0),g={},v=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],w={hh:function(e,t){return e.setUTCHours(t)},h:function(e,t){return e.setUTCHours(t)},HH:function(e,t){return e.setUTCHours(12==t?0:t)},H:function(e,t){return e.setUTCHours(12==t?0:t)},ii:function(e,t){return e.setUTCMinutes(t)},i:function(e,t){return e.setUTCMinutes(t)},ss:function(e,t){return e.setUTCSeconds(t)},s:function(e,t){return e.setUTCSeconds(t)},yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!=t;){if(isNaN(e.getUTCMonth()))return e;e.setUTCDate(e.getUTCDate()-1)}return e},d:function(e,t){return e.setUTCDate(t)},p:function(e,t){return e.setUTCHours(1==t?e.getUTCHours()+12:e.getUTCHours())}};if(w.M=w.MM=w.mm=w.m,w.dd=w.d,w.P=w.p,s=t(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()),u.length==o.parts.length){for(var p=0,y=o.parts.length;p<y;p++){if(f=parseInt(u[p],10),c=o.parts[p],isNaN(f))switch(c){case"MM":m=e(n[a].months).filter(function(){var e=this.slice(0,u[p].length);return e==u[p].slice(0,e.length)}),f=e.inArray(m[0],n[a].months)+1;break;case"M":m=e(n[a].monthsShort).filter(function(){var e=this.slice(0,u[p].length),t=u[p].slice(0,e.length);return e.toLowerCase()==t.toLowerCase()}),f=e.inArray(m[0],n[a].monthsShort)+1;break;case"p":case"P":f=e.inArray(u[p].toLowerCase(),n[a].meridiem)}g[c]=f}for(var b,p=0;p<v.length;p++)(b=v[p])in g&&!isNaN(g[b])&&w[b](s,g[b])}return s},formatDate:function(t,i,o,a){if(null==t)return"";var r;if("standard"==a)r={yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear(),m:t.getUTCMonth()+1,M:n[o].monthsShort[t.getUTCMonth()],MM:n[o].months[t.getUTCMonth()],d:t.getUTCDate(),D:n[o].daysShort[t.getUTCDay()],DD:n[o].days[t.getUTCDay()],p:2==n[o].meridiem.length?n[o].meridiem[t.getUTCHours()<12?0:1]:"",h:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()},2==n[o].meridiem.length?r.H=r.h%12==0?12:r.h%12:r.H=r.h,r.HH=(r.H<10?"0":"")+r.H,r.P=r.p.toUpperCase(),r.hh=(r.h<10?"0":"")+r.h,r.ii=(r.i<10?"0":"")+r.i,r.ss=(r.s<10?"0":"")+r.s,r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m;else{if("php"!=a)throw new Error("Invalid format type.");r={y:t.getUTCFullYear().toString().substring(2),Y:t.getUTCFullYear(),F:n[o].months[t.getUTCMonth()],M:n[o].monthsShort[t.getUTCMonth()],n:t.getUTCMonth()+1,t:s.getDaysInMonth(t.getUTCFullYear(),t.getUTCMonth()),j:t.getUTCDate(),l:n[o].days[t.getUTCDay()],D:n[o].daysShort[t.getUTCDay()],w:t.getUTCDay(),N:0==t.getUTCDay()?7:t.getUTCDay(),S:t.getUTCDate()%10<=n[o].suffix.length?n[o].suffix[t.getUTCDate()%10-1]:"",a:2==n[o].meridiem.length?n[o].meridiem[t.getUTCHours()<12?0:1]:"",g:t.getUTCHours()%12==0?12:t.getUTCHours()%12,G:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()},r.m=(r.n<10?"0":"")+r.n,r.d=(r.j<10?"0":"")+r.j,r.A=r.a.toString().toUpperCase(),r.h=(r.g<10?"0":"")+r.g,r.H=(r.G<10?"0":"")+r.G,r.i=(r.i<10?"0":"")+r.i,r.s=(r.s<10?"0":"")+r.s}for(var t=[],l=e.extend([],i.separators),c=0,d=i.parts.length;c<d;c++)l.length&&t.push(l.shift()),t.push(r[i.parts[c]]);return l.length&&t.push(l.shift()),t.join("")},convertViewMode:function(e){switch(e){case 4:case"decade":e=4;break;case 3:case"year":e=3;break;case 2:case"month":e=2;break;case 1:case"day":e=1;break;case 0:case"hour":e=0}return e},headTemplate:'<thead><tr><th class="prev"><i class="fz fz-arrow-left"></i></th><th colspan="5" class="switch"></th><th class="next"><i class="fz fz-arrow-right"></i></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="glyphicon glyphicon-arrow-left"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="glyphicon glyphicon-arrow-right"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot class="tfoot"><tr><th colspan="7" class="today"></th></tr></tfoot>'};s.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class="table-condensed">'+s.headTemplate+s.contTemplate+s.footTemplate+'</table></div><div class="datetimepicker-hours"><table class="table-condensed">'+s.headTemplate+s.contTemplate+s.footTemplate+'</table></div><div class="datetimepicker-days"><table class="table-condensed">'+s.headTemplate+"<tbody></tbody>"+s.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+s.headTemplate+s.contTemplate+s.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+s.headTemplate+s.contTemplate+s.footTemplate+"</table></div></div>",s.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+s.headTemplateV3+s.contTemplate+s.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+s.headTemplateV3+s.contTemplate+s.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+s.headTemplateV3+"<tbody></tbody>"+s.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+s.headTemplateV3+s.contTemplate+s.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+s.headTemplateV3+s.contTemplate+s.footTemplate+"</table></div></div>",e.fn.datetimepicker.DPGlobal=s,e.fn.datetimepicker.noConflict=function(){return e.fn.datetimepicker=old,this},e(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(t){var i=e(this);i.data("datetimepicker")||(t.preventDefault(),i.datetimepicker("show"))}),e(function(){e('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),function(e){var t=0,i=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,s,o;for(o=0;null!=(s=i[o]);o++)try{(n=e._data(s,"events"))&&n.remove&&e(s).triggerHandler("remove")}catch(e){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var s,o,a,r,l={},c=t.split(".")[0];return t=t.split(".")[1],s=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[c]=e[c]||{},o=e[c][t],a=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},s=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=s,t=n.apply(this,arguments),this._super=i,this._superApply=o,t}}()):void(l[t]=n)}),a.prototype=e.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix||t:t},l,{constructor:a,namespace:c,widgetName:t,widgetFullName:s}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var n,s,o=i.call(arguments,1),a=0,r=o.length;r>a;a++)for(n in o[a])s=o[a][n],o[a].hasOwnProperty(n)&&void 0!==s&&(t[n]=e.isPlainObject(s)?e.isPlainObject(t[n])?e.widget.extend({},t[n],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,n){var s=n.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,r=i.call(arguments,1),l=this;return a?this.each(function(){var i,n=e.data(this,s);return"instance"===o?(l=n,!1):n?e.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,r),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):(r.length&&(o=e.widget.extend.apply(null,[o].concat(r))),this.each(function(){var t=e.data(this,s);t?(t.option(o||{}),t._init&&t._init()):e.data(this,s,new n(o,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,s,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},n=t.split("."),t=n.shift(),n.length){for(s=a[t]=e.widget.extend({},this.options[t]),o=0;o<n.length-1;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(t=n.pop(),1===arguments.length)return void 0===s[t]?null:s[t];s[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var s,o=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,function(n,a){function r(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+o.eventNamespace,d=l[2];d?s.delegate(d,c,r):i.bind(c,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var s,o,a=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(e.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,o){"string"==typeof s&&(s={effect:s});var a,r=s?s===!0||"number"==typeof s?i:s.effect||i:t;s=s||{},"number"==typeof s&&(s={duration:s}),a=!e.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),a&&e.effects&&e.effects.effect[r]?n[t](s):r!==t&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}}),e.widget}(jQuery),function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(i){if(i.async){var n,s,o,a=i.initialIframeSrc||"javascript:false;";return{send:function(r,l){n=e('<form style="display:none;"></form>'),n.attr("accept-charset",i.formAcceptCharset),o=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+o+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+o+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+o+"_method=PATCH",i.type="POST"),t+=1,s=e('<iframe src="'+a+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(i.paramName)?i.paramName:[i.paramName];s.unbind("load").bind("load",function(){var t;try{if(t=s.contents(),!t.length||!t[0].firstChild)throw new Error}catch(e){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+a+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",s.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),i.paramName&&i.fileInput.each(function(t){e(this).prop("name",o[t]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form")),n.submit(),t&&t.length&&i.fileInput.each(function(i,n){var s=e(t[i]);e(n).prop("name",s.prop("name")).attr("form",s.attr("form")),s.replaceWith(n)})}),n.append(s).appendTo(document.body)},abort:function(){s&&s.unbind("load").prop("src",a),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}(jQuery),function(e){"use strict";function t(t){var i="dragover"===t;return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var s=n.dataTransfer;s&&-1!==e.inArray("Files",s.types)&&this._trigger(t,e.Event(t,{delegatedEvent:n}))!==!1&&(n.preventDefault(),i&&(s.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){return!t.isDefaultPrevented()&&void((i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=8*(t-this.loaded)*(1e3/n),this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var n,s=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&s-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=s,n=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(s,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(s,n,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,n=this,s=t.files[0],o=t.multipart||!e.support.xhrFileUpload,a="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),
o&&!t.blob&&this._isInstanceOf("File",s)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(s.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:a,value:t.blob}):e.each(t.files,function(n,s){i.push({name:"array"===e.type(t.paramName)&&t.paramName[n]||a,value:s})})):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(a,t.blob,s.name):e.each(t.files,function(s,o){(n._isInstanceOf("File",o)||n._isInstanceOf("Blob",o))&&i.append("array"===e.type(t.paramName)&&t.paramName[s]||a,o,o.uploadName||o.name)})),t.data=i):(t.contentType=s.type||"application/octet-stream",t.data=t.blob||s),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",s=(t.prop("files")||[1]).length;s;)n.push(i),s-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var s=e.Deferred(),o=s.promise();return i=i||this.options.context||o,t===!0?s.resolveWith(i,n):t===!1&&s.rejectWith(i,n),o.abort=s.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,i){var n=this,s=function(t){return e.Deferred().resolveWith(n,t).promise()};i.process=function(t,o){return(t||o)&&(i._processQueue=this._processQueue=(this._processQueue||s([this])).then(function(){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():s(arguments)}).then(t,o)),this._processQueue||s([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=n._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var n,s,o=this,a=t.files[0],r=a.size,l=t.uploadedBytes,c=t.maxChunkSize||r,d=this._blobSlice,h=e.Deferred(),u=h.promise();return!(!(this._isXHRUpload(t)&&d&&(l||r>c))||t.data)&&(!!i||(l>=r?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(s=function(){var i=e.extend({},t),u=i._progress.loaded;i.blob=d.call(a,l,l+c,a.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+r,o._initXHRData(i),o._initProgressListener(i),n=(o._trigger("chunksend",null,i)!==!1&&e.ajax(i)||o._getXHRPromise(!1,i.context)).done(function(n,a,c){l=o._getUploadedBytes(c)||l+i.chunkSize,u+i.chunkSize-i._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=a,i.jqXHR=c,o._trigger("chunkdone",null,i),o._trigger("chunkalways",null,i),r>l?s():h.resolveWith(i.context,[n,a,c])}).fail(function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,o._trigger("chunkfail",null,i),o._trigger("chunkalways",null,i),h.rejectWith(i.context,[e,t,n])})},this._enhancePromise(u),u.abort=function(){return n.abort()},s(),u)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,s){var o=s._progress.total,a=s._response;s._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),s),a.result=s.result=t,a.textStatus=s.textStatus=i,a.jqXHR=s.jqXHR=n,this._trigger("done",null,s)},_onFail:function(e,t,i,n){var s=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),s.jqXHR=n.jqXHR=e,s.textStatus=n.textStatus=t,s.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,s,o,a,r=this,l=r._getAJAXSettings(i),c=function(){return r._sending+=1,l._bitrateTimer=new r._BitrateTimer,n=n||((s||r._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&r._getXHRPromise(!1,l.context,s)||r._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){r._onDone(e,t,i,l)}).fail(function(e,t,i){r._onFail(e,t,i,l)}).always(function(e,t,i){if(r._onAlways(e,t,i,l),r._sending-=1,r._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>r._sending)for(var n=r._slots.shift();n;){if("pending"===r._getDeferredState(n)){n.resolve();break}n=r._slots.shift()}0===r._active&&r._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),a=o.then(c)):(this._sequence=this._sequence.then(c,c),a=this._sequence),a.abort=function(){return s=[void 0,"abort","abort"],n?n.abort():(o&&o.rejectWith(l.context,s),c())},this._enhancePromise(a)):c()},_onAdd:function(t,i){var n,s,o,a,r=this,l=!0,c=e.extend({},this.options,i),d=i.files,h=d.length,u=c.limitMultiFileUploads,p=c.limitMultiFileUploadSize,f=c.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(c),v=0;if(!h)return!1;if(p&&void 0===d[0].size&&(p=void 0),(c.singleFileUploads||u||p)&&this._isXHRUpload(c))if(c.singleFileUploads||p||!u)if(!c.singleFileUploads&&p)for(o=[],n=[],a=0;h>a;a+=1)m+=d[a].size+f,(a+1===h||m+d[a+1].size+f>p||u&&a+1-v>=u)&&(o.push(d.slice(v,a+1)),s=g.slice(v,a+1),s.length||(s=g),n.push(s),v=a+1,m=0);else n=g;else for(o=[],n=[],a=0;h>a;a+=u)o.push(d.slice(a,a+u)),s=g.slice(a,a+u),s.length||(s=g),n.push(s);else o=[d],n=[g];return i.originalFiles=d,e.each(o||d,function(s,a){var c=e.extend({},i);return c.files=o?a:[a],c.paramName=n[s],r._initResponseObject(c),r._initProgressObject(c),r._addConvenienceMethods(t,c),l=r._trigger("add",e.Event("add",{delegatedEvent:t}),c)}),l},_replaceFileInput:function(t){var i=t.fileInput,n=i.clone(!0),s=i.is(document.activeElement);t.fileInputClone=n,e("<form></form>").append(n)[0].reset(),i.after(n).detach(),s&&n.focus(),e.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===i[0]?n[0]:t}),i[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,i){var n,s=this,o=e.Deferred(),a=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])},r=function(e){s._handleFileTreeEntries(e,i+t.name+"/").done(function(e){o.resolve(e)}).fail(a)},l=function(){n.readEntries(function(e){e.length?(c=c.concat(e),l()):r(c)},a)},c=[];return i=i||"",t.isFile?t._file?(t._file.relativePath=i,o.resolve(t._file)):t.file(function(e){e.relativePath=i,o.resolve(e)},a):t.isDirectory?(n=t.createReader(),l()):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,n,s=t.prop("webkitEntries")||t.prop("entries");if(s&&s.length)return this._handleFileTreeEntries(s);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(!(n=t.prop("value")))return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(s){n.files=s,i.options.replaceFileInput&&i._replaceFileInput(n),i._trigger("change",e.Event("change",{delegatedEvent:t}),n)!==!1&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),n)!==!1&&this._onAdd(t,n))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,n=t.dataTransfer,s={};n&&n.files&&n.files.length&&(t.preventDefault(),this._getDroppedFiles(n).always(function(n){s.files=n,i._trigger("drop",e.Event("drop",{delegatedEvent:t}),s)!==!1&&i._onAdd(t,s)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,n=this.element.data();e.each(this.element[0].attributes,function(e,s){var o,a=s.name.toLowerCase();/^data-/.test(a)&&(a=a.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),o=n[a],t._isRegExpOption(a,o)&&(o=t._getRegExp(o)),i[a]=o)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,s=this,o=e.Deferred(),a=o.promise();return a.abort=function(){return n=!0,i?i.abort():(o.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always(function(e){if(!n){if(!e.length)return void o.reject();t.files=e,i=s._onSend(null,t),i.then(function(e,t,i){o.resolve(e,t,i)},function(e,t,i){o.reject(e,t,i)})}}),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}(jQuery),"undefined"==typeof jQuery)throw new Error("jquery-confirm requires jQuery");var jconfirm,Jconfirm;!function(e){"use strict";e.fn.confirm=function(t,i){return void 0===t&&(t={}),"string"==typeof t&&(t={content:t,title:!!i&&i}),e(this).each(function(){var i=e(this);i.on("click",function(n){n.preventDefault();var s=e.extend({},t);i.attr("data-title")&&(s.title=i.attr("data-title")),i.attr("data-content")&&(s.content=i.attr("data-content")),s.$target=i,i.attr("href")&&!t.confirm&&(s.confirm=function(){location.href=i.attr("href")}),e.confirm(s)})}),e(this)},e.confirm=function(e,t){return void 0===e&&(e={}),"string"==typeof e&&(e={content:e,title:!!t&&t}),jconfirm(e)},e.alert=function(e,t){return void 0===e&&(e={}),"string"==typeof e&&(e={content:e,title:!!t&&t}),e.cancelButton=!1,jconfirm(e)},jconfirm=function(t){void 0===t&&(t={}),jconfirm.defaults&&e.extend(jconfirm.pluginDefaults,jconfirm.defaults);var t=e.extend({},jconfirm.pluginDefaults,t);return new Jconfirm(t)},Jconfirm=function(t){e.extend(this,t),this._init()},Jconfirm.prototype={_init:function(){var e=this;this._rand=Math.round(99999*Math.random()),this._buildHTML(),this._bindEvents(),setTimeout(function(){e.open(),e._watchContent()},0)},_buildHTML:function(){var t=this;this.animation="anim-"+this.animation.toLowerCase(),this.closeAnimation="anim-"+this.closeAnimation.toLowerCase(),this.theme="jconfirm-"+this.theme.toLowerCase(),"anim-none"==this.animation&&(this.animationSpeed=0),this._lastFocused=e("body").find(":focus"),this.$el=e(this.template).appendTo(this.container).addClass(this.theme),this.$el.find(".jconfirm-box-container").addClass(this.columnClass),this.$el.find(".jconfirm-bg").css(this._getCSS(this.animationSpeed,1)),this.$el.find(".jconfirm-bg").css("opacity",this.opacity),this.$b=this.$el.find(".jconfirm-box").css(this._getCSS(this.animationSpeed,this.animationBounce)).addClass(this.animation),this.$body=this.$b,this.rtl&&this.$el.addClass("rtl"),this._contentReady=e.Deferred(),this._modalReady=e.Deferred(),this.$title=this.$el.find(".title"),this.contentDiv=this.$el.find("div.content"),this.$content=this.contentDiv,this.$contentPane=this.$el.find(".content-pane"),this.$icon=this.$el.find(".icon-c"),this.$closeIcon=this.$el.find(".closeIcon"),this.$contentPane.css(this._getCSS(this.animationSpeed,1)),this.setTitle(),this.setIcon(),this._setButtons(),this.closeIconClass&&this.$closeIcon.html('<i class="'+this.closeIconClass+'"></i>'),t._contentHash=this._hash(t.$content.html()),e.when(this._contentReady,this._modalReady).then(function(){t.setContent(),t.setTitle(),t.setIcon()}),this._getContent(),this._imagesLoaded(),this.autoClose&&this._startCountDown()},_unwatchContent:function(){clearInterval(this._timer)},_hash:function(){if("function"==typeof btoa)return btoa(encodeURIComponent(this.$content.html()))},_watchContent:function(){var e=this;this._timer=setInterval(function(){var t=e._hash(e.$content.html());e._contentHash!=t&&(e._contentHash=t,e.setDialogCenter(),e._imagesLoaded())},this.watchInterval)},_bindEvents:function(){var t=this,i=!1;this.$el.find(".jconfirm-scrollpane").click(function(e){i||(t.backgroundDismiss?(t.cancel(),t.close()):(t.$b.addClass("hilight"),setTimeout(function(){t.$b.removeClass("hilight")},800))),i=!1}),this.$el.find(".jconfirm-box").click(function(e){i=!0}),this.$confirmButton&&this.$confirmButton.click(function(e){e.preventDefault();var i=t.confirm(t.$b);t._stopCountDown(),t.onAction("confirm"),(void 0===i||i)&&t.close()}),this.$cancelButton&&this.$cancelButton.click(function(e){e.preventDefault();var i=t.cancel(t.$b);t._stopCountDown(),t.onAction("cancel"),(void 0===i||i)&&t.close()}),this.$closeButton&&this.$closeButton.click(function(e){e.preventDefault(),t._stopCountDown(),t.cancel(),t.onAction("close"),t.close()}),this.keyboardEnabled&&setTimeout(function(){e(window).on("keyup."+this._rand,function(e){t.reactOnKey(e)})},500),e(window).on("resize."+this._rand,function(){t.setDialogCenter(!0)})},_getCSS:function(e,t){return{"-webkit-transition-duration":e/1e3+"s","transition-duration":e/1e3+"s","-webkit-transition-timing-function":"cubic-bezier(.36,1.1,.2, "+t+")","transition-timing-function":"cubic-bezier(.36,1.1,.2, "+t+")"}},_imagesLoaded:function(){var t=this;e.each(this.$content.find("img:not(.loaded)"),function(i,n){var s=setInterval(function(){"0px"!==e(n).css("height")&&(e(n).addClass("loaded"),t.setDialogCenter(),clearInterval(s))},40)})},_setButtons:function(){this.$btnc=this.$el.find(".buttons"),this.confirmButton&&""!==e.trim(this.confirmButton)&&(this.$confirmButton=e('<button type="button" class="btn">'+this.confirmButton+"</button>").appendTo(this.$btnc).addClass(this.confirmButtonClass)),this.cancelButton&&""!==e.trim(this.cancelButton)&&(this.buttonsReverse?this.$cancelButton=e('<button type="button" class="btn">'+this.cancelButton+"</button>").prependTo(this.$btnc).addClass(this.cancelButtonClass):this.$cancelButton=e('<button type="button" class="btn">'+this.cancelButton+"</button>").appendTo(this.$btnc).addClass(this.cancelButtonClass)),this.buttonOther&&""!==e.trim(this.buttonOther)&&e(this.buttonOther).prependTo(this.$btnc),this.confirmButton||this.cancelButton||this.$btnc.hide(),this.confirmButton||this.cancelButton||null!==this.closeIcon||(this.$closeButton=this.$b.find(".closeIcon").show()),this.closeIcon===!0&&(this.$closeButton=this.$b.find(".closeIcon").show())},setTitle:function(e){this.title=void 0!==e?e:this.title,this.$title.html(this.title||"")},setIcon:function(e){this.title="undefined"!=typeof string?e:this.title,this.$icon.html(this.icon?'<i class="'+this.icon+'"></i>':"")},setContent:function(e){this.content=void 0===e?this.content:e,""==this.content?(this.$content.html(this.content),this.$contentPane.hide()):(this.$content.html(this.content),this.$contentPane.show()),this.$content.hasClass("loading")&&(this.$content.removeClass("loading"),this.$btnc.find("button").prop("disabled",!1))},_getContent:function(t){var i=this;if(t=t?t:this.content,this._isAjax=!1,this.content)if("string"==typeof this.content)if("url:"===this.content.substr(0,4).toLowerCase()){this._isAjax=!0,this.$content.addClass("loading"),this.$btnc.find("button").prop("disabled",!0);var n=this.content.substring(4,this.content.length);e.get(n).done(function(e){i.content=e,i._contentReady.resolve()}).always(function(e,t,n){"function"==typeof i.contentLoaded&&i.contentLoaded(e,t,n)})}else this.setContent(this.content),this._contentReady.reject();else if("function"==typeof this.content){this.$content.addClass("loading"),this.$btnc.find("button").attr("disabled","disabled");var s=this.content(this);"object"!=typeof s?console.error("The content function must return jquery promise."):"function"!=typeof s.always?console.error("The object returned is not a jquery promise."):(this._isAjax=!0,s.always(function(e,t){i._contentReady.resolve()}))}else console.error("Invalid option for property content, passed: "+typeof this.content);else this.content="",this.setContent(this.content),this._contentReady.reject();this.setDialogCenter()},_stopCountDown:function(){clearInterval(this.timerInterval),this.$cd&&this.$cd.remove()},_startCountDown:function(){var t=this.autoClose.split("|");if(/cancel/.test(t[0])&&"alert"===this.type)return!1;if(/confirm|cancel/.test(t[0])){this.$cd=e('<span class="countdown"></span>').appendTo(this["$"+t[0]+"Button"]);var i=this;i.$cd.parent().click();var n=t[1]/1e3;this.timerInterval=setInterval(function(){i.$cd.html(" ("+(n-=1)+")"),0===n&&(i.$cd.html(""),i.$cd.parent().trigger("click"),clearInterval(i.timerInterval))},1e3)}else console.error("Invalid option "+t[0]+", must be confirm/cancel")},reactOnKey:function t(i){var n=e(".jconfirm");if(n.eq(n.length-1)[0]!==this.$el[0])return!1;var t=i.which;if(this.contentDiv.find(":input").is(":focus")&&/13|32/.test(t))return!1;e.inArray(t,this.cancelKeys)!==-1&&(this.$cancelButton?this.$cancelButton.click():this.close()),e.inArray(t,this.confirmKeys)!==-1&&this.$confirmButton&&this.$confirmButton.click()},setDialogCenter:function(){if("none"==this.$contentPane.css("display"))var t=0,i=0;else{var t=this.$content.outerHeight(),i=this.$contentPane.height();0==i&&(i=t)}var n=this.$content.outerWidth();this.$content.css({clip:"rect(0px "+(100+n)+"px "+t+"px -100px)"}),this.$contentPane.css({height:t});var s=e(window).height(),o=this.$b.outerHeight()-i+t,a=(s-o)/2;if(o>s-100){var r={"margin-top":50,"margin-bottom":50};e("body").addClass("jconfirm-noscroll")}else{var r={"margin-top":a};e("body").removeClass("jconfirm-noscroll")}this.$b.css(r)},close:function(){var t=this;if(this.isClosed())return!1;"function"==typeof this.onClose&&this.onClose(),this._unwatchContent(),t._lastFocused.focus(),e(window).unbind("resize."+this._rand),this.keyboardEnabled&&e(window).unbind("keyup."+this._rand),t.$el.find(".jconfirm-bg").removeClass("seen"),e("body").removeClass("jconfirm-noscroll"),this.$b.addClass(this.closeAnimation);var i="anim-none"==this.closeAnimation?0:this.animationSpeed;return setTimeout(function(){t.$el.remove()},25*i/100),jconfirm.record.closed+=1,jconfirm.record.currentlyOpen-=1,!0},open:function(){var e=this;if(this.isClosed())return!1;e.$el.find(".jconfirm-bg").addClass("seen"),this.$b.removeClass(this.animation),this.$b.find("input[autofocus]:visible:first").focus(),jconfirm.record.opened+=1,jconfirm.record.currentlyOpen+=1,"function"==typeof this.onOpen&&this.onOpen();var t="jconfirm-box"+this._rand;return this.$b.attr("aria-labelledby",t).attr("tabindex",-1).focus(),this.$title?this.$title.attr("id",t):this.$content&&this.$content.attr("id",t),setTimeout(function(){e.$b.css({"transition-property":e.$b.css("transition-property")+", margin"}),e._modalReady.resolve()},this.animationSpeed),!0},isClosed:function(){return""===this.$el.css("display")}},jconfirm.pluginDefaults={template:'<div class="jconfirm"><div class="jconfirm-bg"></div><div class="jconfirm-scrollpane"><div class="container"><div class="row"><div class="jconfirm-box-container"><div class="jconfirm-box" role="dialog" aria-labelledby="labelled" tabindex="-1"><div class="closeIcon">&times;</div><div class="title-c"><span class="icon-c"></span><span class="title"></span></div><div class="content-pane"><div class="content"></div></div><div class="buttons"></div><div class="jquery-clear"></div></div></div></div></div></div></div>',title:"提示",content:"确定吗",contentLoaded:function(){},icon:"",opacity:null,confirmButton:"确定",cancelButton:"取消",confirmButtonClass:"btn",cancelButtonClass:"btn btn-slight",buttonsReverse:!1,theme:"white",animation:"scale",closeAnimation:"none",animationSpeed:500,animationBounce:1.2,keyboardEnabled:!1,rtl:!1,confirmKeys:[13],cancelKeys:[27],container:"body",confirm:function(){},cancel:function(){},backgroundDismiss:!0,autoClose:!1,closeIcon:null,closeIconClass:!1,watchInterval:100,columnClass:"pop-container",onOpen:function(){},onClose:function(){},onAction:function(){}},jconfirm.record={opened:0,closed:0,currentlyOpen:0}}(jQuery),function(e,t,i){"use strict";var n=(e(t),e(document),!-[1]&&t.XMLHttpRequest,!1),s=function(t){this.settings=e.extend({},s.defaults,t),this.init()};s.defaults={bind:!1,wrapClass:"",content:"请稍等...",title:"提示",onCancel:null,onOpen:null,onConfirm:null,onClose:null,closeText:!0,confirmText:"确定",cancelText:"取消",position:"center",inline:!1,isSelecter:!1,element:null,preKa:"",time:null,lock:!0,closeLayer:!0,opacityLock:!1},s.prototype={init:function(){this.create()},create:function(){var t="",i="",n="",s="",o="",a="",r="";this.settings.type&&(t='<i class="icon-dialog icon-dialog-'+this.settings.type+'"></i>'),this.settings.lock&&(n='<div class="dialog-layer"></div>',this.settings.opacityLock&&(n='<div class="dialog-layer dialog-opacity-layer"></div>')),this.settings.preKa&&(s=this.settings.preKa+"_"),("around"==this.settings.position||this.settings.inline)&&(o='<span class="icon-dialog-arrow"></span>'),this.settings.closeText&&(a='<a href="javascript:;" class="close" ka="'+s+'dialog_close"><i class="icon-close"></i></a>'),(this.settings.confirmText||this.settings.cancelText)&&(r='<div class="dialog-footer"><div class="btns"></div></div>'),i='<div class="dialog-wrap">'+n+'<div class="dialog-container">'+o+'<div class="dialog-title">'+t+'<h3 class="title">'+this.settings.title+"</h3>"+a+'</div><div class="dialog-con">'+this.settings.content+"</div>"+r+"</div></div>",e(".dialog-wrap").length&&!this.settings.inline&&e(".dialog-wrap").remove(),this.settings.inline&&this.settings.element?this.dialog=e(i).appendTo(e(this.settings.element).parent()):this.dialog=e(i).appendTo("body"),(this.settings.onConfirm||this.settings.confirmText)&&this.onConfirm(),(this.settings.onCancel||this.settings.cancelText)&&this.onCancel(),this.settings.wrapClass&&this.dialog.addClass(this.settings.wrapClass),this.settings.type&&this.dialog.addClass("dialog-icons-default"),this.settings.position&&this.position(),this.bindEvent(),e("body").addClass("dialog-open"),e.isFunction(this.settings.onOpen)&&(this.settings.bind?this.settings.onOpen.apply(this,this.dialog):this.settings.onOpen(this.dialog)),this.settings.lock&&this.lock(),e.isNumeric(this.settings.time)&&this.time()},onConfirm:function(){var t=this,i=this.dialog.find(".dialog-footer .btns");e("<span>",{ClASS:"btn btn-sure",text:t.settings.confirmText,ka:t.settings.preKa?t.settings.preKa+"_":"",click:function(){e.isFunction(t.settings.onConfirm)?t.settings.bind?t.settings.onConfirm.apply(t,t.dialog):t.settings.onConfirm(t.dialog):t.close()}}).prependTo(i)},onCancel:function(){var t=this,i=this.dialog.find(".dialog-footer .btns");e("<span>",{ClASS:"btn btn-outline btn-cancel",text:t.settings.cancelText,ka:(t.settings.preKa?t.settings.preKa+"_":"")+"dialog_cancel",click:function(){e.isFunction(t.settings.onCancel)?t.settings.bind?t.settings.onCancel.apply(t,t.dialog):t.settings.onCancel(t.dialog):t.close()}}).prependTo(i)},size:function(){var e=this.dialog.find(".dialog-con");this.dialog.find(".dialog-container");e.css({width:this.settings.width,height:this.settings.height})},position:function(){if(this.settings.element){var i=this,n=i.settings.element,s=i.dialog.find(".dialog-container").outerWidth(),o=e(n).offset(),a=o.left+n.width()/2;a<s&&(a=s/2),i.settings.inline||"around"!=i.settings.position||i.dialog.css({left:a+"px",top:o.top+"px"}),i.settings.inline&&(i.dialog.get(0).getBoundingClientRect().top>330&&t.innerHeight-i.dialog.get(0).getBoundingClientRect().top<280&&i.dialog.addClass("dialog-up-default"),i.settings.isSelecter&&e(document).on("click",function(t){t.target==n.get(0)||t.target.parentNode==n.get(0)||e(t.target).closest(".dialog-selecter-default").length||(i.dialog.closest(".dropdown-wrap").removeClass("dropdown-menu-open"),i.close())}))}},lock:function(){if(!n){var e=this;e.dialog.find(".dialog-container");this.settings.closeLayer&&e.dialog.find(".dialog-layer").on("click",function(){e.close()})}},unLock:function(){this.settings.lock&&n&&(e("html,body").css("overflow","visible"),n=!1)},close:function(){e.isFunction(this.settings.onClose)&&this.settings.onClose(this.dialog),this.dialog.remove(),this.unLock(),e("body").removeClass("dialog-open")},time:function(){var e=this;this.closeTimer=setTimeout(function(){e.close()},this.settings.time)},bindEvent:function(){var e=this;this.dialog.find(".close").on("click",function(){e.close()})}},e.dialog=function(e){return new s(e)}}(jQuery,window),function(e){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var i;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),s=n.length>>>0;if(0===s)return-1;var o=+t||0;if(Math.abs(o)===1/0&&(o=0),o>=s)return-1;for(i=Math.max(o>=0?o:s-Math.abs(o),0);i<s;){if(i in n&&n[i]===e)return i;i++}return-1});var t=function(t,i){var i=i||{};this.selected=[],this.$body=e(document.body),this.$element=e(t),this.option=e.extend({},i),this.init()},i={category:function(){var t=e.Deferred();return e.get("/common/data/industry.json",function(e){t.resolve(e.data)}),t}},n={container:function(){return'<div class="industry-tip"><div class="industry-tip-item fl"></div><span class="fl gray">最多可选3个行业</span><a class="confirm" href="javascript:;">确定</a></div><div class="industry-panel"><div class="data-tips"><div class="spinner spinner-circle"><div class="loader"></div><span>正在加载数据...</span></div></div></div>'},industry:function(t,i){var n="<table>",s=[];i&&e.each(i,function(e,t){s.push(parseInt(t.code,10))});var o=function(t){var i="";return e.each(t,function(e,t){var n=s.indexOf(t.code)>-1?"selected":"";i+='<p><span class="'+n+'" data-code="'+t.code+'">'+t.name+"</span></p>"}),i};return e.each(t,function(e,t){n+="<tr>",n+='<td class="industry-category" data-code="'+t.code+'">'+t.name+"</td>",n+="<td>",n+=o(t.subLevelModelList),n+="</td>",n+="</tr>"}),n+="</table>"}};t.prototype.init=function(){var t=this,i=this.$element;if(i.hasClass("disabled"))return!1;i.off("click").on("click",function(){e(".industry-wrapper").length||t.show()})},t.prototype.toggleSelected=function(){var t=this,i="";t.selected=[],e(".industry-multiple-wrapper .selected").each(function(i,n){t.selected.push({name:e(n).text(),code:e(n).attr("data-code")})}),e.each(t.selected,function(e,t){i+='<p data-code="'+t.code+'"><span class="text">'+t.name+'</span><i class="i-close"></i></p>'}),e(".industry-multiple-wrapper .industry-tip-item").html(i)},t.prototype.show=function(){var t=this,s=t.option.multiple?"industry-multiple-wrapper ":"";t.$dialog=e.dialog({bind:!0,title:"请选择行业类别",content:n.container(),closeText:!0,confirmText:!1,cancelText:!1,inline:!0,wrapClass:s+"industry-wrapper",lock:!0,onOpen:function(s){var o=(new Date).getTime();e(s).on("click.industry","table span",function(){var i={name:e(this).text(),code:e(this).attr("data-code")};t.option.multiple?(t.selected.length<3?e(this).addClass("selected"):e(this).hasClass("selected")||e.toast({type:"warning",content:"最多可选择3个行业"}),t.toggleSelected()):(t.$element.trigger("selected.industry",i),t.$element.data("selected",[i]),t.close())}),e(s).on("click.industry",".industry-tip .i-close",function(){var i=e(this).parent("p").attr("data-code");e(s).find(".selected[data-code="+i+"]").removeClass("selected"),t.toggleSelected()}),e(s).on("click.industry",".industry-tip .confirm",function(){t.$element.data("selected",t.selected),t.selected.length?t.$element.trigger("selected.industry",[t.selected]):t.$element.trigger("selected.industry",[{
name:"不限",code:0}]),t.close()}),i.category().then(function(i){var a=(new Date).getTime()-o,r=a>500?a:500-a;setTimeout(function(){e(s).find(".industry-panel").html(n.industry(i,t.$element.data("selected"))),t.toggleSelected()},r)})},onClose:function(t){e(t).off("click.industry")}})},t.prototype.close=function(){this.$dialog&&this.$dialog.close()};var s=function(i){return this.each(function(){var n=e(this),s=n.data("boss.industry");s||n.data("boss.industry",s=new t(this,i)),"string"==typeof i&&s[i].call(n)})},o=e.fn.industry;e.fn.industry=s,e.fn.industry.Constructor=t,e.fn.industry.noConflict=function(){return e.fn.industry=o,this}}(jQuery),function(e,t,i){"use strict";var n=(e(t),e(document),!1),s=function(t){if("string"==typeof t)var t={content:t};this.settings=e.extend({},s.defaults,t),this.init()};s.defaults={content:"提示",lock:!1,wrapClass:null,type:null,position:"top",parentWrap:"body",time:2300},s.prototype={init:function(){this.create(),this.settings.lock&&this.lock()},create:function(){var t="",i="",n=this;this.settings.type&&(t='<i class="icon-toast-'+this.settings.type+'"></i>'),i='<div id="toast"><div class="toast-con">'+t+this.settings.content+"</div></div>",e("#toast").length&&e("#toast").remove(),this.toast=e(i).appendTo(this.settings.parentWrap),this.settings.wrapClass&&this.toast.addClass(this.settings.wrapClass),this.settings.position&&this.position(),this.time(),this.toast.on("click",function(){n.close()})},position:function(){"top"==this.settings.position&&this.toast.css("top",0),"center"==this.settings.position&&this.toast.css("bottom",0),"bottom"==this.settings.position&&this.toast.css("bottom",0)},lock:function(){n||(e("html,body").css("overflow","hidden"),n=!0)},unLock:function(){this.settings.lock&&n&&(e("html,body").css("overflow","visible"),n=!1)},close:function(){var e=this;e.toast.addClass("slideup"),setTimeout(function(){e.toast.removeClass("slideup").remove()},500),e.unLock()},time:function(){var e=this;this.settings.time&&"loading"!=this.settings.type&&(this.closeTimer=setTimeout(function(){e.close()},this.settings.time))}},e.toast=function(e){new s(e)}}(jQuery,window);var Payment=function(){function e(e){var e=$.extend({article:"",text:"",confirmText:"确定",close:function(){},confirm:function(){}},e),t=function(){var t=this;this.$content.on("click",".success-confirm",function(){t.close(),e.confirm()})};$.confirm({backgroundDismiss:!1,content:a.success(e),confirmButton:!1,cancelButton:!1,buttonsReverse:!0,closeIcon:!1,columnClass:"pop-payment",title:!1,onOpen:t,onClose:e.close,ononfirm:e.confirm})}function t(e,t,i){var n,s=!0,a={orderNo:e.orderNo,detailNo:e.detailNo};e.query&&(a=$.extend(a,e.query));var t=$.extend({success:function(){},fail:function(){}},t),r=function(i){s&&(n.close(),i.ptype=e.data.payType,t.success(i))},l=function(){$(".pop-payment .PaymentCheck").html('<i class="loader-gray-17"></i>正在查询支付结果，请稍后'),o.get.queryStatus(a).then(function(e){if(1!=e.payStatus){$(".pop-payment .PaymentCheck").html('<span class="gray">未支付成功，请您扫码完成支付。</span><a class="PayCheckBtn" href="javascript:">重新查询</a>')}else s=!1,r(e)})},c=function(){o.get.queryStatus(a).then(function(e){1==e.payStatus?(s&&r(e),s=!1):s&&setTimeout(c,3e3)})},d=function(){var e=this.$content;n=this,setTimeout(c,1500),e.on("click",".PayCheckBtn",l)},h=function(){s=!1,t.close&&t.close()},u=function(){};!function(e){$.confirm({content:e,confirmButton:!1,cancelButton:!1,buttonsReverse:!0,closeIcon:!1,columnClass:"pop-payment",title:!1,onOpen:d,onClose:h,confirm:u})}(i)}function i(e,t){var i,r={success:function(){},cancel:function(){},fail:function(){}},t=$.extend(r,t),e=$.extend({recharge:!1},e),l=function(e,t){o.post.purchase(e,t).then(function(o){var a=!!e.condition&&e.condition(o);return 1!=o.rescode?($.toast({type:"error",content:o.resmsg}),!1):a?e.success(o):1==e.data.payType?(i&&i.close(),t.buy&&t.buy({pay:e.amount,orderNo:o.orderNo,balance:e.balance,payType:e.data.payType}),e.success(o)):(e.qrCode=o.qrUrl,e.orderNo=o.orderNo,e.detailNo=o.detailNo,2==e.data.payType?n(e,t):s(e,t),t.buy&&t.buy({pay:e.amount,balance:e.balance,payType:e.data.payType,orderNo:o.orderNo}),void(i&&i.close()))},function(){})},c=function(){var n=this.$content;i=this,n.on("click",".prop-order-type p",function(){n.find(".prop-order-type .selected").removeClass("selected"),$(this).addClass("selected")}),n.on("click",".btn-block",function(){if($(this).hasClass("disabled"))return!1;var i=n.find(".prop-order-type .selected").attr("data-payType");if(e.pay<=e.balance?e.data.payType=1:e.data.payType=i,!e.data.payType)return void $.toast({type:"error",content:"请选择支付方式"});$(this).addClass("disabled"),l(e,t)}),n.on("click",".item-coupon-list span",function(){$(this).hasClass("selected")?$(this).removeClass("selected"):($(".item-coupon-list .selected").removeClass("selected"),$(this).addClass("selected"));var t=$(this).index(),i=e.userCouponList[t];$(this).hasClass("selected")?(e.coupon=i.offBean,e.data.userCouponId=i.encryptId,n.find(".coupon-left").hide(),n.find(".coupon-selected").text("-"+e.coupon+"直豆").show()):(e.coupon=0,e.data.userCouponId="",n.find(".coupon-left").show(),n.find(".coupon-selected").hide());var s=1e3*e.amount,o=1e3*e.coupon;e.pay=s>o?(s-o)/1e3:0,n.find(".pay-amount").text("-"+e.pay+"直豆"),e.pay<=e.balance?n.find(".prop-order-type").hide():n.find(".prop-order-type").show()}),n.on("click",".coupon-left",function(){n.find(".item-coupon").toggleClass("unfold")}),n.on("click",".coupon-selected",function(){n.find(".item-coupon").toggleClass("unfold")}),n.on("click",".bead-close",function(){i.close()})},d=function(){return t.fail()},h=function(){},u=function(e){$.confirm({backgroundDismiss:!1,content:e,confirmButton:!1,cancelButton:!1,buttonsReverse:!0,closeIcon:!1,columnClass:"pop-payment",title:!1,onOpen:c,onClose:d,confirm:h})};if($(".pop-payment").length)return!1;if(e.recharge)u(a.recharge(e));else{var p=e.itemId||"",f=$.extend(e.data,{itemId:p}),m=e.prePayUrl||"";o.get.detail(f,m).then(function(i){var n=i.data,s=parseInt(n.remainBean,10),o={couponId:"",itemIcon:n.itemIcon,balance:s,amount:n.payBean,pay:n.payBean,userCouponList:n.userCouponList,description:n.itemDesc?n.itemDesc:e.description},r=n.userCouponList.filter(function(e){return e.selected});e=$.extend(e,o),r.length?(e.coupon=r[0].offBean,e.pay=e.pay>e.coupon?e.pay-e.coupon:0,e.data.userCouponId=r[0].encryptId):e.coupon=0,e.amount<=s&&(e.data.payType=1),0==e.amount?l(e,t):u(a.purchase(e))})}}function n(e,i){var n={type:"wx",name:"微信支付",pay:e.recharge?e.pay:e.pay-e.balance,qrCode:e.qrCode};t(e,i,a.pay(n)),__conversion("payment_wx")}function s(e,i){var n={type:"zfb",name:"支付宝",pay:e.recharge?e.pay:e.pay-e.balance,qrCode:e.qrCode};t(e,i,a.pay(n)),__conversion("payment_zfb")}var o={},a={};return o.get={},o.post={},o.get.detail=function(e,t){var i=$.Deferred(),n="/boss/item/prepay.json";return e.priceId&&(n="/boss/block/prepay.json"),t&&(n=t),$.get(n,e).success(function(e){if(1011==e.code)return window.location.href="/user/login.html?ka=header-login",!1;1==e.rescode?i.resolve(e):$.toast({type:"error",content:e.resmsg})}),i},o.get.queryStatus=function(e){var t=$.Deferred();return $.ajax({method:"get",url:"/boss/item/orderquery.json",data:e,cache:!1,success:function(e){1==e.rescode?t.resolve(e):$.toast({type:"error",content:e.resmsg})}}),t},o.post.purchase=function(e,t){var i=$.Deferred();return $.ajax({method:"post",url:e.url,data:e.data,cache:!1,success:function(e){if(1!=e.rescode)return $.toast({type:"error",content:e.resmsg}),i.reject(e),t.fail();i.resolve(e)},error:function(){return t.fail()}}),i},a.pay=function(e){return Utemplate('<div class="mb-payment"><p class="mb-payment-title"><img src="/v2/web/boss/images/icon-shield.png" />安全支付</p><div class="mb-pay-info"><i class="icon-<%this.type%>"></i><%this.name%><i class="currency">￥</i><i class="amount"><%this.pay%></i></div><div class="qr-code"><img src="<%this.qrCode%>" /></div><div class="mb-payment-result PaymentCheck"><span class="gray">使用<%this.name%>扫码支付</span><a class="PayCheckBtn" href="javascript:">我已支付</a></div></div>',e)},a.purchase=function(e){return Utemplate('<div class="mb-payment"><p class="mb-payment-title"><img src="/v2/web/boss/images/icon-shield.png" />确认支付<i class="bead-close"></i></p><dl class="order-detail"><dt><img src="<%this.itemIcon%>"><span class="item-name"><%this.description%></span><span class="fr"><%this.amount%>直豆</span></dt><%if (0 < this.userCouponList.length) {%><dd class="item-coupon <%if(0 < this.coupon){%>unfold<%}%>"><p>优惠券<span class="fr coupon-selected" <%if(0 < this.coupon){%>style="display: block;"<%}%>>-<%this.coupon%>直豆</span><span class="fr coupon-left" <%if(0 < this.coupon){%>style="display: none;"<%}%>><%this.userCouponList.length%>张可用</span></p><div class="item-coupon-list"><%for(var i=0;i<this.userCouponList.length;i++){%><span data-id="<%this.userCouponList[i].encryptId%>" <%if(this.userCouponList[i].selected){%>class="selected"<%}%>>减<%this.userCouponList[i].offBean%>直豆</span><%}%></div></dd><%}%><dd>直豆余额<span class="fr"><%this.balance%>直豆</span></dd><dd>支付总额<span class="fr pay-amount">-<%this.pay%>直豆</span></dd></dl><div class="prop-order"><div class="prop-order-type" <%if(this.pay <= this.balance){%>style="display: none;"<%}%>> <div class="prop-type-article">直豆余额不足，请选择支付方式：</div> <p class="fl payment-wx" data-type="wx" data-payType="2"><i class="icon-wx"></i>微信支付</p> <p class="fr payment-zfb" data-type="zfb" data-payType="3"><i class="icon-zfb"></i>支付宝</p> </div><div class="prop-buttons"><button class="btn btn-block">立即支付</button></div></div></div>',e)},a.recharge=function(e){return Utemplate('<div class="mb-payment"><p class="mb-payment-title"><img src="/v2/web/boss/images/icon-shield.png" />确认支付<i class="bead-close"></i></p><dl class="order-detail"><dt><img src="/v2/web/boss/images/prop/icon-bean.png" /><span class="item-name"><%this.description%></span><span class="fr"><%this.amount%>直豆</span></dt><dd>支付金额<span class="fr pay-amount">￥<%this.pay%></span></dd></dl><div class="prop-order"><div class="prop-order-type"> <div class="prop-type-article">请选择支付方式：</div> <p class="fl payment-wx" data-type="wx" data-payType="2"><i class="icon-wx"></i>微信支付</p> <p class="fr payment-zfb" data-type="zfb" data-payType="3"><i class="icon-zfb"></i>支付宝</p> </div><div class="prop-buttons"><button class="btn btn-block">立即支付</button></div></div></div>',e)},a.success=function(e){return Utemplate('<div class="mb-payment"><p class="mb-payment-title"><img src="/v2/web/boss/images/icon-shield.png" />安全支付</p><div class="pay-info-text"><img src="/v2/web/boss/images/layer/succ.png" /><p class="article"><%this.article%></p><p class="text gray"><%this.text%></p><a href="javascript:" class="success-confirm btn"><%this.confirmText%></a></div></div>',e)},{wx:n,zfb:s,success:e,purchase:i,balance:o.get.balance}}(),Purchase=function(){function e(e,t,i){Payment.success({article:e||"购买成功",text:t||"",confirm:function(){i.confirm&&i.confirm()},close:function(){i.close&&i.close()}})}function t(t,i,n){var s=n.action?n.action:"发布",o={ordinary:{1:"火爆职位普通版"+s+"成功！可保持职位在线<%this.description%>，期间每日查看牛人上限<%this.view%>，开聊上限<%this.employ%>。",2:"",3:"火爆职位普通版"+n.action+"成功！可保持职位在线<%this.description%>，期间每日查看牛人上限<%this.view%>，开聊上限<%this.employ%>。",4:"已成功升级至火爆职位畅聊版！当前剩余有效期<%this.restDays%>天，期间每日查看牛人<%this.view%>，开聊<%this.employ%>。"},carefree:{1:"火爆职位畅聊版发布成功！可保持职位在线<%this.description%>，期间每日查看牛人<%this.view%>，开聊牛人<%this.employ%>。",2:"",3:"火爆职位畅聊版"+n.action+"成功！可保持职位在线<%this.description%>，期间每日查看牛人<%this.view%>，开聊牛人<%this.employ%>。",4:"已成功升级至火爆职位畅聊版！当前剩余有效期<%this.restDays%>天，期间每日查看牛人<%this.view%>，开聊<%this.employ%>。"},experience:{1:"火爆职位普通版发布成功！该职位可免费在线<%this.expiredays%>天，为避免影响招聘，请及时延长招聘时长。",2:"火爆职位普通版发布成功！该职位可免费在线<%this.expiredays%>天，为避免影响招聘，请及时延长招聘时长。",3:"火爆职位普通版发布成功！该职位可免费在线<%this.expiredays%>天，为避免影响招聘，请及时延长招聘时长。",4:"火爆职位普通版发布成功！该职位可免费在线<%this.expiredays%>天，为避免影响招聘，请及时延长招聘时长。",5:"火爆职位普通版发布成功！该职位可免费在线<%this.expiredays%>天，为避免影响招聘，请及时延长招聘时长。"}},a={ordinary:{1:"火爆职位-普通版",2:"",3:"火爆职位-普通版",4:"火爆职位-普通版"},carefree:{1:"火爆职位-畅聊版",2:"",3:"火爆职位-畅聊版",4:"火爆职位-畅聊版"},experience:{1:"火爆职位",2:"",3:"",4:"",5:"火爆职位"}},r={0:{1:"block_sendjob_purchase_hot_",2:"block_extendjob_purchase_hot_",3:"block_openjob_purchase_hot_",4:"block_upgradejob_purchase_hot_"},1:{1:"block_sendjob_purchase_super_",2:"block_extendjob_purchase_super_",3:"block_openjob_purchase_super_",4:"block_upgradejob_purchase_super_"}};try{var l=r[i.hotJobType][i.action]+i.priceId;_T.sendEvent(l)}catch(e){}var s=n.item.type||"ordinary",c=Utemplate(o[s][i.action],n.item),d=a[s][i.action],h=n.action?n.action+"成功":"发布成功",u=function(t){e(h,c,n),"function"==typeof n.success&&n.success(t)},p={url:t,data:i,description:d,amount:n.item.pay,success:u},f={success:function(e){var t={1:"bean",2:"wx",3:"zfb"};window.top.__conversion(r[i.hotJobType][i.action]+t[e.ptype]+"_"+i.priceId),u(e)}};Payment.purchase(p,f)}return{vip:function(e,t){var i=t||{},n=function(){$.toast({type:"success",content:"您已成功购买VIP账号，可在VIP权益页面查看使用明细"}),i.success&&i.success()},s={url:"/boss/item/pay/vipaccount.json",data:e,description:"购买道具：「VIP账号」- 1个月",amount:parseInt(e.amount,10),success:n},o={success:n};Payment.purchase(s,o)},position:t,commercial:function(t,i){var n=11==i.item.business?"普通职位":"火爆职位",s={1:"免费试用火爆职位",2:n+"-<%this.priceName%>",3:"升级VIP账号",4:"购买聊天加油包"},o={1:"火爆职位发布成功！该职位可<%this.title%>，为避免影响招聘，请及时延长招聘时长。",2:n+"<%this.priceName%>发布成功！可保持职位在线一个月，期间可<%this.descList[1].bottomDesc%>牛人<%this.descList[1].count%><%this.descList[1].unitDesc%>，<%this.descList[0].bottomDesc%><%this.descList[0].count%><%this.descList[0].unitDesc%>。",3:"您已成功购买VIP账号，可在VIP权益页面查看使用明细",4:"您已成功购买「聊天加油包」，<%this.inDate%>内，每日主动沟通人数<%this.chat%>，赠送主动查看人数<%this.view%>。"};4==i.item.cardId&&(i.item.chat=i.item.chatDescList[0],i.item.inDate=i.item.chatDescList[1],i.item.view="+"+2*parseInt(i.item.chat,10)+"次");var a=i.item,r=a.cardId,l=Utemplate(s[r],a),c=Utemplate(o[r],a),d=function(){var t=function(){};i.success?t=i.success:i.confirm&&(t=i.confirm),e(l,c,{confirm:t,close:t})},h={url:"/boss/block/pay.json",data:t,tid:a.p||"",description:l,amount:parseInt(a.beanCount,10),success:d},u={buy:function(e){var t={action:"confirm-payment",p:"",p2:a.beanCount,p3:e.balance,p4:e.pay,p5:e.pay};Block.action(t)},success:d};Payment.purchase(h,u)}}}();!function(e){"use strict";var t=function(t,i){this.$body=e(document.body),this.$element=e(t),this.page=1,this.isShowBefore="false"!==this.$element.attr("isShowBefore"),this.isShowNow="false"!==this.$element.attr("isShowNow"),this.isShowToday="false"!==this.$element.attr("isShowToday"),this.order=this.$element.attr("order")||"desc",this.init()};t.prototype.init=function(){if(!this.$element.hasClass("disabled")){var t=this;this.dates=this.date(),t.render(),t.$wrap.on("click",".year",function(){t.selectYear(e(this))}),t.$wrap.on("click",".month",function(){t.selectMonth(e(this))}),t.$wrap.on("click",".prev",function(e){t.prev(),e.stopPropagation()}),t.$wrap.on("click",".next",function(e){t.next(),e.stopPropagation()}),this.$element.on("click",function(){t.$wrap.is(":visible")?t.hide():t.show()}),e(document).on("click.workStart",function(e){!t.$wrap.is(":visible")||t.$wrap[0].contains(e.target)||t.$element[0].contains(e.target)||t.hide()})}},t.prototype.getFill=function(){var t;return t=this.$element.attr("data-fill")?e("input[name="+this.$element.attr("data-fill")+"]").val().split("-"):this.$element.val().split("-"),{year:t.length?t[0]:"",month:t.length>1?t[1]:""}},t.prototype.render=function(){this.$wrap=e('<div class="workstartpicker-wrap"><div class="year-wrap"></div><div class="month-wrap"></div></div>');var t=this.template();this.$wrap.find(".year-wrap").html(t),e("body").append(this.$wrap)},t.prototype.date=function(){var e=parseInt(this.$element.attr("data-min"),10),t=parseInt(this.$element.attr("data-max"),10),i=[];if(this.isShowBefore&&i.push({name:e+"前",value:e-1}),"desc"===this.order)for(var n=e;n<=t;n++)i.push({name:n,value:n,hasChild:!0});else for(var n=e;n<=t;n++)i.unshift({name:n,value:n,hasChild:!0});return this.isShowNow&&i.push({name:"应届生",value:0}),i.reverse(),i},t.prototype.template=function(){for(var e=12*(this.page-1),t=12*this.page,i=this.dates.slice(e,t),n="desc"===this.order?i[i.length-1].name+" - "+i[0].name:i[0].name+" - "+i[i.length-1].name,s=this.getFill().year,o='<div class="title"><i class="prev"></i><i class="next"></i><p class="text">'+n+'</p></div><div class="content"><ul>',a=0;a<i.length;a++){o+='<li class="year '+(s==i[a].value?"selected":"")+'" data-val="'+i[a].value+'">'+i[a].name+"</li>"}return o+="</ul></div>"},t.prototype.month=function(e){for(var t=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],i='<div class="title"><p class="text">'+e+'</p></div><div class="content"><ul>',n=this.getFill(),s=0;s<12;s++){i+='<li class="month '+(n.year==e&&parseInt(n.month,10)==s+1?"selected":"")+'">'+t[s]+"</li>"}return i+="</ul></div>"},t.prototype.prev=function(){if(this.page>1){this.page--;var e=this.template();this.$wrap.find(".year-wrap").html(e)}},t.prototype.next=function(){var e=Math.ceil(this.dates.length/12);if(this.page<e){this.page++;var t=this.template();this.$wrap.find(".year-wrap").html(t)}},t.prototype.selectMonth=function(e){var t=this.$wrap.find(".month-wrap .text").text(),i=e.index()>9?e.index()+1:"0"+(e.index()+1);this.fill(t,i)},t.prototype.selectYear=function(e){var t=e.attr("data-val"),i=this.dates.filter(function(e){return e.value==t});if(i[0]&&i[0].hasChild){var n=this.month(t);this.$wrap.find(".month-wrap").html(n),this.$wrap.addClass("month-panel")}else this.fill(t)},t.prototype.fill=function(t,i){var t=this.dates.filter(function(e){return e.value==t})[0],n=t.value,s=t.name,o=this.$element.attr("data-fill"),a=e("input[name="+o+"]");i&&(n+="-"+i,s+="-"+i),this.$element.val(s),a&&a.val(n),this.hide()},t.prototype.show=function(){var e=this.$element.offset();this.$wrap.css({left:e.left+"px",top:this.$element.outerHeight()+e.top+"px"});var t=this.getFill();this.$wrap.find(".selected").removeClass("selected"),""!==t.year&&this.$wrap.find(".year-wrap li[data-val="+t.year+"]").addClass("selected"),this.$wrap.show()},t.prototype.hide=function(){this.$wrap.hide(),this.$wrap.removeClass("month-panel")};var i=function(i){return this.each(function(){var n=e(this),s=n.data("boss.date");s||n.data("boss.date",s=new t(this,i)),"string"==typeof i&&s[i].call(n)})},n=e.fn.workstartpicker;e.fn.workstartpicker=i,e.fn.workstartpicker.Constructor=t,e.fn.workstartpicker.noConflict=function(){return e.fn.chosen=n,this}}(jQuery),function(e,t,n,s){var o=function(t,i){var n=this;n.$element=t,n.defaults={width:840,height:256,start:1,speed:400,interval:3e3,autoPlay:!1,dotShow:!0,navShow:!0,arrShow:!0,touch:!0,effect:"slide",fadeOut:!0,afterSlider:function(){}},n.clickable=!0,n.options=e.extend({},n.defaults,i)};o.prototype={init:function(){var n=this,s=n.$element,o=s.children("ul"),a=o.children("li"),r=a.length,l=n.options.start,c=0,d=0;if(n.options.arrShow){s.append('<a href="javascript:;" class="btn-direction btn-prev prev"></a><a href="javascript:;" class="btn-direction btn-next next"></a>')}for(i=1;i<=r;i++)l==i&&a.eq(l-1).addClass("cur");if(n.options.dotShow){var h="";for(i=1;i<=r;i++)l==i?h+='<i data-index="'+i+'" class="cur"></i>':h+='<i data-index="'+i+'"></i>';var u='<div class="slider-dot">'+h+"</div>";s.append(u)}var p=function(){var e=s.width(),t=n.options.height/n.options.width*e;s.css("height",t)};if(s.css("height",n.options.height),p(),e(t).resize(function(){p()}),n.options.arrShow&&(s.find(".next").on("click",function(e){e.preventDefault(),n.clickable&&(l>=r?l=1:l+=1,n.moveTo(l,"next"))}),s.find(".prev").on("click",function(e){e.preventDefault(),n.clickable&&(1==l?l=r:l-=1,n.moveTo(l,"prev"))})),n.options.dotShow&&s.find(".slider-dot i").on("mouseover",function(t){if(t.preventDefault(),n.clickable){var i=e(this).data("index");dir=i>l?"next":"prev",i!=l&&(l=i,n.moveTo(l,dir))}}),n.options.navShow&&s.parent().find(".slider-nav a").on("mouseover",function(t){if(t.preventDefault(),n.clickable){var i=e(this).data("index");dir=i>l?"next":"prev",i!=l&&(l=i,n.moveTo(l,dir))}}),n.options.autoPlay){var f,m=function(){l++,l>r&&(l=1),n.moveTo(l,"next")};f=setInterval(m,n.options.interval),s.hover(function(){f=clearInterval(f)},function(){f=setInterval(m,n.options.interval)})}n.options.touch&&a.on({touchstart:function(e){c=e.originalEvent.touches[0].clientY,d=e.originalEvent.touches[0].clientX},touchend:function(e){var t=e.originalEvent.changedTouches[0].clientY,i=e.originalEvent.changedTouches[0].clientX,s=c-t,o=d-i;Math.abs(o)>Math.abs(s)&&(o>5?(l>=r?l=1:l+=1,n.moveTo(l,"next")):(1==l?l=r:l-=1,n.moveTo(l,"prev"))),c=null,d=null},touchmove:function(e){e.preventDefault&&e.preventDefault()}})},moveTo:function(t,i){var n=this,s=n.$element,o=n.clickable,a=s.find(".slider-dot i"),r=s.parent().find(".slider-nav a"),l=s.children("ul"),c=l.children("li");if(!o)return!1;if(n.clickable=!1,"fade"==n.options.effect)1==n.options.fadeOut?l.children(".cur").fadeOut(function(){e(this).removeClass("cur")}):l.children(".cur").hide().removeClass("cur"),c.eq(t-1).fadeIn(function(){e(this).addClass("cur"),n.clickable=!0});else{var d=s.width();"prev"==i&&(d*=-1),l.children(".cur").stop().animate({left:-d},n.options.speed,function(){e(this).removeClass("cur")}),c.eq(t-1).css("left",d+"px").addClass("cur").stop().animate({left:0},n.options.speed,function(){n.clickable=!0})}n.options.afterSlider.call(n),a.removeClass("cur"),a.eq(t-1).addClass("cur"),r.removeClass("cur"),r.eq(t-1).addClass("cur")}},e.fn.hwSlider=function(e){var t=new o(this,e);return this.each(function(){t.init()})}}(jQuery,window,document);var PlaceholderCheck={init:function(e){if(!placeholderSupport()){var t;t=e?e.find("[placeholder]"):$("[placeholder]"),t.focus(function(){var e=$(this);e.val()==e.attr("placeholder")&&(e.val(""),e.removeClass("placeholder"))}).blur(function(){var e=$(this);""!=e.val()&&e.val()!=e.attr("placeholder")||(e.addClass("placeholder"),e.val(e.attr("placeholder")))}).blur()}}};$(function(){PlaceholderCheck.init()});var Storage={get:function(e){var t=this._getStorage(),i="";if(t)return(i=t.getItem(e))&&JSON.parse(i)},set:function(e,t){var i=this._getStorage();e&&void 0!==t&&i.setItem(e,JSON.stringify(t))},del:function(e,t){var i=this._getStorage();if(i)if(e&&t)for(var e in i)0===e.indexOf(prefix)&&i.removeItem(e);else e?i.removeItem(e):i.clear()},_getStorage:function(){var e;try{e=window.localStorage}catch(e){}return e}},Report={init:function(){Report.uploadCount=0,Report.setContent()},setContent:function(){var e=function(e){e.remove(),Report.uploadCount--};$("body").on("click",".icon-report,.link-report",function(){var t=$(this).attr("data-uid")||"",i=$(this).attr("data-expect")||"";$.get("/user/report/form.json",function(n){n.rescode?$.dialog({content:n.html,title:"举报",cancelButton:"取消",confirmButton:"确认",wrapClass:"pop-report",onOpen:function(t){"FormsUI"in window&&FormsUI.dropSelect(t),"DropDown"in window&&DropDown.init(t),t.find(".verify-box img").on("click",function(){$(this).attr("src","/captcha/?randomKey="+$(this).siblings(".randomkey").val()+"&_r="+(new Date).getTime())}),t.find("#fileupload").on("click",function(e){$(this).next(".verify-box")?Report.checkForm($(".verify-box"))?Report.uploadPictures($(this),t):e.preventDefault():Report.uploadPictures($(this),t)}),t.on("click",".link-close",function(){e($(this).parents("li"))})},onConfirm:function(e){return Report.submitForm(e,t,i)}}):1011==n.code&&void 0!==Detail?Detail.showSign(1011):$.toast({content:n.resmsg,type:"error"})})})},uploadPictures:function(e,t){var i=/(\.|\/)(png|jpg|jpeg)$/i,e=e,n=e.siblings(".preview"),s=e.closest(".upload"),o=t.find(".verify-box .ipt");$("#fileupload").fileupload({type:"POST",url:"/faqfeedback/pc/upload/picture.json",dataType:"json",acceptFileTypes:i,maxFileSize:3e6,add:function(e,n){var o=n.files[0],a=o.name;i.test(a)?o.size>3e6?alert("请上传3M以内的文件"):Report.uploadCount>=6?t.find(".preview").siblings(".text-error").html("最多可以上传6张照片"):(t.find(".preview").siblings(".text-error").html(""),s.find("a").html('上传图片<i class="icon-toast-loading"></i>'),n.formData={randomKey:t.find(".randomkey").val()||"",captcha:t.find(".verify-box input").val()||""},n.submit()):alert("请上传png、jpg、jpeg 格式的文件")},done:function(e,i){var a=i.result;a.rescode?(Report.uploadCount++,setTimeout(function(){n.find("ul").append('<li><img src="'+a.url[0]+'" data-img="'+a.url[1]+'"/><i class="link-close"></i></li>'),t.addClass("upload-complate"),s.find("a").html("上传图片")},500),t.addClass("upload-complate")):(s.find("a").html("上传图片"),$.toast({content:a.resmsg,type:"error"}),"验证码错误"==a.resmsg&&(o.val("").focus(),t.find(".verify-box img").click()))},error:function(e,t){s.find("a").html("上传图片"),$.toast({content:"上传失败",type:"error"})}})},submitForm:function(e,t,i){var n=e,s=$.trim(n.find("textarea").val()),o=!1,a=this,r="",l="",c="";if(n.find(".ipt-wrap").each(function(){return o=a.checkForm($(this)),a.checkForm($(this))}),o&&!n.find(".preview img").length)return e.find(".preview").siblings(".text-error").html("请上传照片！"),!1;n.find(".preview img").each(function(){r+=$(this).attr("data-img")+","}),r=r.substring(0,r.length-1),""!=t?(l=t,c=i):"_reportData"in window?(l=_reportData.reportedId,c=_reportData.targetId):(l=Chat.curUserData.uid,c=Chat.curUserData.infoData.expectId);var d={reportedId:l,reasonCode:$('input[name="reasonCode"]').val(),content:s,targetId:c,imgUrl:r||"",randomKey:n.find(".randomkey").val(),captcha:$(".verify-box input").val()};return o&&(o=!1,$.ajax({url:"/user/report/save.json",type:"POST",data:d,dataType:"JSON",timeout:3e4,success:function(t){t.rescode?($.toast({content:"发送成功，感谢您的反馈 ：）",type:"success"}),Report.uploadCount=0,e.remove()):($.toast({content:t.resmsg,type:"error"}),"验证码错误"==t.resmsg&&(n.find(".verify-box .ipt").val("").focus(),n.find(".verify-box img").click()))},error:function(e){}})),!1},checkForm:function(e){var t,i=e.find(".ipt").val();if(void 0!=e.find(".ipt").attr("data-range")){if(t=e.find(".ipt").attr("data-range").split(",")[1],i.length>t)return e.next(".text-error").html("请输入"+t+"个字以内的内容"),!1;e.next(".text-error").html("")}if(""==i){var n=e.find(".ipt").attr("data-blank");return e.find(".ipt").focus(),e.next(".text-error").html(n),!1}return e.next(".text-error").html(""),!0}};$(function(){Report.init()}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=[],s=arguments.length>=2?arguments[1]:void 0,o=0;o<i;o++)if(o in t){var a=t[o];e.call(s,a,o,t)&&n.push(a)}return n});var EventBus=new EventManger;$(function(){function e(){var e=arguments;a<=o-1&&(s.eq(a).stop(!0).animate({width:"300px"},500).siblings().stop(!0).animate({width:"98px"},500),++a==o&&(a=0)),n=setTimeout(e.callee,5e3)}function t(){var e=(r.offset().top,$(window).scrollTop(),$("body").outerHeight(),d.height(),$(window).height()-($("#footer").offset().top-$(document).scrollTop()));e>0?l.css("bottom",e):l.css("bottom",0)}function i(e){e.find("img").each(function(e,t){""==$(this).attr("src")&&$(this).attr("src",$(this).attr("data-src"))})}if($.fn.hoverDelay=function(e){var t,i,n={hoverDuring:200,outDuring:200,hoverEvent:function(){$.noop()},outEvent:function(){$.noop()}},s=$.extend(n,e||{});return $(this).each(function(){$(this).hover(function(){clearTimeout(i),t=setTimeout(s.hoverEvent,s.hoverDuring)},function(){clearTimeout(t),i=setTimeout(s.outEvent,s.outDuring)})})},$(".home-box .slider-main").length&&($(".home-box .slider-main").hwSlider({autoPlay:!0,arrShow:!0,dotShow:!0,navShow:!0,touch:!0,height:240,interval:5e3,effect:"fade"}),$(".slider-box .pic-all").length)){var n,s=$(".slider-box .pic-all a"),o=s.length,a=0;s.hover(function(){clearTimeout(n),300!=$(this).width()&&$(this).stop(!0).animate({width:"300px"},500).siblings().stop(!0).animate({width:"98px"},500)},function(){a=$(this).index(),e()}),e()}if($(".semwrap .slider-main").length&&$(".slider-main").hwSlider({autoPlay:!0,arrShow:!0,dotShow:!1,navShow:!0,touch:!0,interval:5e3,width:582,speed:1e3,height:426}),$(".manager-list .manager-inner").length&&$(".manager-list li").length>1&&($(".manager-list h3").css("background","none"),$(".manager-list .manager-inner").hwSlider({autoPlay:!0,arrShow:!1,dotShow:!0,interval:5e3,speed:500,width:330,height:163,navShow:!0,touch:!0,effect:"fade",fadeOut:!1,afterSlider:function(){$(".manager-list .fold-text").removeAttr("style"),$(".manager-list .more-view").removeAttr("style").html('...展开<i class="fz fz-slidedown"></i></a>').show()}})),$(".picture-list .slider-main").length&&$(".picture-list li").length>1&&$(".picture-list .slider-main").hwSlider({autoPlay:!0,arrShow:!0,dotShow:!0,interval:5e3,speed:500,width:330,height:165,navShow:!0,touch:!0}),$(".job-menu dl").each(function(e){var t=$(this);t.hoverDelay({hoverDuring:100,outDuring:100,hoverEvent:function(){switch(t.addClass("cur"),e){case 0:break;case 1:t.children(".menu-sub").css({top:"-42px"});break;case 10:t.children(".menu-sub").css({top:"auto",bottom:"-1px"})}if(0!=e&&1!=e&&10!=e||10==e&&$(".ie7").length){var i=t.get(0).getBoundingClientRect().top,n=t.find(".menu-sub");n.height()<i?n.css({"margin-top":53-n.height()+"px"}):i<70&&i>0?n.css({"margin-top":"-1px"}):i<0?n.css({"margin-top":i+"px"}):n.css({"margin-top":47-i+"px"})}},outEvent:function(){t.removeClass("cur").children(".menu-sub")}})}),$(".show-all").hover(function(){$(".show-all").hide(),$(".all-box").show()},function(){}),$(".job-menu").hover(function(){},function(){$(".show-all").show(),$(".all-box").hide()}),$(".menu-all .sub-tab li").eq(0).css({"border-top-color":"#fff","padding-top":"15px","padding-bottom":"14px"}),$(".menu-all .sub-tab li").eq(1).css({"margin-top":"-1px"}),$(".menu-all .sub-tab li").on("click",function(){var e=$(this).index(),t=$(this).parent().find("li"),i=$(this).closest(".menu-sub").find(".sub-content ul");t.removeClass("cur"),$(this).addClass("cur"),i.removeClass("show"),i.eq(e).addClass("show"),0==e&&$(this).css("border-top-color","#fff"),e==t.length-1?$(this).css({"border-bottom-color":"#fff","margin-top":"-1px","padding-top":"1px"}):t.eq(t.length-1).css({"border-bottom-color":"#FDFDFE","margin-top":"0","padding-top":"0"})}),$(".link-recruit").on("click",function(){$(this).parent().find(".recruit-tip").fadeIn()}),$(".nav-figure").on("mouseover",function(){$(this).find(".dropdown").show(),$(this).find(".recruit-tip").hide()}).on("mouseout",function(){$(this).find(".dropdown").hide(),$(this).find(".recruit-tip").hide()}),$(".condition-insdustry .btn-all").on("click",function(){$(this).parent().toggleClass("show-all-insdustry")}),$(".condition-city .link-district").on("click",function(){$(".condition-district").addClass("show-condition-district"),$(".condition-area").removeClass("show-condition-area"),$(".condition-city .selected").removeClass("selected"),$(this).addClass("selected")}),$(".condition-city .link-area").on("click",function(){$(".condition-area").addClass("show-condition-area"),$(".condition-district").removeClass("show-condition-district"),$(".condition-city .selected").removeClass("selected"),$(this).addClass("selected")}),$(".siderbar-top").on("click",function(){$("html,body").animate({scrollTop:"0px"},400)}),$(window).on("scroll",function(){$(this).scrollTop()>600?$("#siderbar").fadeIn():$("#siderbar").hide()}),$(".company-job .job-list").on("click","li a",function(e){if($(this).attr("data-lid")){e.stopPropagation(),e.preventDefault();var t=$(this),i=t.attr("href"),n=t.attr("ka"),s=t.attr("data-lid");t.wrap('<form action="'+i+'" method="get" target="_blank"></form>'),t.append('<input type="hidden" name="ka" value="'+n+'_blank" />'),t.append('<input type="hidden" name="lid" value="'+s+'" />'),t.closest("form").submit(),t.find('input[name="ka"]').remove(),t.unwrap("form")}}),($(".home-box").length||$(".condition-box").length)&&($(".job-list").on("click","li .info-primary a",function(e){e.preventDefault()}),
$(".job-list").on("click","li",function(e){var t=$(this),i=t.find(".info-primary a"),n=i.attr("href"),s=$(".job-tab"),o=s.attr("data-keyword"),a=s.attr("data-l3code"),r=s.attr("data-filter"),l=s.attr("data-rescount"),c=s.attr("data-page"),d=i.attr("data-index"),h=i.attr("data-lid"),u=i.attr("data-itemid"),p=s.attr("data-lid"),f=i.attr("data-jobid");if("A"!=e.target.nodeName&&0===$(e.target).parents(".detail-top-right").length){t.wrap('<form action="'+n+'" method="get" target="_blank"></form>'),t.append('<input type="hidden" name="ka" value="'+i.attr("ka")+'_blank" />'),t.append('<input type="hidden" name="lid" value="'+h+'" />'),t.closest("form").submit();try{_T.sendEvent(i.attr("ka")+"_job")}catch(e){}t.find('input[name="ka"]').remove(),t.unwrap("form")}$.ajax({type:"POST",url:"/actionLog/search.json",data:{keyword:o,l3code:a,filter:r,rescount:l,page:c,index:d,lid:h,itemid:u,source:p,jobid:f},dataType:"json",success:function(e){}})}),$(".job-list .info-primary h3.name").each(function(e){var t=$(this),i=t.find("a").first().attr("data-jid"),n=t.find("a").first().attr("data-lid");t.hoverDelay({hoverDuring:400,hoverEvent:function(){var e=document.documentElement.clientHeight-t.get(0).getBoundingClientRect().top;if(""===t.find(".info-detail").text())$.ajax({type:"GET",url:"/view/job/card.json?jid="+i+"&lid="+n,data:{},dataType:"json",success:function(n){var s=n.html;t.find(".info-detail").html(s);var o=t.find(".info-detail").height();e<o+18&&t.find(".info-detail").css("top",-(o-e+18)+"px"),t.find("a").addClass("cur");try{_T.sendEvent("show_popjob_"+i)}catch(e){}}});else{var s=t.find(".info-detail").height();e<s+18&&t.find(".info-detail").css("top",-(s-e+18)+"px"),t.find("a").addClass("cur");try{_T.sendEvent("show_popjob_"+i)}catch(e){}}},outEvent:function(){t.find("a").removeClass("cur"),t.find(".info-detail").css("top",0)}})})),$(".info-primary").on("click",".link-like",function(e){e.preventDefault(),Detail.setInterest($(this))}),$(".info-primary").on("click",".btn-startchat",function(e){e.preventDefault(),Detail.startChat($(this))}),$(".filter-select-box .dropdown-select").each(function(e){var t=$(this);t.hover(function(e){t.parent().addClass("cur")},function(){t.parent().removeClass("cur")})}),$(".now-city-pos .dropdown-wrap").each(function(e){var t=$(this);t.hoverDelay({hoverDuring:100,outDuring:100,hoverEvent:function(){t.addClass("cur")},outEvent:function(){t.removeClass("cur")}})}),$(this).scrollTop()>600?$("#siderbar").fadeIn():$("#siderbar").hide(),$(".footer-scan").length){$("#siderbar").css({bottom:"304px",transition:"all 0.2s"});var r=$("#footer"),l=$(".footer-scan"),c=$(".home-box .job-list"),d=$(window);c.css("margin-bottom","105px"),t(),$(window).scroll(function(){t()}),l.find(".footer-scan-close").click(function(){l.fadeOut(300,function(){c.css({"margin-bottom":"15px",transition:"all 0.2s"}),$("#siderbar").css({bottom:"214px",transition:"all 0.2s"})})})}$(window).width()<1348&&$(".footer-scan .btns").css("margin-right","84px"),$(window).resize(function(){$(window).width()<1348?$(".footer-scan .btns").css("margin-right","84px"):$(".footer-scan .btns").css("margin-right","0")}),$("#siderbar").on("click",".siderbar-feedback",function(){Feedback.getContent()}),$("#footer").on("click",".footer-feedback",function(){Feedback.getContent()}),$(".common-tab-box").on("click","h3 span",function(){var e=$(this).index(),t=$(this).parents(".common-tab-box").first();$(this).parents("h3").first().find("span").removeClass("cur"),$(this).addClass("cur"),$(t).find("ul").removeClass("cur"),$(t).find("ul").eq(e).addClass("cur"),i($(t).find("ul").eq(e))}),i($(".common-tab-box ul.cur"))}),seriesLoadScripts(["/v2/web/geek/chat/mqtt.js","/v2/web/geek/js/socket.js"],function(){});var Feedback={getContent:function(){var e=this;$.get("/faqfeedback/pc/create.json").success(function(t){$.dialog({content:t.html,title:"发送反馈",closeText:!1,cancelButton:"取消",confirmButton:"确认",inline:!0,wrapClass:"pop-feedback",closeLayer:!1,onOpen:function(t){t.find(".verify-box img").on("click",function(){$(this).attr("src","/captcha/?randomKey="+$(this).siblings(".randomkey").val()+"&_r="+(new Date).getTime())}),t.find("#fileupload").on("click",function(i){$(this).next(".verify-box")?e.checkForm($(".verify-box"))?e.uploadPicture($(this),t):i.preventDefault():e.uploadPicture($(this),t)})},onConfirm:function(t){return e.submitForm(t)}})})},uploadPicture:function(e,t){var i=/(\.|\/)(png|jpg|jpeg)$/i,e=e,n=e.siblings(".preview"),s=e.closest(".upload"),o=t.find(".verify-box .ipt");$("#fileupload").fileupload({type:"POST",url:"/faqfeedback/pc/upload/picture.json",dataType:"json",acceptFileTypes:i,maxFileSize:2e6,add:function(e,n){var o=n.files[0],a=o.name;i.test(a)?(s.find("a").html('上传图片<i class="icon-toast-loading"></i>'),n.formData={randomKey:t.find(".randomkey").val()||"",captcha:t.find(".verify-box input").val()||""},n.submit()):alert("请上传png、jpg、jpeg 格式的文件")},done:function(e,i){var a=i.result;a.rescode?(setTimeout(function(){t.addClass("upload-complate"),n.html("").html('<img src="'+a.url[0]+'" data-img="'+a.url[1]+'"/>'),s.find("a").html("上传图片")},500),t.addClass("upload-complate")):(s.find("a").html("上传图片"),$.toast({content:a.resmsg,type:"error"}),"验证码错误"==a.resmsg&&(o.val("").focus(),t.find(".verify-box img").click()))},error:function(e,t){s.find("a").html("上传图片"),$.toast({content:"上传失败",type:"error"})}})},submitForm:function(e){var t,i=e,n=i.find("textarea").val(),s=this;i.find(".ipt-wrap").each(function(){return t=s.checkForm($(this)),s.checkForm($(this))});var o={content:n,imgurl:i.find(".preview img").attr("data-img")||"",screen:$(window).width()+"*"+$(window).height(),pk:$("#page_key_name").val(),randomKey:i.find(".randomkey").val(),captcha:$(".verify-box input").val()};return t&&(t=!1,$.ajax({url:"/faqfeedback/pc/save.json",type:"POST",data:o,dataType:"JSON",timeout:3e4,success:function(t){t.rescode?($.toast({content:"发送成功，感谢您的反馈 ：）",type:"success"}),e.remove()):($.toast({content:t.resmsg||"提交失败，请稍后再试",type:"error"}),i.find(".verify-box .ipt").val(""),i.find(".verify-box img").click())},error:function(e){}})),!1},checkForm:function(e){var t,i=e.find(".ipt").val();if(void 0!=e.find(".ipt").attr("data-range")){if(t=e.find(".ipt").attr("data-range").split(",")[1],i.length>t)return e.next(".text-error").html("请输入"+t+"个字以内的内容"),!1;e.next(".text-error").html("")}if(""==i){var n=e.find(".ipt").attr("data-blank");return e.find(".ipt").focus(),e.next(".text-error").html(n),!1}return e.next(".text-error").html(""),!0}},Search={init:function(){Search.searchBox=$(".search-box"),Search.isLoading=!1,EventBus.subscribe("MESSAGE_STATISTIVS",function(e){0!=e?$(".nav-chat-num").show().text(e):$(".nav-chat-num").hide().text("")}),$(".bottom-banner .closeIcon").on("click",function(){$(this).parents(".bottom-banner").hide()}),Search.searchBox.find(".city-sel").on("click",function(e){if($(e.target).closest(".city-box").length)return void($(e.target).attr("data-val")&&($(this).find(".label-text b").attr("data-val",$(e.target).attr("data-val")).text($(e.target).text()),Search.searchBox.removeClass("show-city")));Search.searchBox.toggleClass("show-city")}),Search.searchBox.find(".industry-sel").on("click",function(e){Search.searchBox.toggleClass("show-industry")}),Search.searchBox.find(".position-sel").on("click",function(e){Search.searchBox.toggleClass("show-position")}),Search.searchBox.find(".dorpdown-province").on("mouseover","li",function(){var e=$(this).index(),t=$(this).parent().find("li"),i=Search.searchBox.find(".dorpdown-city ul");t.removeClass("cur"),$(this).addClass("cur"),i.removeClass("show"),i.eq(e).addClass("show");var n=i.eq(e).find("li");n.length>0&&i.eq(e).find("li.cur").length<1&&n.eq(0).addClass("cur")}),Search.searchBox.find(".dorpdown-province").on("click","li",function(){var e=$(this).index(),t=Search.searchBox.find(".dorpdown-city ul"),i=t.eq(e);i.find("li").length>0&&i.find("li").eq(0).trigger("click")}),Search.searchBox.find(".dorpdown-city").on("click","li",function(){var e=Search.searchBox.find(".city-sel").find(".label-text b"),t=Search.searchBox.find(".city-code"),i=Search.searchBox.find(".city-name");e.text($(this).text()),t.val($(this).attr("data-val")),i.val($(this).text()),Search.searchBox.find(".dorpdown-city ul .cur").removeClass("cur"),$(this).addClass("cur")}),Search.loadIndustryData(Search.renderIndustry),Search.loadCityData(Search.renderCity),Search.searchBox.find(".dropdown-menu").each(function(){function e(e){o.length&&(3==o.attr("data-level")&&o.html('<ul class="tree-1"></ul><ul class="tree-2"></ul><ul class="tree-3"></ul>'),2==o.attr("data-level")&&o.html('<ul class="tree-1"></ul><ul class="tree-2"></ul>'),Search.getTreeData(o,e)),a.length&&Resume.getTag(formEl,!0),t.on("mouseenter","li",function(){if($(this).closest(".select-tree").length){var t=$(this).closest(".select-tree").attr("data-level");if($(this).parent().find("li").removeClass("selected"),$(this).addClass("selected"),3==t){if($(this).closest(".tree-1").length)return $(this).closest(".select-tree").find(".tree-3").hide(),Search.getTreeData(o,e,$(this).attr("data-id")),!1;if($(this).closest(".tree-2").length)return $(this).closest(".select-tree").find(".tree-3").show(),s.attr("level2",$(this).attr("data-id")),Search.getTreeData(o,e,$(this).closest(".select-tree").find(".tree-1 .selected").attr("data-id"),$(this).attr("data-id")),!1}if(2==t){if($(this).closest(".tree-1").length)return $(this).closest(".select-tree").find(".tree-3").hide(),Search.getTreeData(o,e,$(this).attr("data-id")),!1;if($(this).closest(".tree-2").length)return $(this).closest(".select-tree").find(".tree-3").show(),s.attr("level2",$(this).attr("data-id")),Search.getTreeData(o,e,$(this).closest(".select-tree").find(".tree-1 .selected").attr("data-id"),$(this).attr("data-id")),!1}}}),t.on("click","li",function(){var e=$(this).closest(".select-tree").attr("data-level");if(3!=e||$(this).closest(".tree-1").length||$(this).closest(".tree-2").length){if(3!=e||!$(this).closest(".tree-1").length)return!1;0==$(this).attr("data-id")&&(n.text("职位类型不限"),s.val($(this).attr("")),Search.searchBox.removeClass("show-position"))}else n.text($(this).text()),s.val($(this).attr("data-val")),Search.searchBox.removeClass("show-position")})}var t=$(this),i=Search.searchBox.find(".position-sel"),n=i.find(".label-text b"),s=Search.searchBox.find(".position-code"),o=t.find(".select-tree"),a=t.find(".tags-cells");Search.loadPositionData(e)}),Search.searchBox.find("form").on("submit",function(e){var t=$(this),i=t.find(".ipt-search");if("搜索职位、公司"==i.val()&&i.val(""),""!=i.val()&&window.localStorage){var n=Storage.get("_Search_History");if(n)if(n.indexOf(i.val())===-1)n.unshift(i.val()),Storage.set("_Search_History",n);else{var s=[];$(n).each(function(e,t){e>=3||t!=i.val()&&s.push(t)}),s.unshift(i.val()),Storage.set("_Search_History",s)}else Storage.set("_Search_History",[i.val()])}}),$(document).on("click",function(e){$(e.target).closest(".city-sel").length||$(e.target).closest(".dorpdown-province").length||Search.searchBox.removeClass("show-city"),$(e.target).closest(".position-sel").length||$(e.target).closest(".position-box").length||Search.searchBox.removeClass("show-position"),$(e.target).closest(".industry-sel").length||Search.searchBox.removeClass("show-industry"),$(e.target).closest(".suggest-result").length||$(e.target).closest(".ipt-search").length||Search.searchBox.find(".suggest-result").hide()}),Search.searchBox.find(".industry-box").on("click"," li a",function(e){return"不限"==$(this).text()?Search.searchBox.find(".industry-sel").find(".label-text b").text("行业不限"):Search.searchBox.find(".industry-sel").find(".label-text b").text($(this).text()),Search.searchBox.find(".industry-code").val($(this).parent().attr("data-val")),Search.searchBox.find(".industry-box ul .cur").removeClass("cur"),$(this).parent().addClass("cur"),e.preventDefault(),Search.searchBox.toggleClass("show-industry"),!1}),Search.searchBox.find(".ipt-search").on("paste keyup",function(e){if(13!=e.which&&27!=e.which&&38!=e.which&&40!=e.which){Search.suggestTimer&&clearTimeout(Search.suggestTimer);var t=$(this);Search.suggestTimer=setTimeout(function(){Search.suggest(t)},200)}}),$(".geek-inside").length||Search.fillHistory(),Search.searchBox.find(".ipt-search").on("focus",function(e){$(".geek-inside").length||(Search.fillHistory(),$(this).closest(".search-box").find(".suggest-result").show())}),Search.searchBox.find(".ipt-search").focus(function(){$(this).closest("form").addClass("search-form-shadow"),$(this).closest(".ipt-wrap").addClass("ipt-wrap-hover"),$(this).closest("form").find(".city-sel").addClass("city-sel-hover"),$(this).closest("form").find(".industry-sel").addClass("industry-sel-hover"),$(this).closest("form").find(".position-sel").addClass("position-sel-hover")}),Search.searchBox.find(".ipt-search").blur(function(){$(this).closest("form").removeClass("search-form-shadow"),$(this).closest(".ipt-wrap").removeClass("ipt-wrap-hover"),$(this).closest("form").find(".city-sel").removeClass("city-sel-hover"),$(this).closest("form").find(".industry-sel").removeClass("industry-sel-hover"),$(this).closest("form").find(".position-sel").removeClass("position-sel-hover")}),Search.searchBox.find(".suggest-result").on("click","li",function(){Search.addInput($(this))});var e=-1;Search.searchBox.find(".ipt-search").keydown(function(t){var i=Search.searchBox.find(".suggest-result li");switch(t.which){case 38:i.removeClass("selected"),e==-1?(e=-1,e=i.length-1):e--,i.eq(e).addClass("selected"),Search.addInput(i.eq(e),!0),Search.scrollVisiable(i.eq(e),"up");break;case 40:t.preventDefault(),i.removeClass("selected"),e>i.length-2&&(e=-1),e++,i.eq(e).addClass("selected"),Search.addInput(i.eq(e),!0),Search.scrollVisiable(i.eq(e),"down");break;case 13:e=-1;break;case 27:e=-1,Search.searchBox.find(".ipt-search").val("")}}),Search.searchBox.length&&0==$(".company-detail-grab").length&&$(".job-list li a,.job-list .company-card a").on("click",function(){var e=$(this),t=e.closest(".job-list");$.ajax({type:"POST",url:"/actionLog/search.json",dataType:"JSON",data:{keyword:t.attr("data-keyword"),l3code:t.attr("data-l3code"),filter:t.attr("data-filter"),rescount:t.attr("data-rescount"),page:t.attr("data-page"),index:e.attr("data-index"),lid:e.attr("data-lid"),itemid:e.attr("data-itemid"),jobid:e.attr("data-jobid"),source:t.attr("data-source")}})}),$(".company-card").on("click",function(e){$(e.target).hasClass("btn")||($(e.target).closest(".company-card").find(".btn").eq(0).click(),window.location.href=$(this).find(".btn").eq(0).attr("href"))})},fillHistory:function(){try{if(window.localStorage){var e=Storage.get("_Search_History");$(".suggest-result ul").empty(),$(e).each(function(e,t){e>=3||$(".suggest-result ul").append("<li>"+t+"</li>")})}}catch(e){}},loadIndustryData:function(e){$.ajax({type:"GET",url:"/common/data/oldindustry.json",data:{},dataType:"json",success:function(t){e(t.data)}})},renderIndustry:function(e){var t=$(".industry-box").find("ul");t.empty(),t.append('<li data-val=""><a href="javascript:;">不限</a></li>'),$(e).each(function(e,i){t.append('<li data-val="'+i.code+'" ka="sel-industry-'+(e+1)+'"><a href="javascript:;">'+i.name+"</a></li>")})},loadCityData:function(e){$.ajax({type:"GET",url:"/common/data/city.json",data:{},dataType:"json",success:function(t){e(t.data)}})},renderCity:function(e){if(!$(".dorpdown-province").parents(".geek-inside").length){$(".dorpdown-province").empty(),$(".dorpdown-city").empty();var t=e.hotCityList,i=e.cityList;$(".dorpdown-province").append('<li class="">热门</li>');var n=$("<ul></ul>");$(t).each(function(e,t){$(n).append('<li ka="hot-city-'+t.code+'" data-val="'+t.code+'" class="cur">'+t.name+"</li>")}),$(".dorpdown-city").append(n),$(i).each(function(e,t){$(".dorpdown-province").append('<li ka="sel-province-'+(e+1)+'" class="">'+t.name+"</li>");var i=$("<ul></ul>"),n=t.subLevelModelList;$(n).each(function(e,t){$(i).append('<li ka="hot-city-'+t.code+'" data-val="'+t.code+'" class="cur">'+t.name+"</li>")}),$(".dorpdown-city").append(i)})}},loadPositionData:function(e){$.ajax({type:"GET",url:"/common/data/position.json",data:{},dataType:"json",success:function(t){e(t.data)}})},getTreeData:function(e,t,i,n){var s,o,a,r="",l="",c="";for(s=0;s<t.length;s++){var d=t[s].subLevelModelList;if(r+='<li data-id="'+t[s].code+'">'+t[s].name+"</li>",d&&i&&t[s].code==i)for(o=0;o<d.length;o++){var h=d[o].subLevelModelList;if(l+='<li data-id="'+d[o].code+'">'+d[o].name+"</li>",h&&n&&d[o].code==n)for(a=0;a<h.length;a++)c+='<li data-val="'+h[a].code+'">'+h[a].name+"</li>"}}i||(e.find(".tree-1").html('<li data-id="0" class="">不限</li>'+r),e.find(".tree-2").html('<li class="blank">选择职类</li>')),n?e.find(".tree-3").html(c):i&&e.find(".tree-2").html(l)},suggest:function(e){var e=e,t=e.val().replace(/(^\s*)|(\s*$)/g,""),i=e.closest(".search-box").find(".suggest-result"),n=i.find("ul");if(""==t)return void i.hide();$.ajax({type:"GET",url:"/autocomplete/query.json",dataType:"JSON",cache:!1,data:{query:t},success:function(e){var t,s,e=e,o="";if(e.data&&e.data.length){for(t=e.data,s=0;s<t.length;s++)o+="<li>"+t[s].hlname+"</li>";n.html(o),i.show()}else n.html('<li class="blank-data">暂无匹配结果</li>');Search.isLoading=!1},error:function(e){Search.isLoading=!1}})},hightLight:function(e,t){var t=t.replace(/(^\s*)|(\s*$)/g,"");if(""==t)return e;var i=t;return e.replace(t.toLowerCase(),'<em class="text-blue">'+i+"</em>").replace(t.toUpperCase(),'<em class="text-blue">'+i+"</em>")},addInput:function(e,t){var e=e,i=e.text().replace('<u class="h">',"").replace("</u>","");Search.searchBox.find(".ipt-search").val(i),t||(Search.searchBox.find(".suggest-result").hide(),Search.searchBox.find("form").submit())},scrollVisiable:function(e,t){var e=e,i=Search.searchBox.find(".suggest-result ul");if(!e)return!1;var n=i.find("li").length,s=$(e).index(),o=s>4?s-4:0,a="down"==t&&(o<n-4||0===s),r="up"==t&&(s<n-5||s==n-1);"up"==t&&(o=s),(r||a)&&i.scrollTop(o*$(e).height())}};$(function(){Search.init()});var Filter={init:function(){Filter.filterBox=$(".filter-select-box"),Filter.filterBox.on("click","ul li",function(){var e=$(this).find(".sub-list");e.hasClass("show-sub")?e.removeClass("show-sub"):(Filter.filterBox.find(".show-sub").removeClass("show-sub"),e.addClass("show-sub"))}),$(document).on("click",function(e){$(e.target).closest(".filter-select-box").length||Filter.filterBox.find(".show-sub").removeClass("show-sub")}),$(window).on("scroll",function(){$(this).scrollTop()>300?$("#filter-box").length&&($("#filter-box").addClass("show-top"),$(".job-box").addClass("show-top")):($("#filter-box").removeClass("show-top"),$(".job-box").removeClass("show-top"))})}};$(function(){Filter.init()});var PositionHistory={init:function(){if($(".job-box .sider-list").length&&window.localStorage){var e=Storage.get("_Job_History");e&&PositionHistory.renderList(e)}},renderList:function(e){if(0!==e.length){var t=$(".job-box .sider-list").first();$(e).each(function(e,i){e>4||$(t).append('<li>\n    <a href="/job_detail/'+i.job_id+'.html" ka="viewed_list_'+(e+1)+'">\n        <h4>'+i.job_name+' <span class="salary">'+i.job_salary+"</span></h4>\n        <p>"+i.company+"</p>\n    </a>\n</li>")}),$(t).show()}}};$(function(){PositionHistory.init()});var Detail={init:function(e){function t(){$(this).scrollTop()>=$(".job-box").offset().top-80?r||(r=!0,a.slideDown(300,function(){r=!1})):a.hide()}Detail.firstIn=!0,$(".links").css("height","70px"),$(".links label").each(function(){var e=$(this).closest(".links"),t=!1,i=e.hasClass("links-friends");$(this).click(function(){t?(i?e.css("height","30px"):e.css("height","70px"),t=!1,$(this).html('<span>展开</span><i class="fz fz-slidedown"></i>')):(e.css("height","auto"),t=!0,$(this).html('<span>收起</span><i class="fz fz-slideup"></i>'))})}),$(".links-friends").css("height","27px");var i=$(".links-friends label"),n=0,s=$(".links-friends dd").width();if($(".links-friends a").each(function(){n+=$(this).width()+26}),n>s?i.show():i.hide(),$(".business-detail").css("height","46px"),$(".business-detail label").on("click",function(){var e=$(this).closest(".business-detail");e.toggleClass("show-business-all"),e.hasClass("show-business-all")?($(this).find("span").text("收起"),$(this).find(".fz").removeClass("fz-slidedown").addClass("fz-slideup")):($(this).find("span").text("展开"),$(this).find(".fz").removeClass("fz-slideup").addClass("fz-slidedown"))}),$(".btn-signup").on("click",function(){$(this).parents(".bottom-banner").length?Detail.showSign(5):Detail.showSign(1)}),$(".fold-text .more-view").on("click",function(){$(this).find(".fz-slidedown").length?($(this).parent().css({"max-height":"none",overflow:"visible"}),$(this).css("bottom","-20px"),$(this).html('收起<i class="fz fz-slideup"></i></a>').show()):($(this).parent().removeAttr("style"),$(this).removeAttr("style"),$(this).html('...展开<i class="fz fz-slidedown"></i></a>').show())}),$(".company-card").on("click",function(e){$(e.target).hasClass("btn")||(window.location.href=$(this).find(".btn").eq(0).attr("href"))}),$(".detail-content .job-sec .fold-text").text().length>175&&$(".detail-content .job-sec .more-view").show(),$(".manager-list .fold-text").each(function(){$(this).text().length>69?$(this).find(".more-view").show():$(this).find(".more-view").remove()}),$(".company-info").length&&$(".company-info .text").text().length<250&&$(".company-info .look-all span").remove(),$(".detail-op").on("click",".btn",function(e){var t=$(this);t.hasClass("btn-outline")?($(".detail-grab").length||$(".company-detail-grab").length&&!t.hasClass("btn-disabled")?Detail.startChat(t):Detail.deliveResume(t),e.preventDefault()):t.hasClass("btn-startchat")&&("立即沟通"==t.text()?(e.preventDefault(),Detail.startChat(t)):Detail.startChat(t))}),$(".link-like").on("click",function(){Detail.setInterest($(this))}),$("#async-sider").length&&Detail.getSider($("#async-sider")),$(".chat-history .btn-accept").on("click",function(){Detail.showInviteTip($(this))}),$(".chat-history .btn-refuse").on("click",function(){Detail.refuseInvite($(this))}),$(".chat-history .btn-like").on("click",function(){Detail.setInterest($(this))}),$(".chat-history .btn-startchat").on("click",function(){Detail.startChat($(this))}),$(".company-detail-grab").length&&$(".company-detail-grab .load-more").on("click",function(){var e=$(".company-detail-grab").find(".job-list"),t=e.find(".load-more"),i=parseInt(e.attr("data-page")),n=e.attr("data-companyid");"false"!=e.attr("data-hasmore")&&($(this).find(".more").text("加载中..."),$.ajax({type:"GET",url:"/gongsi/ljobdata.json",data:{companyId:n,page:i+1},dataType:"json",success:function(n){e.attr("data-page",i+1),e.find("ul").append(n.html),n.hasMore||t.hide(),t.find(".more").text("点击加载更多")},error:function(e){}}))}),"undefined"!=typeof _userInfo){this.showMes();var o=this;if(_userInfo.isLogin){if(!_userInfo.isPerfect){$(".container-tip");setTimeout(function(){Detail.canClick=!0,$(".avatar img").on("click",function(){o.showGuide()})},4e3),$(".tip-box a").attr("href","/geek/complete/guide.html")}}else{$(".container-tip");setTimeout(function(){Detail.canClick=!0,$(".avatar img").on("click",function(){$(".jconfirm").length&&$(".jconfirm").remove(),Detail.canClick&&o.showGuide()})},4e3),$(".container-tip .tip-box>a").on("click",function(){if($(".jconfirm").length&&$(".jconfirm").remove(),1!=$(this).data("load")){var e=$(this);e.data("load",!0),$(".container-tip").fadeOut(function(){$.confirm({content:$("#pop-hide-container").html(),title:!1,confirmButton:!1,cancelButton:!1,closeIcon:!0,columnClass:"pop-sign-box",onOpen:function(){Singup.init()},onClose:function(){Singup.cdAni&&(clearInterval(Singup.cdAni),Singup.cdAni=null),o.showMes()}}),e.data("load",!1)})}})}if(_userInfo.hasKaAnotherS)try{_T.sendEvent("detail_with_another_s_from_same_boss")}catch(e){}}$(".job-detail .slider-main").length&&$(".slider-main").hwSlider({autoPlay:!1,arrShow:!0,dotShow:!0,navShow:!0,touch:!0,width:646,height:386}),Detail.pushJobLocal();var a=($(".job-banner"),$(".smallbanner")),r=!1;if(!($(document).height()-$(window).height()<260))return 0!=$(".job-banner").length&&(t(),void $(window).scroll(function(){t()}))},pushJobLocal:function(){if("undefined"!=typeof _jobInfo&&window.localStorage&&_jobInfo){var e=Storage.get("_Job_History");if(e)if(JSON.stringify(e).indexOf(JSON.stringify(_jobInfo))===-1)e.unshift(_jobInfo),Storage.set("_Job_History",e);else{var t=[];$(e).each(function(e,i){e>=5||i.job_id!=_jobInfo.job_id&&t.push(i)}),t.unshift(_jobInfo),Storage.set("_Job_History",t)}else Storage.set("_Job_History",[_jobInfo])}},showGrabTip:function(e){$.dialog({content:'<div class="tip-text">抱歉，该职位当前无法投递</div>',title:"提示",type:"warning",closeText:!1,cancelText:"取消",confirmText:"查看推荐职位",wrapClass:"",onOpen:function(e){},onConfirm:function(e){window.location.href="/job_detail/"}}),e.text("投递简历").removeClass("btn-loading")},deliveResume:function(e){var t=e.attr("data-url");e.attr("redirect-url");e.hasClass("btn-loading")||e.hasClass("btn-disabled")||(e.html('<i class="icon-loading"></i>投递中').addClass("btn-loading"),$.ajax({url:t,type:"post",dataType:"json",data:{},success:function(t){var t=t;t.rescode?1==t.rescode?$.dialog({content:'<div class="tip-text">您的附件简历已经发送给Boss，请静候佳音。</div>',title:"投递成功",type:"success",closeText:!1,cancelText:"",confirmText:"确定",wrapClass:"",onOpen:function(e){var t=e.find(".btn-sure"),i=4,n=setInterval(function(){i<=1?(clearInterval(n),e.remove()):(i--,t.text("确定 ("+i+")"))},1e3);$(".btn-sendresume").text("已投递")},onConfirm:function(e){$(".btn-sendresume").removeClass("btn-loading").addClass("btn-disabled"),e.remove()}}):3==t.rescode||4==t.rescode?(Detail.showSign(t.rescode),e.text("投递简历").removeClass("btn-loading")):5==t.rescode?e.text("已投递").removeClass("btn-loading").addClass("btn-disabled"):6==t.rescode?($.confirm({content:'<div class="deliver-pop"><p class="text">请您上传附件简历，即可完成投递。</p><div class="resume-attachment"></div><div class="btns"><input id="fileupload" type="file" name="file" class="file" /><button type="button" class="btn">立即上传</button><button type="button" class="btn btn-outline">先聊聊</button></div></div>',title:"上传附件简历",confirmButton:!1,cancelButton:!1,closeIcon:!0,columnClass:"pop-tip-box pop-detail",onOpen:function(){var e=this;e.$content.find(".btn").on("click",function(){"确定"==$(this).text()&&($(".job-detail .btn-sendresume").click(),e.close()),"先聊聊"==$(this).text()&&($(".job-detail .btn-startchat").click(),e.close())}),Resume.setUpload()},onClose:function(){}}),e.text("投递简历").removeClass("btn-loading")):7==t.rescode?($.dialog({content:'<div class="tip-text">'+t.resmsg+"</div>",title:"您不太符合该boss的要求",type:"warning",closeText:!1,cancelText:"再看看",confirmText:"继续投递",wrapClass:"",onOpen:function(t){t.find(".btn-sure").attr("data-url",e.attr("data-url")+"&isSureSend=1").attr("redirect-url",e.attr("redirect-url"))},onConfirm:function(e){Detail.deliveResume(e.find(".btn-sure")),e.remove()}}),e.text("投递简历").removeClass("btn-loading")):8==t.rescode&&($.dialog({content:'<div class="tip-text">此职位不支持投递，请与Boss直接沟通</div>',title:"提示",type:"warning",closeText:!1,cancelText:"",confirmText:"确定",wrapClass:"",onOpen:function(e){},onConfirm:function(e){e.remove()}}),e.text("投递简历").removeClass("btn-loading")):1011==t.code?(Detail.showSign(1011),e.text("投递简历").removeClass("btn-loading")):(alert(t.resmsg),e.text("投递简历").removeClass("btn-loading"))},error:function(t){e.text("投递简历").removeClass("btn-loading")}}))},startChat:function(e,t){var e=e,i=t||e.attr("data-url"),n=e.attr("redirect-url");"javascript:;"==e.attr("href")&&(e.addClass("btn-disabled"),$.ajax({type:"POST",url:i,dataType:"JSON",data:null,success:function(t){t.rescode?2==t.rescode?(Detail.showBlockDialog(t.chatRemindDialog,e),e.removeClass("btn-disabled")):9==t.rescode?Detail.showGrabTip(e):1==t.rescode?("立即沟通"==e.text()?(null==t.greeting?t.greeting="未设置招呼语":t.greeting=t.greeting,$.dialog({content:'<div class="greet-con" id="greet">'+t.greeting+"</div><span>如需修改打招呼内容，请在【账户管理-设置招呼语】页面修改</span>",title:"已向BOSS发送消息",closeText:!1,cancelText:"取消",confirmText:"继续沟通",inline:!0,wrapClass:"greet-pop",closeLayer:!1,onOpen:function(e){e.find(".verify-box img").on("click",function(){$(this).attr("src","/captcha/?randomKey="+$(this).siblings(".randomkey").val()+"&_r="+(new Date).getTime())}),e.find("#fileupload").on("click",function(t){$(this).next(".verify-box")?_this.checkForm($(".verify-box"))?_this.uploadPicture($(this),e):t.preventDefault():_this.uploadPicture($(this),e)})},onConfirm:function(e){window.location.href=n}})):window.location.href=n,e.attr("href",e.attr("redirect-url")).text("继续沟通"),e.removeClass("btn-disabled")):3!=t.rescode&&4!=t.rescode||(Detail.showSign(t.rescode),e.removeClass("btn-disabled")):1011==t.code?(Detail.showSign(1011),e.removeClass("btn-disabled")):(alert(t.resmsg),e.removeClass("btn-disabled"))},error:function(t){e.removeClass("btn-disabled")}}))},sendEventAction:function(e,t){$.ajax({type:"POST",url:"/actionLog/geek/chatremind.json",data:{ba:e.ba,action:t},dataType:"JSON",success:function(e){}})},showBlockDialog:function(e,t){Detail.sendEventAction(e,"addf-limit-popup-c");var i=e.title,n=e.content,s=e.buttonList,o=e.remindType,a="";e.showNotRemind&&(a="<div class='remindType'><label><input type='checkbox'>不再提醒</label></div>");var r={content:"<p>"+n+"</p>"+a,title:i,closeText:!1,cancelText:2===s.length&&s[0].text,confirmText:2===s.length?s[1].text:s[0].text,inline:!0,wrapClass:"greet-pop",closeLayer:!1,onOpen:function(e){},onConfirm:function(i){if(Detail.sendEventAction(e,"addf-limit-popup-connect"),e.showNotRemind&&$(".remindType input:checked").length&&Detail.sendRemindType(o),l.close(),2==o)return void Detail.startChat(t,s[1].webUrl);2===s.length?window.open(s[1].webUrl):s[0].url&&window.open(s[0].webUrl)}};2===s.length&&(r.onCancel=function(){if(Detail.sendEventAction(e,"addf-limit-popup-connect"),l.close(),2===s.length){if(4==o)return void Detail.startChat(t,s[0].webUrl);s[0].url&&window.open(s[0].webUrl)}});var l=$.dialog(r)},sendRemindType:function(e){$.ajax({type:"POST",url:" /gchat/noMoreChatRemind.json",data:{remindType:e},dataType:"json",success:function(e){}})},showSign:function(e){$.confirm({content:$(".sign-wrap").html(),title:!1,confirmButton:!1,cancelButton:!1,closeIcon:!0,columnClass:"pop-sign-box",onOpen:function(){var t=this;Sign.init(t.$content),4==e?(t.$content.find(".sign-welcome").show(),Sign.countDown(t.$content.find(".sign-welcome .welcome-box .count-down"),function(){window.location.href=t.$content.find(".sign-welcome .welcome-box .btn").attr("href")})):5==e?(t.$content.find(".sign-register").show(),t.$content.find(".sign-register").find(".verifyimg").click()):t.$content.find(".sign-pwd").show()},onClose:function(){Sign.interCount&&(clearInterval(Sign.interCount),Sign.interCount=null)}})},showMes:function(){if(!_userInfo.isLogin||!_userInfo.isPerfect){var e=$(".message");Detail.canClick=!1,$.each(_userInfo.text,function(t,i){e.find(".text").eq(t).html(i)}),Detail.firstIn?(setTimeout(function(){$(".container-mes").fadeIn(),$(".container-mes").find(".avatar").css("display","block")},1e3),setTimeout(function(){e.css("top","40px"),e.fadeIn(),e.find("li").eq(0).fadeIn()},1800),setTimeout(function(){e.find("li").eq(1).fadeIn()},2600),setTimeout(function(){e.find("li").eq(2).fadeIn(),Detail.canClick=!0},3400),Detail.firstIn=!1):(e.css("top","40px"),e.fadeIn(200),$(".container-mes").find(".avatar").fadeIn(200),Detail.canClick=!0)}},showTip:function(){if((!_userInfo.isLogin||!_userInfo.isPerfect)&&_userInfo.showTip){var e=$(".avatar img");Detail.canClick=!1,setTimeout(function(){$(".message").css("z-index","101"),$(".aladingtip").fadeIn(),e.addClass("avatar-ani"),e.mouseover(function(){$(this).removeClass("avatar-ani")}),e.mouseout(function(){$(this).addClass("avatar-ani")})},3400),$(".aladingtip").click(function(){$(this).fadeOut(function(){e.removeClass("avatar-ani"),e.unbind("mouseover mouseout")})})}},showGuide:function(){var e=$(".container-tip"),t=$(".container-mes"),i=this;t.find(".message").css({top:"20px",
"-webkit-transition":"all linear .2s",transition:"all linear .2s"}).fadeOut(),t.find(".avatar").fadeOut(),$(".aladingtip").fadeOut(),e.fadeIn(200),e.find(".tip-box").css({"margin-bottom":"35px","-webkit-transition":"all linear .2s",transition:"all linear .2s"}),e.find(".trangle").css({bottom:"69px","-webkit-transition":"all linear .2s",transition:"all linear .2s"}),e.find("a.close").click(function(){e.find(".tip-box").css({"margin-bottom":"15px","-webkit-transition":"all linear .2s",transition:"all linear .2s"}),e.find(".trangle").css({bottom:"49px","-webkit-transition":"all linear .2s",transition:"all linear .2s"}),$(".message").css("top","160px"),e.fadeOut(function(){i.showMes()}),$(".jconfirm").length&&$(".jconfirm").remove()})},getSider:function(e){$.ajax({type:"GET",url:"/geek/infodata.json",data:null,dataType:"json",success:function(t){1==t.rescode?(e.html(t.html),Detail.initMember(e)):e.html('<p class="gray">数据加载出错</p>')},error:function(e){}})},initMember:function(e){e.find(".userinfo-box  .dropdown-select").on("click",function(){$(this).toggleClass("dropdown-select-open")}),$(document).on("click",function(t){$(t.target).closest(".now-state").length||e.find(".userinfo-box  .dropdown-select").removeClass("dropdown-select-open")}),e.find(".filter-select-box .dropdown-select").on("click","a",function(e){e.stopPropagation()}),e.find(".sider-recommend li").eq(0).find(".red-dot").length?$(".chat-history .job-tab a").eq(0).attr("ka","personal_top_added_1"):$(".chat-history .job-tab a").eq(0).attr("ka","personal_top_added_0"),e.find(".sider-recommend li").eq(1).find(".red-dot").length?$(".chat-history .job-tab a").eq(1).attr("ka","personal_top_sawme_1"):$(".chat-history .job-tab a").eq(1).attr("ka","personal_top_sawme_0"),e.find(".now-state .dropdown-menu").on("click","li",function(){var t=$(this).attr("data-val");e.find(".now-state input").val($(this).text()),$.ajax({type:"POST",url:"/geek/saveApplyStatus.json",data:{applyStatus:t},dataType:"json",success:function(i){console.log(t),1==i.rescode&&(e.find(".now-state input").attr("ka","base_info_status_from_"+t),$.toast({content:"修改成功",type:"success"}))}})}),void 0!==Resume&&Resume.init()},setInterest:function(e){var t=e.attr("data-url"),i=null;e.hasClass("disabled")||(i="感兴趣"==e.text()?1:0,e.addClass("disabled"),$.ajax({type:"POST",url:t,data:{flag:i},dataType:"json",success:function(t){1==t.rescode?1==i?e.text("取消感兴趣").addClass("active").attr("ka","job_detail_unlike"):e.text("感兴趣").removeClass("active").attr("ka","job_detail_like"):1011==t.code?Detail.showSign(1011):$.toast({content:t.resmsg,type:"error"}),e.removeClass("disabled")},error:function(){$.toast({content:"网络或服务故障，请稍后再试",type:"error"}),e.removeClass("disabled")}}))},showInviteTip:function(e){$.dialog({content:'<div class="text">· 面试前一天18点钱，双方都可以申请取消。<br>· 如不取消，请按时出席面试，不要爽约。<br>· 对方爽约，约定时间30分钟可以投诉。<br>· 爽约一方，平台回加【不良记录】并公示。<br>· 为了方便联系，邀请面试成功后，双方自动交换手机联系方式。<br>· 对方讲自动获取你的简历附件。</div>',title:"约面试诚信守则",closeText:!1,cancelText:"我再想想",confirmText:"保证不爽约",wrapClass:"interview-pop",onOpen:function(e){},onConfirm:function(t){Detail.acceptInvite(e),t.remove()}})},acceptInvite:function(e){var t=e.attr("data-url");$.ajax({type:"POST",url:t,data:null,dataType:"json",success:function(e){1==e.rescode?($.toast({content:"已接受邀请",type:"success"}),setTimeout(function(){window.location.reload()},1500)):1011==e.code?Detail.showSign(1011):($.toast({content:e.resmsg,type:"error"}),setTimeout(function(){window.location.reload()},1500))},error:function(){$.toast({content:"网络或服务故障，请稍后再试",type:"error"})}})},refuseInvite:function(e){var t=e.attr("data-url");e.hasClass("disabled")||(e.addClass("disabled"),$.ajax({type:"POST",url:t,data:null,dataType:"json",success:function(t){1==t.rescode?$.dialog({content:'<div class="text">已拒绝面试邀请</div>',title:"",closeText:!1,cancelText:"",confirmText:"确定",wrapClass:"refuse-pop",onOpen:function(e){},onConfirm:function(e){e.remove(),setTimeout(function(){window.location.reload()},1500)},onClose:function(){setTimeout(function(){window.location.reload()},1500)}}):1011==t.code?Detail.showSign(1011):($.toast({content:t.resmsg,type:"error"}),setTimeout(function(){window.location.reload()},1500)),e.removeClass("disabled")},error:function(){$.toast({content:"网络或服务故障，请稍后再试",type:"error"}),e.removeClass("disabled")}}))}};$(function(){Detail.init()});var Deliver={init:function(){0!=$(".deliver-list").length&&(Deliver.isLoading=!1,Deliver.type="list",Deliver.listContainer=$(".job-box"),Deliver.listWrap=Deliver.listContainer.find(".deliver-list"),Deliver.tipsContainer=Deliver.listWrap.find(".data-tips"),Deliver.listCon=Deliver.listWrap.find("ul"),Deliver.listMoreEl=Deliver.listWrap.find(".loadmore"),Deliver.para={page:0},Deliver.getData(1,!0),Deliver.listMoreEl.on("click",function(){Deliver.isLoading||Deliver.listMoreEl.hasClass("disabled")||Deliver.getData()}),Deliver.listCon.on("click",".btn",function(e){var t=$(this);Detail.startChat(t),e.preventDefault()}))},getData:function(e,t){e&&(Deliver.para.page=0,Deliver.listCon.html(""),Deliver.listWrap.find(".user-list").hide(),Deliver.listWrap.find(".detail-box").hide()),Deliver.para.page++,Deliver.isLoading=!0,Deliver.para.page>1&&(Deliver.listMoreEl.addClass("disabled"),Deliver.listMoreEl.text("正在加载中...")),$.ajax({type:"GET",url:"/geek/deliveryinfo.json",dataType:"JSON",cache:!1,data:Deliver.para,success:function(t){var t=t,i="";1==t.rescode&&(1==t.hasMore?Deliver.listMoreEl.removeClass("disabled").text("加载更多").show():Deliver.para.page>1&&Deliver.listMoreEl.addClass("disabled").text("没有更多了").show(),""==t.html?e&&Deliver.tipsContainer.html('<div class="data-blank"><i class="tip-nodata"></i><b>没有相关数据</b></div>').show():(i+=t.html,Deliver.listCon.append(i),Deliver.tipsContainer.html("").hide()),e&&Deliver.listCon.find("li").length<10&&Deliver.listMoreEl.text("没有更多了").addClass("disabled").hide()),Deliver.isLoading=!1},error:function(t){Deliver.para.page>1&&Deliver.listMoreEl.removeClass("disabled").text("数据加载出错").show(),Deliver.isLoading=!1,e&&(Deliver.listMoreEl.hide(),Deliver.tipsContainer.html('<div class="data-blank"><i class="tip-errordata"></i><b>数据加载出错</b></div>').show())}})}};$(function(){Deliver.init()}),$(function(){$(".ie").length&&(window.IE=!0);var e=function(){$.dialog({type:"info",title:"新头像已提交审核",content:'<div class="tip-text">头像修改已提交审核，审核通过后自动更新您的信息</div>',closeText:!0,confirmText:"知道了",cancelText:"",closeLayer:!1,preKa:"",wrapClass:"dialog-icons-default dialog-avatar-tip",lock:!0,onOpen:function(e){},onConfirm:function(e){e.remove()},onClose:function(e){}})};$(".avatar_box").on("click",function(){if($(".profile_form").length)window.IE?$.initUploadPortrait({title:"上传照片",url:$("[upload]").attr("upload"),callback:function(t,i){var n=$(".profile_form .avatar_line img.avatar");if($("#user_info").length>0&&$(window.parent.document).find(".aside_nav_bar .avatar img").attr("src",t[0]),$(".resume-box").length){var s=n.closest("form");$.ajax({type:"POST",url:s.attr("action"),dataType:"JSON",data:{tiny:t[0],large:t[1]},success:function(t){1==t.rescode&&(n.attr("src",t.url[1]),n.closest("dd").find("input:hidden[name=large]").val(t.url[1]),n.closest("dd").find("input:hidden[name=tiny]").val(t.url[0]),n.closest("dd").find(".error_hint").html("").hide(),t.verifyTip&&e())},error:function(e){}})}}}):crop.show({callback:function(t){t&&$.post($("[upload-base64-url]").attr("upload-base64-url"),{data:t},function(t){if(t.rescode){var i=$(".profile_form .avatar_line img.avatar");i.attr("src",t.url[0]),i.closest("dd").find("input:hidden[name=tiny]").val(t.url[0]),i.closest("dd").find("input:hidden[name=large]").val(t.url[1]),$("#user_info").length>0&&$(window.parent.document).find(".aside_nav_bar .avatar img").attr("src",t.url[0]),t.verifyTip&&e()}else alert("图片保存失败")},"json")}});else if(window.IE)$.initUploadPortrait({title:"上传照片",url:$("[upload]").attr("upload"),callback:function(t,i){var n=$(".profile_form .avatar_line img.avatar");n.attr("src",t[1]),n.closest("dd").find("input:hidden[name=large]").val(t[1]),n.closest("dd").find("input:hidden[name=tiny]").val(t[0]),n.closest("dd").find(".error_hint").html("").hide(),i&&i.verifyTip&&e()}});else{var t=$(".avatar_layer"),i=$(this);crop.show({element:i,defaultAvatarHtml:t,callback:function(t){t&&$.post($("[upload-base64-url]").attr("upload-base64-url"),{data:t},function(t){if(t.rescode){var n=$(".avatar_box .avatar img");n.attr("src",t.url[0]),n.closest("dd").find("input:hidden[name=tiny]").val(t.url[0]),n.closest("dd").find("input:hidden[name=large]").val(t.url[1]),i.find(".tip-text").remove(),t.verifyTip&&e()}else alert("图片保存失败")},"json")}})}})});var Validate={init:function(e,t,i){var n=e,s=n.find("input,textarea");n.on("submit",function(e){var o=!1;s.each(function(){if($(this).hasClass("required")&&!Validate.check($(this),!0))return o=!1,!1;o=!0}),o&&(i?Guide.postData(n,t):Resume.postData(n,t)),e.preventDefault()}),s.each(function(){var e=$(this).closest("dd").find(".count-num");($(this).hasClass("required")||$(this).attr("data-range"))&&(t||Validate.check($(this),!1,e),$(this).bind("input keyup",function(){Validate.check($(this),!1,e)}))}),n.find(".form-btns .btn-back").on("click",function(){n.closest(".resume-item").removeClass("resume-item-open")}),n.find('input[name="locationName"]').on("blur",function(){""!=$(this).val()&&""==$(this).parent().find('input[name="location"]').val()&&($(this).val(""),Validate.showError($(this),"请输入正确的城市"))})},getLength:function(e){var t=0,e=e;len=e.length,charCode=-1;for(var i=0;i<len;i++)charCode=e.charCodeAt(i),charCode>=0&&charCode<=128||charCode>=65248&&charCode<=65373||12288==charCode||12289==charCode||12290==charCode?t+=.5:t+=1;return Math.round(t)},check:function(e,t,i){var e=e,n=e.attr("data-range"),s=Validate.getLength(e.val()),o=e.val().replace(/(\s*$)/g,"");if(""==o){if(t)return Validate.showError(e,e.attr("data-blank")),!1;Validate.hideError(e)}else Validate.hideError(e);if("locationName"==e.attr("name")&&""!=o&&""==e.parent().find('input[name="location"]').val())return Validate.showError(e,"请输入正确的城市"),!1;if(n){if(n=n.split(","),i&&i.length&&i.html("<em"+(s>n[1]?' class="red"':"")+">"+s+"</em>/"+n[1]),s>n[1]||s<n[0])return Validate.showError(e,"请输入"+n[0]+"-"+n[1]+"个字"),!1;Validate.hideError(e)}return!0},showError:function(e,t){var i='<div class="tip-text">'+t+"</div>",n=e.closest("dd").length?e.closest("dd"):e.closest(".form-row");Validate.hideError(e),n.find(".tip-text").remove(),$(i).appendTo(n),console.log(n),e.addClass("ipt-error")},hideError:function(e){e.closest("dd").find(".tip-text").remove(),e.removeClass("ipt-error")}};$(function(){$(".form-resume").each(function(){Validate.init($(this))})});var FormsUI={init:function(e){var t=e||$(document);if(this.dropSelect(t),this.prettyRadio(t),t.find(".ipt-datetimepicker").length){var i=new Date;nowYear=i.getFullYear(),nowMonth=i.getMonth()+1,nowThisDate=i.getDate(),t.find(".ipt-datetimepicker").each(function(e){var t=$(this),i=e,n=t.attr("data-format")||"yyyy-mm-dd",s=t.hasClass("date-range"),o=t.attr("data-today"),a=t.attr("data-type"),r=t.attr("data-minYear")||!1,l=2,c=2;(a&&"y-m-d"==a||"y-m"==a)&&(l=4),"yyyy-mm"==n&&(c=3),t.datetimepicker({format:n,startView:l,minView:c,autoclose:1,weekStart:1,minLimitYear:r,todayHighlight:!0,container:_PAGE&&_PAGE.isGeekChat?"#resume-history":"body",endDate:nowYear+"-"+nowMonth+"-"+nowThisDate,todayBtn:o?1:0}).on("changeDate",function(e){var i=t.closest(".form-row").find(".date-range").eq(0);if(o){if(new Date(e.date)<new Date(i.val()))return alert("结束时间不能小于开始时间"),!1}else if(s&&"startDate"==t.attr("name")){var n=t.closest(".form-row").find(".date-range").eq(1);new Date(e.date).getFullYear()==(new Date).getFullYear()&&new Date(e.date).getMonth()==(new Date).getMonth()?(n.parent().addClass("show-prefix-today"),n.parent().find('input[name="now"]').val("1"),n.removeClass("required")):(n.parent().removeClass("show-prefix-today"),n.parent().find('input[name="now"]').val(""),n.addClass("required")),"1989-01"==t.val()?n.datetimepicker("setStartDate","1990-01"):n.datetimepicker("setStartDate",t.val())}s&&"endDate"==t.attr("name")&&(new Date(e.date).getFullYear()==(new Date).getFullYear()&&new Date(e.date).getMonth()==(new Date).getMonth()?(t.parent().addClass("show-prefix-today"),t.parent().find('input[name="now"]').val("1"),t.removeClass("required")):(t.parent().removeClass("show-prefix-today"),t.parent().find('input[name="now"]').val(""),t.addClass("required"))),$(e.target).attr("data-minyear")&&(new Date(e.date).getFullYear()<=1989?i.parent().addClass("show-prefix-minyear"):i.parent().removeClass("show-prefix-minyear"))}),"birthday"==t.attr("name")&&(t.datetimepicker("setStartDate","1968-01"),t.datetimepicker("setEndDate","2003-12")),s&&"startDate"==t.attr("name")&&t.datetimepicker("setStartDate","1989-01"),s&&"endDate"==t.attr("name")&&(""==t.val()&&""==t.closest(".form-row").find(".date-range").eq(0).val()?t.datetimepicker("setStartDate","1990-01"):t.datetimepicker("setStartDate",t.closest(".form-row").find(".date-range").eq(0).val())),t.parent().find(".prefix-minyear,.prefix-today").on("click",function(e){if(!$(".datetimepicker").eq(i).is(":visible"))return setTimeout(function(){t.datetimepicker("show")},1),!1;t.datetimepicker("hide")}),t.on("click",function(){$(".workstartpicker-wrap").hide().removeClass("month-panel")})})}t.find(".ipt-workyear").length&&t.find(".ipt-workyear").workstartpicker(),t.find(".start-salary").on("click","li",function(){FormsUI.changeSalary($(this).attr("data-val"))}),t.find(".select-industry .industry-cells").on("click","span",function(){var e=$(this).closest("dd");if($(this).hasClass("selected"))$(this).removeClass("selected"),e.find(".select-industry .industry-title h3").removeClass("red"),e.find(".select-industry .industry-title p.gray").removeClass("red").text("最多可选 3 个技能标签");else{if(e.find(".select-industry .industry-cells .selected").length>2)return e.find(".select-industry .industry-title h3").addClass("red"),void e.find(".select-industry .industry-title p.gray").addClass("red").text("最多可选 3 个技能标签");$(this).addClass("selected")}}),t.find(".select-industry .industry-title").on("click",".btn",function(e){e.preventDefault();var t=$(this).closest("dd"),i=t.find(".industry-title .ipt"),n=!1;if("确定"==$(this).text()){var s=[],o=[];t.find(".select-industry .industry-cells .selected").each(function(){s.push($(this).text()),o.push($(this).attr("data-val")||$(this).text())}),s.length||(s.push("不限"),o.push("0")),t.find(".select-industry").closest("dd").find(".dropdown-select .ipt").val(s.join("·")),t.find(".select-industry").closest("dd").find('.dropdown-select input[type="hidden"]').val(o.join("·")),t.find(".select-industry").closest("dd").find(".dropdown-select").removeClass("dropdown-select-open"),t.find(".select-industry").closest("dd").find(".dropdown-menu").removeClass("dropdown-menu-open")}else if("取消"==$(this).text())t.find(".select-industry").closest("dd").find(".dropdown-select").removeClass("dropdown-select-open"),t.find(".select-industry").closest("dd").find(".dropdown-menu").removeClass("dropdown-menu-open");else if($(this).hasClass("btn-addtag")){var a=Validate.getLength(i.val()),r=t.find(".select-industry .industry-title p.gray");if(""==i.val().replace(/(\s*$)/g,""))return r.text("请输入标签名称").addClass("red"),void i.val("");if(a>6)return void r.text("请输入不超过6个字的标签名称").addClass("red");if(t.find(".select-industry .industry-cells span").each(function(){if($(this).text()==i.val())return void(n=!0);n=!1}),n)r.addClass("red").text("该标签已存在");else{if(t.find(".industry-cells .blank-tag").remove(),r.text("最多可选 3 个技能标签"),t.find(".select-industry .industry-cells .selected").length>2)return void r.addClass("red");r.removeClass("red"),t.find(".industry-cells").prepend('<span class="selected">'+i.val()+"</span>"),i.val("")}}}),t.find(".ipt-autocomplete").on("input keyup",function(){var e=$(this);FormsUI.suggestTimer&&clearTimeout(FormsUI.suggestTimer),FormsUI.suggestTimer=setTimeout(function(){e.parent().find('input[type="hidden"]').val(""),FormsUI.getSuggest(e)},200)}),t.find(".suggest-complete").on("click","li",function(){FormsUI.setSuggest($(this))}),FormsUI.initIndustry(t)},initIndustry:function(e){var t=e.find("input[name=industryStr]").length?e.find("input[name=industryStr]"):e.find("input[name=industryCategory]"),i=e.find("input[name=industryCodes]").length?e.find("input[name=industryCodes]"):e.find("input[name=industryCode]");if(t.length){var n=[],s=t.val().split("·"),o=i.val().split("·");$.each(o,function(e,t){n.push({name:s[e],code:o[e]})}),t.industry({multiple:!e.find("input[name=industryCategory]").length}).data("selected",n).on("selected.industry",function(e,n){var s=[],o=[];$.isArray(n)?($.each(n,function(e,t){s.push(t.name),o.push(t.code)}),t.val(s.join("·")),i.val(o.join("·"))):(t.val(n.name),i.val(n.code))})}},prettyRadio:function(e){var e=e||$(document);e&&e.find(".radio-list").each(function(){var e=$(this),t=e.find('input[type="hidden"]');e.on("click","label",function(){e.find("label").removeClass("radio-checked"),$(this).addClass("radio-checked"),t.val($(this).attr("data-val"))})})},dropSelect:function(e){function t(e,t,i){if(t.hasClass("ipt-range")&&"start"==t.attr("data-range")){var n=t.closest(".form-row"),s=t.closest("dd").find(".dropdown-menu ul"),o=s.find("li").last().attr("data-val"),a=n.find('.ipt-range[data-range="end"]'),r=a.parent().find('input[type="hidden"]'),l=a.closest("dd").find(".dropdown-menu ul"),c=e.attr("data-val")||e.val(),d='<li data-val="-1">至今</li>',h=(new Date).getFullYear(),u=parseInt(c)+4;s.find("li").each(function(){$(this).attr("data-val")>c&&c!=h&&$(this).attr("data-val")!=o&&(d+=$(this).prop("outerHTML"))}),l.html(d),i||(u<h?(a.val(u),r.val(u)):(a.val(l.find("li").eq(0).text()),r.val(l.find("li").eq(0).attr("data-val"))))}}var e=e||$(document);e&&(e.find(".dropdown-select").each(function(){var i=$(this),n=i.find('.ipt-range[data-range="start"]'),s=i.find('input[name="highSalary"]');i.on("click",function(){$(this).hasClass("dropdown-disabled")||($(this).hasClass("dropdown-select-open")||(e.find(".dropdown-select-open").removeClass("dropdown-select-open"),e.find(".dropdown-menu-open").removeClass("dropdown-menu-open")),$(this).toggleClass("dropdown-select-open"),i.next(".dropdown-menu").toggleClass("dropdown-menu-open"))}),i.find('.ipt-range[data-range="end"]')&&t(n,n,!0),""==s.val()&&(s.closest(".dropdown-select").addClass("dropdown-disabled"),s.closest(".dropdown-select").find(".ipt").attr("disabled","disabled")),s.length&&""!=s.val()&&("请选择"==s.val()?s.parent().hide():(s.val(s.parent().find(".ipt").val()),FormsUI.changeSalary(s.closest("dd").find('input[name="lowSalary"]').val().replace("K",""),!0)))}),e.find(".dropdown-menu").each(function(){var i=$(this),n=i.prev(".dropdown-select"),s=n.find("input[readonly]"),o=n.find('input[type="hidden"]'),a=i.find(".select-tree"),r=i.find(".tags-cells");a.length&&(3==a.attr("data-level")&&a.html('<ul class="tree-1"></ul><ul class="tree-2"></ul><ul class="tree-3"></ul>'),2==a.attr("data-level")&&a.html('<ul class="tree-1"></ul><ul class="tree-2"></ul>'),FormsUI.getTreeData(a,jobData)),r.length&&void 0!==Resume&&Resume.getTag(e,!0),i.on("click","li",function(){if($(this).closest(".select-tree").length){var e=$(this).closest(".select-tree").attr("data-level");if($(this).parent().find("li").removeClass("selected"),$(this).addClass("selected"),3==e){if($(this).closest(".tree-1").length)return $(this).closest(".select-tree").find(".tree-3").hide(),FormsUI.getTreeData(a,jobData,$(this).attr("data-id")),!1;if($(this).closest(".tree-2").length)return $(this).closest(".select-tree").find(".tree-3").show(),o.attr("level2",$(this).attr("data-id")),FormsUI.getTreeData(a,jobData,$(this).closest(".select-tree").find(".tree-1 .selected").attr("data-id"),$(this).attr("data-id")),!1}if(2==e){if($(this).closest(".tree-1").length)return $(this).closest(".select-tree").find(".tree-3").hide(),FormsUI.getTreeData(a,jobData,$(this).attr("data-id")),!1;if($(this).closest(".tree-2").length)return $(this).closest(".select-tree").find(".tree-3").show(),o.attr("level2",$(this).attr("data-id")),FormsUI.getTreeData(a,jobData,$(this).closest(".select-tree").find(".tree-1 .selected").attr("data-id"),$(this).attr("data-id")),!1}}if(t($(this),s),s.val($(this).text()),o.val($(this).attr("data-val")),o.closest("dd").find(".tip-text").remove(),i.removeClass("dropdown-menu-open"),n.removeClass("dropdown-select-open"),"position"==o.attr("name")){var r=$(this).closest(".form-resume").find(".select-tags");r.closest("dd").find(".ipt").val(""),r.closest("dd").find('input[type="hidden"]').val(""),Resume.getTag(r.closest(".form-resume"))}if("position"==o.attr("name")&&$(this).closest(".form-work")){var r=$(this).closest(".form-work").find(".select-tags");r.closest("dd").find(".ipt").val(""),r.closest("dd").find('input[type="hidden"]').val(""),Resume.getTag(r.closest(".form-work"))}})}),$(document).on("click",function(t){$(t.target).closest(".dropdown-menu").length||$(t.target).closest(".dropdown-select").length||(e.find(".dropdown-select").removeClass("dropdown-select-open"),e.find(".dropdown-menu").removeClass("dropdown-menu-open"))}))},getTreeData:function(e,t,i,n){var s,o,a,r="",l="",c="";for(s=0;s<t.length;s++){var d=t[s].children;if(r+='<li data-id="'+t[s].id+'">'+t[s].name+"</li>",d&&i&&t[s].id==i)for(o=0;o<d.length;o++){var h=d[o].children;if(l+='<li data-id="'+d[o].id+'">'+d[o].name+"</li>",h&&n&&d[o].id==n)for(a=0;a<h.length;a++)c+='<li data-val="'+h[a].id+'">'+h[a].name+"</li>"}}i||(e.find(".tree-1").html(r),e.find(".tree-2").html('<li class="blank">选择职类</li>')),n?e.find(".tree-3").html(c):i&&e.find(".tree-2").html(l)},changeSalary:function(e,t){var i=$(".end-salary"),n=i.find(".ipt"),s=i.find('input[type="hidden"]'),o=i.find("ul"),e=e,a=0;if(e&&(n.closest(".dropdown-select").removeClass("dropdown-disabled"),n.removeAttr("disabled")),"面议"==e?(n.val("面议").parent().hide(),s.val("面议")):(e=parseInt(e,10),n.val(n.val()+"K").parent().show()),e<=50){t||(n.val(e+1+"K"),s.val(e+1)),o.html("");for(var r=e+1;r<=2*e;r++){var l="";l+='<li data-val="'+r+'">'+r+"K</li>",$(l).appendTo(o)}}if(e>50&&e<260){t||(n.val(e+10+"K"),s.val(e+10)),o.html(""),a=e<160?e+50:2*e,a>200&&(a=260);for(var r=e+10;r<=a;r+=10){var l="";l+='<li data-val="'+r+'">'+r+"K</li>",$(l).appendTo(o)}}},getSuggest:function(el){var el=el,url=el.attr("data-url"),keyword=el.val(),resultPannel=el.parent().find(".suggest-complete");if(""==keyword)return void resultPannel.removeClass("dropdown-menu-open");resultPannel.html("<ul></ul>").addClass("dropdown-menu");var resultCon=resultPannel.find("ul");$.ajax({type:"POST",url:url,dataType:"JSON",data:{query:keyword},success:function(result){var result=result.data,str="",i;if("string"==typeof result&&(result=eval("("+result+")")),result&&result.length){for(i=0;i<result.length;i++)str+='<li data-val="'+result[i].code+'">'+result[i].hlname+"</li>";resultCon.html(str),resultPannel.addClass("dropdown-menu-open")}},error:function(e){}})},setSuggest:function(e){var t=e.closest("dd").find(".ipt"),i=e.closest("dd").find('input[name="location"]');t.val(e.text()),i.val(e.attr("data-val")),e.closest(".suggest-complete").removeClass("dropdown-menu-open"),t.parent().find(".tip-text").remove()}};$(function(){($(".resume").length||$(".job-detail").length)&&FormsUI.init()});var ResumeEditor={init:function(){}},Resume={previewUrl:null,attachmentName:null,ownerTags:[],init:function(){if($("#pop-resume").length){if($("#pop-resume .pop-success .content").css({background:"none","overflow-y":"auto","overflow-x":"hidden"}),$(".resume-loading").hide(),$("#pop-resume .pop-item .content").height($(window).height()-200),$("#pop-resume .pop-success .content").height($(window).height()-100),$("#pop-resume .pop-resume-close").on("click",function(){Resume.removePopResume(),$(".preview-refresh").parent().show(),$(".resume-loading").hide()}),$(".btn-confim").on("click",function(){Resume.stateChange(),Resume.saveResume(),Resume.removePopResume()}),$(".btn-change , .upload-again").on("click",function(){Resume.removePopResume(),$(".jconfirm-bg").show(),$("#fileupload").click(),$(".preview-refresh").parent().show(),$(".resume-loading").hide()}),$(".preview-refresh").click(function(e){$(this).parent().hide(),$(".resume-loading").show(),Resume.loadResumeImg("/resume/pic4Owner/"+Resume.previewUrl)}),0!=$(".progress-score").length){var e=$(".progress-score").text();$(".progress p").css("width",e)}Resume.canSubmit=!1,$(".resume-item").on("click",".link-add, .link-edit",function(e){Resume.getData($(this)),e.preventDefault()}),$(".resume-item").on("click",".link-delete",function(e){Resume.removeData($(this)),e.preventDefault()}),$(".resume-nav .link-edit").on("click",function(e){var t=$(this).attr("data-target");Resume.getData($("#"+t).find(".link-edit")),e.preventDefault()}),$(".resume-nav .link-add").on("click",function(e){var t=$(this).attr("data-target");Resume.getData($("#"+t).find(".link-add")),e.preventDefault()}),$(".prv-view-btn").on("click",function(){$(".pre-view-box iframe").attr("src",$(".pre-view-box iframe").attr("src")),$("body").css("overflow","hidden");var e=document.getElementById("previewIframe").contentWindow.document.body;$(e).hide(),$.toast({type:"loading",content:"加载中"}),$(".pre-view-box").show(),$(".pre-view-box iframe").load(function(){setTimeout(function(){$("#toast").remove()},500)})}),$(".pre-view-box .close").on("click",function(){$(".pre-view-box").hide(),$("body").css("overflow","visible")}),$("#fileupload").length&&Resume.setUpload(),Resume.deleteFile(),$(".figure .upload-layer").on("click",function(){}),$(".btn-upload-file").hover(function(){$(".file-result").css("background","#eee")},function(){$(".file-result").css("background","#f7f7f7")}),"undefined"!=typeof editItem&&(1==editItem?$(".fz-positon").parent().find(".link-add").click():2==editItem&&$(".fz-info").parent().find(".link-edit").click())}},getTag:function(e,t){var i=e,n=i.find(".tags-cells"),s="",o="",a=(n.closest("dd").find(".ipt"),i.find('input[name="position"]').attr("level2"));a&&$.ajax({type:"GET",url:" /common/data/positionSkill",dataType:"JSON",data:{positonLv2:a},success:function(e){var i,e=e,a="",r=n.closest("dd").find(".ipt").val().split("·"),l=[];if(e.length>0){for(i=0;i<e.length;i++)a=$.inArray(e[i],r)>-1?' class="selected"':"",o+="<span"+a+' ka="tag-'+e[i]+'">'+e[i]+"</span>",l.push(e[i]);if(t)for(var c=0;c<r.length;c++)$.inArray(r[c],l)==-1&&(Resume.ownerTags.push(r[c]),s+='<span class="selected" ka="tag-'+r[c]+'">'+r[c]+"</span>")}else o='<div class="blank-tag">还未添加标签</div>';n.html(s+o)},error:function(e){}})},getData:function(el){var el=el,url=el.attr("data-url"),formCon=el.closest(".resume-item").find(".item-form");$(".resume-item").removeClass("resume-item-open"),$.ajax({type:"POST",url:url,dataType:"JSON",data:null,success:function(result){var result=result;if("string"==typeof result&&(result=eval("("+result+")")),1==result.rescode){formCon.html(result.html),el.closest(".resume-item").addClass("resume-item-open"),formCon.find(".form-btns .btn-back").on("click",function(){el.closest(".resume-item").removeClass("resume-item-open"),$("html,body").animate({scrollTop:el.closest(".resume-item").offset().top+"px"},500)}),formCon.find(".form-btns .btn-delete").unbind("click").on("click",function(e){Resume.removeData(el,$(this)),e.preventDefault()});var isAdd=!1;if(!result.resoper)var isAdd=!0;FormsUI.init(formCon.find("form"),isAdd),Validate.init(formCon.find("form"),isAdd),PlaceholderCheck.init(formCon.find("form"))}else Resume.showError(result.resmsg);$("html,body").animate({scrollTop:el.closest(".resume-item").offset().top+"px"},500),$(".ipt-workyear").length&&$(".ipt-workyear").workstartpicker()},error:function(e){Resume.showError()}})},postData:function(form,isAdd){var formEl=form,url=formEl.attr("action"),primaryWrap=formEl.closest(".resume-item"),primaryCon=primaryWrap.find(".item-primary"),primaryModule=primaryWrap.attr("id");formEl.find(".show-prefix-today").length&&(formEl.find('input[name="endDate"]').val(""),formEl.find('input[name="now"]').val("1"));var subData=formEl.serialize();$("input[name=birthday]").length&&$("input[name=birthday]").is(":disabled")&&(subData+="&birthday="+$("input[name=birthday]").val()),$.ajax({type:"POST",url:url,dataType:"JSON",data:subData,success:function(result){var result=result,str="",resultId="",itemEl;if("string"==typeof result&&(result=eval("("+result+")")),result.forceFace&&(alert("您的账号当前处于不可使用状态，请登录BOSS直聘手机APP查看详情"),window.location.href="/logout/"),1==result.rescode){if(primaryWrap.removeClass("resume-item-open"),str=result.html,resultId=$(str).attr("id"),"resume-userinfo"==primaryModule&&(result.isAudit&&$.confirm({content:'<div class="tip-alert" style="font-size:14px;">修改已提交审核，审核通过后，将更新您的信息</div>',title:"温馨提示",closeIcon:!0,confirmButton:"确定",cancelButton:!1,columnClass:"pop-tip-box pop-tip",onOpen:function(){this.$confirmButton.parent().css({"text-align":"center","padding-right":"0px"}),this.$confirmButton.css("float","none")}}),primaryCon.find(".name").remove(),primaryCon.find(".info-labels").remove(),primaryCon.append(str)),"resume-summary"==primaryModule&&(primaryCon.find(".text").remove(),primaryCon.append(str)),"resume-purpose"==primaryModule&&(primaryWrap.find('div[id="'+resultId+'"]').length?primaryWrap.find('div[id="'+resultId+'"]').after(str).remove():primaryCon.find(".info-labels").prepend(str)),"resume-history"==primaryModule||"resume-project"==primaryModule||"resume-education"==primaryModule){var items,titleEl=primaryCon.find(".title"),loadEl="";"resume-history"==primaryModule&&(loadEl="history-project"),"resume-project"==primaryModule&&(loadEl="history-project"),"resume-education"==primaryModule&&(loadEl="history-education"),isAdd?primaryCon.find("."+loadEl).prepend(result.html):primaryCon.find('div[id="'+resultId+'"]').replaceWith(result.html),"resume-education"==primaryModule&&(items=$("#resume-education").find(".item-primary .history-education .history-item"),1==items.length?items.find(".op .vline,.op .link-delete").hide():items.length>1&&items.find(".op .vline,.op .link-delete").show())}"resume-social"==primaryModule&&(primaryCon.find('div[id="'+resultId+'"]').length?primaryCon.find('div[id="'+resultId+'"]').after(str).remove():primaryCon.find(".social-account").prepend(str)),$("html,body").animate({scrollTop:formEl.closest(".resume-item").offset().top+"px"},500)}else result.bizcode?1156==result.bizcode?Resume.showError("工作经历数量已达上限，可删除部分经历再添加"):1157==result.bizcode?Resume.showError("教育经历数量已达上限，可删除部分经历再添加"):1158==result.bizcode&&Resume.showError("项目经验数量已达上限，可删除部分经历再添加"):Resume.showError(result.resmsg);Resume.canSubmit=!0},error:function(){Resume.canSubmit=!0,Resume.showError()}}),Resume.canSubmit=!1},removeData:function(el,btn){var el=el,url=el.attr("data-url"),primaryWrap=el.closest(".resume-item"),primaryCon=primaryWrap.find(".item-primary"),primaryModule=primaryWrap.attr("id"),formCon=el.closest(".resume-item").find(".item-form");btn&&(url=btn.attr("data-url")),$.confirm({content:'<div class="tip-alert">删除后不可恢复，确认删除吗？</div>',title:"温馨提示",closeIcon:!0,columnClass:"pop-tip-box pop-tip",confirm:function(){var _self=this;return $.ajax({type:"POST",url:url,dataType:"JSON",data:{},success:function(result){var result=result;if("string"==typeof result&&(result=eval("("+result+")")),result.rescode){if(el.closest(".resume-item").removeClass("resume-item-open"),"resume-purpose"==primaryModule&&el.parent().parent().remove(),"resume-history"==primaryModule||"resume-project"==primaryModule||"resume-education"==primaryModule){var closeParent=el.closest(".item-primary");el.closest(".history-item").remove(),"resume-project"!=primaryModule&&(1==closeParent.find(".history-item").length?(closeParent.find(".history-item .op .link-delete").hide(),closeParent.find(".history-item .op .vline").hide()):(closeParent.find(".history-item .op .link-delete").show(),closeParent.find(".history-item .op .vline").show()))}"resume-social"==primaryModule&&el.closest(".account-item").remove(),
$("html,body").animate({scrollTop:primaryWrap.closest(".resume-item").offset().top+"px"},500)}else Resume.showError(result.resmsg);_self.close()}}),!1},error:function(){Resume.showError()}})},showError:function(e){if(!e)var e="服务器错误，请稍后再试";$.confirm({content:'<div class="tip-alert">'+e+"</div>",title:"温馨提示",closeIcon:!0,confirmButton:"确定",cancelButton:!1,columnClass:"pop-tip-box pop-tip"})},showPopResume:function(e){var t=$("#pop-resume .pop-item");$("#pop-resume").show(),t.hide(),t.eq(e).show(),$("body").css("overflow-y","hidden"),$(".jconfirm-bg").hide()},removePopResume:function(){$("#pop-resume").hide(),$("body").css("overflow-y","visible")},stateChange:function(){$(".upload").remove(),Resume.reLoadResume=!1,0==$(".file-name").length?($(".resume-attachment").first().append('<div class="loadresume"><span class="file-name">'+Resume.attachmentName+"</span></div>"),$(".resume-attachment").first().find("h3").append('<div class="resume-menu">\n                                <i></i><i></i><i></i>\n                                <div class="resume-menu-box">\n                                    <div class="menu-btn">\n                                        <div class="upload-op">\n                                            <i class="change">更新</i>\n                                            <a class="btn-upload-file"><input id="fileupload" type="file" name="file" accept="image/jpeg,image/png,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"></a>\n                                        </div>\n                                    </div>\n                                    <div class="menu-btn">\n                                        <a href="/resume/geek/download4web" ka="user-resume-download-submit">下载</a>\n                                    </div>\n                                    <div class="menu-btn">\n                                        <i class="resume-del">删除</i>\n                                    </div>\n                                </div>\n                            </div>')):$(".file-name").text(Resume.attachmentName),$(".jconfirm-bg").show(),$(".deliver-pop .btns .btn").eq(0).text("确定"),$(".deliver-pop .btns .file").remove()},isImgLoad:function(){$(".pop-success .content img").each(function(){$(this).load(function(){$(".preview-refresh").parent().show(),$(".resume-loading").hide(),Resume.showPopResume(1)}),$(this).error(function(){Resume.showPopResume(3)})})},setUpload:function(){var url="/geek/attresume/upload.json",elProgress=$(".progress"),typeRule=/(\.|\/)(ppt|pptx|doc|docx|pdf|png|jpg|jpeg)$/i,maxSize=1e7;$(".resume-attachment,.deliver-pop").on("click","#fileupload",function(){$(this).blur(),$("#fileupload").fileupload({type:"POST",url:"/geek/attresume/upload.json",dataType:"text",acceptFileTypes:typeRule,maxFileSize:1e7,add:function(e,t){var i=t.files[0],n=i.name;$(".resume-title").text(n),typeRule.test(n)?(Resume.reLoadResume=!1,t.submit(),Resume.showPopResume(0)):alert("请选择有效的文件")},done:function(e,data){var result=data.result;"string"==typeof result&&(result=eval("("+result+")")),1==result.rescode?(Resume.previewUrl=result.previewUrl,Resume.loadResumeImg("/resume/pic4Owner/"+result.previewUrl),Resume.attachmentName=result.attachmentName):Resume.showPopResume(2)},fail:function(e,t){Resume.showPopResume(2)}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled")}),$(".resume-attachment").trigger("click")},saveResume:function(){$.ajax({type:"POST",url:"/geek/attresume/save.json?previewUrl="+Resume.previewUrl,dataType:"JSON",data:{},success:function(e){1==e.rescode||alert(e.resmsg)}})},loadResumeImg:function(e){var t=new Image;t.src=e,t.onload=function(){Resume.consoleSuccessLog(),$(".pop-success .content").html('<img src="'+e+'" />'),$(".pop-success .content img").css({display:"block",width:"810px",margin:"0 auto"}),$(".preview-refresh").parent().show(),$(".resume-loading").hide(),$(".pop-success .content .msg").hide(),$(".pop-success .content .resume-loading").hide(),Resume.showPopResume(1)},t.onerror=function(){Resume.reLoadResume&&(Resume.showPopResume(3),Resume.consoleLog(),$(".preview-fail .content .msg").show(),$(".preview-fail .content .resume-loading").hide()),Resume.reLoadResume||(Resume.loadResumeImg(e),Resume.reLoadResume=!0)}},consoleLog:function(){$.ajax({type:"POST",url:"/actionLog/previewFail.json",dataType:"JSON",data:{previewUrl:Resume.previewUrl},success:function(e){}})},consoleSuccessLog:function(){$.ajax({type:"POST",url:"/actionLog/previewSuccess.json",dataType:"JSON",data:{previewUrl:Resume.previewUrl},success:function(e){}})},deleteFile:function(){$(".resume-attachment").delegate(".resume-del","click",function(){$.confirm({content:'<div class="tip-alert">确认删除该附件简历吗？</div>',title:"温馨提示",closeIcon:!0,columnClass:"pop-tip-box pop-tip",confirm:function(){var e=this;$.ajax({type:"POST",url:"/geek/attresume/delete.json",dataType:"JSON",data:{},success:function(t){1==t.rescode&&($(".resume-attachment").first().find(".loadresume").remove(),$(".resume-attachment").first().find("h3").find(".resume-menu").remove(),$(".resume-attachment").first().append('<div class="upload"><div class="file-result">上传附件简历</div><div class="file-btn"><a class="btn-upload-file"><input id="fileupload" type="file" name="file" ka="user-resume-upload-file"></a></div><div class="file-tip"><p>支持doc，docx，pdf，jpg，png格式附件，文件大小不超过10M</p></div></div>')),e.close()}});try{_T.sendEvent("user-resume-delete-submit")}catch(e){}return!1},cancel:function(){try{_T.sendEvent("user-resume-delete-cancel")}catch(e){}},error:function(){Resume.showError()}})})}};$(function(){($(".resume").length||$(".job-detail").length)&&Resume.init()});var Guide={init:function(){$(".guide .container form").each(function(){FormsUI.init($(this)),""!=$(this).find(".required").val()?Validate.init($(this),!1,!0):Validate.init($(this),!0,!0)}),$(".position-info .center span").text(this.setBossCount),Guide.showExperance=!0,$(".btn-footer .prev").on("click",function(){Guide.showPrevForms($(this))})},__conversion:function(e){try{_T.sendEvent(e)}catch(e){}},setBossCount:function(){return Math.round(4e3*Math.random()+1e3)},showPrevForms:function(e){"show"==e.attr("data-base")?(e.parents(".info-box").addClass("hide").siblings(".base-info").removeClass("hide"),e.attr("data-base","")):e.parents(".info-box").addClass("hide").prev(".info-box").removeClass("hide")},postData:function(form,isAdd){var formEl=form,formWrap=formEl.parents(".info-box"),formIndex=formWrap.index(),url=formEl.attr("action"),btnEl=formEl.find('.btn[type="submit"]'),oldText=btnEl.text();btnEl.addClass("btn-disabled").text("请稍后").css("pointer-events","none");var ka="complete-"+formEl.find('button[type="submit"]').attr("ka");formEl.find('input[name="startWorkYearCode"]').length&&0==formEl.find('input[name="startWorkYearCode"]').val()&&(Guide.showExperance=!1);var subData=formEl.serialize();$("input[name=birthday]").length&&$("input[name=birthday]").is(":disabled")&&(subData+="&birthday="+$("input[name=birthday]").val()),$.ajax({type:"POST",url:url,dataType:"JSON",data:subData,success:function(result){"string"==typeof result&&(result=eval("("+result+")")),result.forceFace&&(alert("您的账号当前处于不可使用状态，请登录BOSS直聘手机APP查看详情"),window.location.href="/logout/"),1==result.rescode?(Guide.__conversion(ka),result.toUrl?($.toast({content:"资料已完善",type:"success"}),setTimeout(function(){window.location.href=result.toUrl},1e3)):Guide.showExperance?(formWrap.addClass("hide"),formWrap.next().removeClass("hide")):(formWrap.addClass("hide"),formWrap.siblings(".education-info").removeClass("hide"),formWrap.siblings(".education-info").find(".prev").attr("data-base","show"),Guide.showExperance=!0),result.encryptId&&(formEl.find('input[name ="id"]').length?formEl.find('input[name ="id"]').val(result.encryptId):formEl.find('input[name ="expectedJobId"]').val(result.encryptId))):Resume.showError(result.resmsg),btnEl.removeClass("btn-disabled").text(oldText).css("pointer-events","auto")},error:function(){Resume.showError(),btnEl.removeClass("btn-disabled").text(oldText).css("pointer-events","auto")}})}};$(function(){Guide.init()});var browser={versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")==-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")==-1,weixin:e.indexOf("MicroMessenger")>-1,qq:" qq"==e.match(/\sQQ/i)}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},ka_pr="";(browser.versions.mobile||browser.versions.android||browser.versions.ios)&&(ka_pr="wap_");var Sign={init:function(e){e&&void 0!==PlaceholderCheck&&PlaceholderCheck.init(),void 0!==localStorageInstance&&localStorageInstance("hasEnterJob","");var t=e||$(".sign-wrap");Sign.source=getQueryString("s"),Sign.source&&(Sign.directUrls={recharge:"/weixin/official/toPay",actRecharge:"/special3SignUp/home?signUpId="+getQueryString("signUpId"),wapSem:"/",url:getQueryString("jumpUrl")?decodeURIComponent(getQueryString("jumpUrl")):"/"}),function(){$(".sign-scan .qrcode-box").length&&($(".scan-help-down li").eq(1).hide(),$(".scan-help-top li").eq(0).css({"border-top-left-radius":"20px","border-bottom-left-radius":"20px"}),$(".scan-help-top li").eq(1).css({"border-top-right-radius":"20px","border-bottom-right-radius":"20px"}),$(".sign-scan .qrcode-box").hover(function(){$(this).children(".sign-scan-help").show().stop().animate({"margin-left":"0px",opacity:1},200)},function(){var e=$(this).children(".sign-scan-help");$(this).children(".sign-scan-help").stop().animate({"margin-left":"-10px",opacity:0},200,function(){e.hide()})})),$(".sign-scan .scan-help-top ul li").on("click",function(){var e=$(this).index();$(this).addClass("active").siblings().removeClass("active"),$(".scan-help-down li").eq(e).show().siblings().hide()})}(),t.find(".sign-tab").on("click","span",function(){var e=$(this);e.hasClass("cur")||(e.hasClass("link-signin")&&Sign.showPannel(t,"signin"),e.hasClass("link-sms")&&Sign.showPannel(t,"sms"),e.hasClass("link-scan")&&Sign.showPannel(t,"scan"))}),t.find(".purpose-row").on("click","span",function(){var e=$(this).index();$(this).closest("form").find('input[name="purpose"]').val(e),$(this).addClass("cur").siblings().removeClass("cur")}),t.find(".text-tip .link-signup").on("click",function(){Sign.showPannel(t,"register")}),t.find(".text-tip .link-signin").on("click",function(){Sign.showPannel(t,"signin")}),t.find(".text-tip .link-sms").on("click",function(){Sign.showPannel(t,"sms")}),Sign.dropSelect(t),t.find("form").on("submit",function(e){Sign.checkForm($(this)),e.preventDefault()}),t.find(".btn-sms").on("click",function(){var e=$(this).closest("form");Sign.checkForm(e,!0)}),t.find(".ipt").on("focus",function(e){$(this).parent().addClass("focus-wrap")}).on("blur",function(){$(this).parent().removeClass("focus-wrap")}),t.find(".ipt-phone").removeAttr("ka").on("click",function(){try{_T.sendEvent(ka_pr+$(this).closest(".sign-form").data("flow")+"_mobileck")}catch(e){}}),t.find(".verifyimg").on("click",function(){$(this).attr("src","/captcha/?randomKey="+$(this).closest(".form-row").find(".randomkey").val()+"&_r="+(new Date).getTime());try{_T.sendEvent("signin_verify_code")}catch(e){}}),t.find(".sign-form").each(function(){$(this).find("form").length&&!$(this).find('form input[name="pk"]').length&&$(this).find("form").prepend('<input type="hidden" name="pk" value="'+$("#page_key_name").val()+'" />');var e="";if($(this).hasClass("sign-pwd")&&(e="sincode"),$(this).hasClass("sign-sms")&&(e="sinsms"),$(this).hasClass("sign-scan")&&(e="sinqr"),$(this).hasClass("sign-register")&&(e="sup"),$(this).data("flow",ka_pr+e),$(this).is(":visible"))try{_T.sendEvent(e+"_load")}catch(e){}if($(this).find(".randomkey").length&&""==$(this).find(".randomkey").val())return Sign.getRandomkey(t,$(this)),!1}),$(".invalid-box .btn").on("click",function(){$(".invalid-box").hide(),Sign.scanPending(e),Sign.scanValid()}),$(".sign-scan").is(":visible")&&(Sign.scanPending(t),Sign.scanValid()),cookie.get("hasShowLoginTip")?t.find(".qrcode-tip").hide():t.find(".qrcode-tip").show(),t.find(".qrcode-tip .gray").on("click",function(){t.find(".qrcode-tip").hide(),cookie.set("hasShowLoginTip","1",3e4)})},showPannel:function(e,t){e.find(".sign-form").hide();var i,n;switch(t){case"signin":i=e.find(".sign-pwd"),n="sincodeck";break;case"sms":i=e.find(".sign-sms"),n="sinsmsck";break;case"scan":i=e.find(".sign-scan"),n="sinqrck";break;case"register":i=e.find(".sign-register"),n="supck";break;case"welcome":i=e.find(".sign-welcome");break;case"history":i=e.find(".sign-history");break;case"deliver":i=e.find(".sign-deliver");break;case"validate":i=e.find(".sign-validate")}if(n){i.data("flow",n);try{_T.sendEvent(ka_pr+n+"_load")}catch(e){}}i.show(),i.find(".verifyimg").click(),"scan"==t&&(Sign.scanPending(e),Sign.scanValid())},dropSelect:function(e){e.find(".dropdown-select").each(function(){$(this).on("click",function(){$(this).hasClass("dropdown-disabled")||($(this).toggleClass("dropdown-select-open"),$(this).closest(".form-row").find(".dropdown-menu").toggleClass("dropdown-menu-open"))})}),e.find(".dropdown-menu").each(function(){var e=$(this),t=e.closest(".form-row").find(".dropdown-select"),i=t.find(".text-select"),n=t.find('input[type="hidden"]');e.on("click","li",function(){i.text($(this).attr("data-val")),n.val($(this).attr("data-val")),n.closest("dd").find(".tip-text").remove(),e.removeClass("dropdown-menu-open"),t.removeClass("dropdown-select-open")})}),$(document).on("touchend click",function(t){$(t.target).closest(".dropdown-menu").length||$(t.target).closest(".dropdown-select").length||(e.find(".dropdown-select").removeClass("dropdown-select-open"),e.find(".dropdown-menu").removeClass("dropdown-menu-open"))})},getRandomkey:function(e,t){var t=t,i=t.find(".ipt-code"),n=i.attr("data-url"),s=t.find(".randomkey");""==s.val()&&$.ajax({url:n,type:"POST",dataType:"json",data:{pk:$("#page_key_name").val()},success:function(t){1==t.rescode&&(e.find(".randomkey").val(t.randomKey),s.parent().find(".verifyimg").click(),e.find(".sign-scan .qrcode-box img").attr("src","/qrcode/"+t.qrId),e.find(".uuid").val(t.qrId))},error:function(e){}})},checkForm:function(e,t){var e=e,i=e.find(".ipt-phone"),n=e.find('input[name="regionCode"]'),s=e.find(".ipt-pwd"),o=e.find(".ipt-code"),a=e.find(".ipt-sms"),r=(e.closest(".sign-form").find(".tip-error"),e.find(".agreement-tip input"));if(i.length){if(""==i.val()){Sign.showError(e,"请填写手机号"),i.focus();try{_T.sendEvent(i.closest(".sign-form").data("flow")+"_mobile")}catch(e){}return!1}if(/^\D+$/.test(i.val()))return i.val(""),!1;if("+86"==n.val()&&!/^(1[3456789][0-9]{9})$/.test(i.val())){Sign.showError(e,"请正确填写手机号"),i.focus();try{_T.sendEvent(i.closest(".sign-form").data("flow")+"_mobile")}catch(e){}return!1}if(!/^(\d{6,11})$/.test(i.val())){Sign.showError(e,"请正确填写手机号"),i.focus();try{_T.sendEvent(i.closest(".sign-form").data("flow")+"_mobile")}catch(e){}return!1}if(r.length&&!r.is(":checked"))return alert("请阅读并同意BOSS直聘用户协议，方可注册"),!1;Sign.hideError(e)}if(s.length){if(""==s.val())return Sign.showError(e,"请填写密码"),s.focus(),!1;Sign.hideError(e)}if(o.length){if(""==o.val())return Sign.showError(e,"请填写验证码"),o.focus(),!1;if(!o.val().match(/^.{4}$/))return Sign.showError(e,"请填写正确的验证码"),o.focus(),!1;if(o.val().match(/[\u4e00-\u9fa5]/))return Sign.showError(e,"请填写正确的验证码"),o.val(""),o.focus(),!1;Sign.hideError(e)}if(a.length&&!t){if(""==a.val())return Sign.showError(e,"请填写短信验证码"),a.focus(),!1;if(!a.val().match(/^.{4}$/))return Sign.showError(e,"请填写正确的短信验证码"),a.focus(),!1;if(a.val().match(/\D+/))return Sign.showError(e,"请填写正确的短信验证码"),a.val(""),a.focus(),!1;Sign.hideError(e)}Sign.postData(e,t)},postData:function(formEl,isSms){var formEl=formEl,formType=formEl.closest(".sign-form"),btnSms=formEl.find(".btn-sms"),url=formEl.attr("action"),btnEl=formEl.find(".form-btn .btn");if(isSms){if(btnSms.hasClass("btn-disabled"))return;url=btnSms.attr("data-url"),btnSms.addClass("btn-disabled").html("请稍后")}else{if(btnEl.hasClass("btn-disabled"))return;btnEl.addClass("btn-disabled")}$.ajax({url:url,type:"post",dataType:"json",data:formEl.serialize(),success:function(result){var result=result;if("string"==typeof result&&(result=eval("("+result+")")),1==result.rescode){if(formType.hasClass("sign-pwd")&&Sign.callbackPwd(formEl,result),formType.hasClass("sign-sms"))if(isSms)if(2==result.type){btnSms.html('已发送(<em class="num">60s</em>)').addClass("count-down btn-disabled"),Sign.countDown(btnSms,function(){btnSms.html("发送验证码").removeClass("count-down btn-disabled")}),btnSms.parent().find(".ipt-sms").focus();try{_T.sendEvent("signin_sms_send_sms")}catch(e){}}else Sign.showError(formEl,result.resmsg,!0),btnSms.html("发送验证码").removeClass("count-down btn-disabled");else Sign.callbackSms(formEl,result);if(formType.hasClass("sign-register"))if(isSms)if(2==result.type)Sign.showError(formEl,result.resmsg,!0),btnSms.html("发送验证码").removeClass("count-down btn-disabled");else{btnSms.html('已发送(<em class="num">60s</em>)').addClass("count-down btn-disabled"),Sign.countDown(btnSms,function(){btnSms.html("发送验证码").removeClass("count-down btn-disabled")}),btnSms.parent().find(".ipt-sms").focus(),formEl.append('<input type="hidden" name="rescode" value="1" />');try{_T.sendEvent("signin_register_send_sms")}catch(e){}}else Sign.callbackRegister(formEl,result)}else if(0==result.rescode){var option={content:result.resmsg,confirmButton:"知道了",openCallback:function(e){e.$confirmButton.parent().css("text-align","center")}};Sign.showConfirm(option),isSms&&btnSms.html("发送验证码").removeClass("btn-disabled"),formEl.find(".ipt-code").val(""),formEl.find(".verifyimg").click()}else if(7==result.rescode||8==result.rescode){if(7==result.rescode&&2==result.bizcode){var option={content:'<div class="sign-hunter-gray">如果您是猎头，请以您的企业邮箱发送邮件至hunter@kanzhun.com申诉。邮件标题为“猎头注册申诉+您的手机号码”。<br />若您的同事已经成功注册Boss直聘猎头版，请在邮件中提供TA的手机号，我们会优先审核。</div>',title:"此账号在BOSS直聘被多次举报，暂不支持使用",confirmButton:"知道了",columnClass:"pop-sign-hunter"};Sign.showConfirm(option)}else if(7!=result.rescode||3!=result.bizcode&&4!=result.bizcode)if(7==result.rescode&&5==result.bizcode){var option={content:'<div class="sign-hunter-gray">如果您是猎头，请以您的企业邮箱发送邮件至hunter@kanzhun.com申诉。邮件标题为“猎头注册申诉+您的手机号码”。<br />若您的同事已经成功注册Boss直聘猎头版，请在邮件中提供TA的手机号，我们会优先审核。</div>',title:"此账号在BOSS直聘被多次举报，暂不支持使用",confirmButton:"知道了",columnClass:"pop-sign-hunter"};Sign.showConfirm(option)}else{var option={content:result.resmsg,confirmButton:"知道了",openCallback:function(e){e.$confirmButton.parent().css("text-align","center")}};Sign.showConfirm(option)}else{var option={content:'<div class="sign-hunter-gray">您的BOSS直聘账户中有未使用的道具，或钱包中有零钱，切换为猎头身份后将无法使用。<br />请先登录APP将付费产品消耗或提现零钱，再重新登录猎头端。</div>',title:"请您先清空付费产品或提现零钱",confirmButton:"知道了",columnClass:"pop-sign-hunter"};Sign.showConfirm(option)}isSms&&btnSms.html("发送验证码").removeClass("btn-disabled"),formEl.find(".ipt-code").val(""),formEl.find(".verifyimg").click()}else if(9==result.rescode){if(1==result.bizcode||0==result.bizcode){var option={content:'<p>您当前身份为BOSS，是否切换为猎头？</p><ul class="pop-content"><li>为牛人服务，严禁猎头冒充BOSS</li><li>切换为猎头身份后，您将获得BOSS直聘的高端牛人简历，享有更具竞争力的猎头会员服务。</li><li>猎头身份生效后，您不能以BOSS身份登录APP</li></ul>',title:"您将要切换为猎头身份",cancelButton:"取消",confirmButton:"切换为猎头",columnClass:"pop-sign-hunter",openCallback:function(e){e.$confirmButton.parent().css("text-align","center")},confirmCallback:function(){window.location.href="/user/transto/headhunter.html?token="+result.token},cancelCallback:function(){window.location.href="https://www.zhipin.com/logoutToUrl/?toUrl=https://lie.zhipin.com"}};Sign.showConfirm(option)}else if(7==result.bizcode){var option={content:'<p>您当前系统身份为牛人，是否切换为猎头？</p><ul class="pop-content"><li>切换为猎头身份后，您将获得BOSS直聘的高端牛人简历，享有更具竞争力的猎头会员服务。</li><li>猎头身份生效后，您不能以牛人身份登录APP</li></ul>',title:"您将要切换为猎头身份",cancelButton:"取消",confirmButton:"切换为猎头",columnClass:"pop-sign-hunter",openCallback:function(e){e.$confirmButton.parent().css("text-align","center")},confirmCallback:function(){window.location.href="/user/transto/headhunter.html?token="+result.token},cancelCallback:function(){window.location.href="https://www.zhipin.com/logoutToUrl/?toUrl=https://lie.zhipin.com"}};Sign.showConfirm(option)}else if(6==result.bizcode||8==result.bizcode){var option={content:'<p>您已注册过BOSS直聘，是否切换为猎头身份？</p><ul class="pop-content"><li>为牛人服务，严禁猎头冒充BOSS</li><li>切换为猎头身份后，您将获得BOSS直聘的高端牛人简历，享有更具竞争力的猎头会员服务。</li><li class="bold">您的BOSS直聘账户中剩余'+result.beancount+"个直豆，切换为猎头身份后无法使用。但直豆仍会保留。</li><li>猎头身份生效后，您不能以牛人或BOSS身份登录APP</li></ul>",title:"您将要切换为猎头身份",cancelButton:"取消",confirmButton:"切换为猎头",columnClass:"pop-sign-hunter",openCallback:function(e){e.$confirmButton.parent().css("text-align","center")},confirmCallback:function(){window.location.href="/user/transto/headhunter.html?token="+result.token},cancelCallback:function(){window.location.href="https://www.zhipin.com/logoutToUrl/?toUrl=https://lie.zhipin.com"}};Sign.showConfirm(option)}else if(result.rescode==-1)Sign.showError(formEl,result.resmsg);else{var option={content:'<p>您当前身份为BOSS，请选择是否将身份切换为猎头</p><ul class="pop-content"><li>选择猎头身份后，您将以猎头身份发布职位、搜索查看\t简历、更高效的联系牛人</li><li>猎头身份与BOSS身份只可选择一个，选择猎头身份后，不能再以Boss身份登录</li></ul>',title:"选择身份",cancelButton:"取消",confirmButton:"切换为猎头",columnClass:"pop-sign-hunter",openCallback:function(e){wrap.$confirmButton.parent().css("text-align","center")},confirmCallback:function(){window.location.href="/user/transto/headhunter.html?token="+result.token},cancelCallback:function(){window.location.href="https://www.zhipin.com/logoutToUrl/?toUrl=https://lie.zhipin.com"}};Sign.showConfirm(option)}isSms&&btnSms.html("发送验证码").removeClass("btn-disabled"),formEl.find(".ipt-code").val(""),formEl.find(".verifyimg").click()}else 6==result.rescode?Sign.showError(formEl,"短信验证码错误",!0):(Sign.showError(formEl,result.resmsg,!0),isSms&&btnSms.html("发送验证码").removeClass("btn-disabled"),formEl.find(".ipt-code").val(""),formEl.find(".verifyimg").click());isSms||btnEl.removeClass("btn-disabled")},error:function(e){Sign.showError(formEl,"服务器错误，请稍后再试",!0),isSms?btnSms.html("发送验证码").removeClass("btn-disabled"):btnEl.removeClass("btn-disabled")}})},callbackPwd:function(e,t){try{_T.sendEvent(e.closest(".sign-form").data("flow")+"_done")}catch(e){}return Sign.source?void(window.location.href=Sign.directUrls[Sign.source]):isZpdesk&&1!=t.identity?void Sign.showDeskGeekTip():void(t.toUrl?window.location.href=decodeURIComponent(t.toUrl):1==t.identity?window.location.href="https://www.zhipin.com/chat/im":$(".page-sign").length?window.location.href="https://www.zhipin.com/":window.location.reload())},callbackSms:function(e,t){e.closest(".sign-form").find(".tip-error");try{_T.sendEvent(e.closest(".sign-form").data("flow")+"_done")}catch(e){}return Sign.source?void(window.location.href=Sign.directUrls[Sign.source]):isZpdesk&&1!=t.identity?void Sign.showDeskGeekTip():void(t.toUrl?window.location.href=decodeURIComponent(t.toUrl):1==t.identity?window.location.href="https://www.zhipin.com/chat/im":$(".page-sign").length?window.location.href="https://www.zhipin.com/":window.location.reload())},callbackRegister:function(e,t){var i=$(".sign-wrap"),n=e.find('input[name="purpose"]').val(),s="g";"1"==n&&(s="b");try{_T.sendEvent(e.closest(".sign-form").data("flow")+"_done_"+s)}catch(e){}if(e.closest(".pop-sign-box").length&&(i=e.closest(".pop-sign-box")),t.toUrl){$.toast({content:"注册成功，3s后自动跳转完善页面",type:"success"});var o="";o=t.toUrl.indexOf("http")!=-1?t.toUrl:"https://www.zhipin.com"+t.toUrl,setTimeout(function(){window.location.href=decodeURIComponent(o)},3e3)}else Sign.source?($.toast({content:"注册成功",type:"success"}),setTimeout(function(){window.location.href=Sign.directUrls[Sign.source]},3e3)):Sign.showPannel(i,"welcome")},callbackCheckRegister:function(e,t){try{_T.sendEvent(e.closest(".sign-form").data("flow")+"_done")}catch(e){}var i=e.parents(".login-wechat").find(".bind-box"),n=i.find("form"),s=i.find('form .btn[type="submit"]');e.parents(".login-wechat .register-box").addClass("hide"),i.removeClass("hide"),i.find(".ipt-phone").val(t.account),Sign.init(i),t.isRegistered?(n.attr("action","/login/headhunter/phone.json"),n.find('input[name="smsType"]').val(4),s.text("登录，并绑定手机号")):(n.attr("action","/registe/headhunter/save.json"),n.parents(".sign-form").removeClass(".sign-sms"),n.find('input[name="smsType"]').val(5),s.text("注册"),n.parents(".sign-form").removeClass("sign-sms").addClass("sign-register"))},showConfirm:function(e){$.confirm({content:e.content,title:e.title,closeIcon:!1,cancelButton:!!e.cancelButton&&e.cancelButton,confirmButton:!!e.confirmButton&&e.confirmButton,columnClass:e.columnClass||"defaultConfirm",backgroundDismiss:!1,onOpen:function(){e.openCallback&&e.openCallback(this)},confirm:function(){e.confirmCallback&&e.confirmCallback()},cancel:function(){e.cancelCallback&&e.cancelCallback()}})},showError:function(e,t,i){if(e.closest(".sign-form").find(".tip-error").text(t),"短信验证码错误"==t?e.find(".ipt-sms").focus().val(""):i&&e.find(".verifyimg").length&&(e.find(".ipt-code").val(""),e.find(".verifyimg").click()),i)try{_T.sendEvent(e.closest(".sign-form").data("flow")+"_error")}catch(e){}isTouch&&$(window).width()<800&&Sign.showToast(t)},hideError:function(e){e.closest(".sign-form").find(".tip-error").text("")},showToast:function(e){var t=$('<div class="toast"><p>'+e+"</p></div>");$(".toast").length&&$(".toast").remove(),Sign.timerToast&&clearTimeout(Sign.timerToast),$("body").append(t),$(".toast").show(),Sign.timerToast=setTimeout(function(){Sign.hideToast(t)},2e3)},hideToast:function(){$(".toast").fadeOut(function(){$(".toast").remove()})},countDown:function(e,t){var i=parseInt(e.find(".num").text().replace("s"),10);Sign.interCount=setInterval(function(){i--,e.find(".num").text(i+"s"),i<=0&&(t(),clearInterval(Sign.interCount),Sign.interCount=null)},1e3)},scanValid:function(){setTimeout(function(){$(".invalid-box").show()},18e4)},scanPending:function(e){var t=e.find(".uuid").val(),i=e.find(".qrcode-box img").attr("data-url");t&&e.find(".sign-scan").is(":visible")&&$.ajax({type:"GET",url:"/scan?uuid="+t,dataType:"json",cache:!1,timeout:1e5,success:function(n){if(n.scaned){var s=e.find(".sign-scan").length?e.find(".sign-scan").data("flow"):"web";"validate"in n&&n.validate?(Sign.sendKaEvent(s+"_done"),isZpdesk?Sign.checkDeskIsBoss(function(e){1==e?window.location.href=i+t:Sign.showDeskGeekTip()}):window.location.href=i+t):"allweb"in n&&n.allweb?(Sign.sendKaEvent(s+"_done"),isZpdesk?Sign.checkDeskIsBoss(function(e){1==e?window.location.href=i+t:Sign.showDeskGeekTip()}):window.location.href=i+t):("validate"in n&&n.validate,Sign.sendKaEvent(s+"_error"),setTimeout("window.location.reload()",3e3))}else e.find(".sign-scan").is(":visible")&&"none"==$(".invalid-box").css("display")&&Sign.scanPending(e)},error:function(){e.find(".sign-scan").is(":visible")&&"none"==$(".invalid-box").css("display")&&setTimeout(function(){Sign.scanPending(e)},5e3)}})},showDeskGeekTip:function(){$.confirm({content:"你当前是牛人身份，请在 BOSS直聘 APP 的『设置』选项中切换身份后重试",title:"请切换为 Boss 身份后登录",closeIcon:!1,cancelButton:!1,confirmButton:"确定",columnClass:"",backgroundDismiss:!1,onOpen:function(){this.$confirmButton.parent().css("text-align","center")},confirm:function(){},error:function(e){}}),Cookie.del("t",".zhipin.com","/"),Cookie.del("wt",".zhipin.com","/")},checkDeskIsBoss:function(e){$.ajax({type:"post",url:"/user/identity/check.json",dataType:"json",success:function(t){1==t.rescode?e(t.identity):alert("登录失败，请稍后再试")},error:function(){alert("登录失败，请稍后再试")}})},sendKaEvent:function(e){try{_T.sendEvent(e)}catch(e){}}};$(function(){$(".sign-wrap").length&&$(".sign-wrap").is(":visible")&&Sign.init($(".sign-wrap:visible")),void 0!==PlaceholderCheck&&PlaceholderCheck.init()});var hunterSign={init:function(){($(".hunter-index").length||$(".hunter-register").length)&&($(".hunter-index .btn-sign").on("click",function(){hunterSign.showPop($(this))}),$(".hunter-register").length&&Sign.dropSelect($(this).find(".sign-form")),hunterSign.setErcode(),$(".hunter-index").find(".sign-form .tab span").on("click",function(){hunterSign.switchTab($(this))}),$(".hunter-register").find(".register-op").on("click",function(){hunterSign.switchRegister($(this))}),hunterSign.elAnimate(),$(window).scroll(function(){hunterSign.elAnimate(),$(window).scrollTop()>=50?$(".fix-container").slideDown():$(".fix-container").slideUp()}),$(window).scrollTop()>=50?$(".fix-container").slideDown():$(".fix-container").slideUp())},showPop:function(e){$.confirm({content:$(".sign-wrap").html(),title:!1,confirmButton:!1,cancelButton:!1,closeIcon:!0,columnClass:"pop-sign-box",onOpen:function(){var t=this;e.hasClass("btn-register")&&(t.$content.find(".sign-form").hide(),t.$content.find(".sign-register").show()),Sign.init(t.$content)}})},switchTab:function(e){var t=e.index(),i=e.parents(".sign-form");e.addClass("cur").siblings().removeClass("cur"),i.find(".tab-container").eq(t).show().siblings(".tab-container").hide(),0==t&&($(".code-container .overdue").hide(),hunterSign.setErcode()),i.find(".tip-error").html("")},switchRegister:function(e){var t=e.parents(".login-container").index(),i=e.parents(".login-wechat");i.find(".login-container").eq(t).addClass("hide").siblings().removeClass("hide"),Sign.init(),i.find(".tip-error").html("")},isVisible:function(e){return $(window).height()>e.offset().top-$(window).scrollTop()+100},elAnimate:function(){hunterSign.isVisible($(".hunter-index .info-box").eq(0))&&$(".hunter-index .info-box").eq(0).animate({marginTop:"0",opacity:"1"},400),hunterSign.isVisible($(".hunter-index .info-box").eq(1))&&$(".hunter-index .info-box").eq(1).animate({marginTop:"76px",opacity:"1"},300)},setErcode:function(){if($("#login_container").length&&_PAGE.appid){var e=(new WxLogin({id:"login_container",appid:_PAGE.appid,scope:_PAGE.scope,redirect_uri:_PAGE.redirectUri,state:"",style:"",href:window.location.origin+"/v2/web/hunter/css/hunter-index.css"}),$(".code-container .overdue"));setTimeout(function(){e.is(":visible")||e.show()},6e4),e.find(".btn-refresh").on("click",function(){setTimeout(function(){e.is(":visible")||e.show()},6e4),e.hide();new WxLogin({id:"login_container",appid:_PAGE.appid,scope:_PAGE.scope,redirect_uri:_PAGE.redirectUri,state:"",style:"",href:window.location.origin+"/v2/web/hunter/css/hunter-index.css"})})}}};$(function(){hunterSign.init()});var GeekAccount={URL:{mobile:{url:"/user/update/mobile.json",method:"POST"},sendsms:{url:"/user/account/sendsms.json",method:"POST"},password:{url:"/user/update/password.json",method:"POST"},del:{url:"/setting/replyword/del.json",method:"get"},add:{url:"/setting/replyword/add.json",method:"get"},greeting:{url:"/user/update/greeting.json",method:"POST"}},init:function(){this.changeTab(),this.requestData($(".account-container .set-page"),$(".account-container .set-page ul li.cur").data("tab"),$(".account-container .set-page ul li.cur").data("url"))},appendAccount:function(){$(".account-container .set-page .set-nav").prepend('<div class="account-manager">账户管理</div>')},changeTab:function(){var e=this;$(".account-container .set-page ul").on("click","li",function(){$(this).siblings("li").removeClass("cur"),$(this).addClass("cur");var t=$(this).data("url"),i=$(this).data("tab");e.requestData($(".account-container .set-page"),i,t)})},requestData:function(e,t,i){var n=this;$.ajax({url:i,method:"get",dataType:"json",success:function(i){i.rescode&&(e.find(".set-content").remove(),""==i.html&&e.append('<div class="set-content"></div>'),e.append(i.html));var s=$(".account-container .bind-phone .operate-area .phone-num");s.html();switch(t){case"phone":n.formValidate(),n.confirmChangePhone(),n.randomImage(),n.dropSelect($(".phone-form"));break;case"pwd":n.confirmChangePassword();break
;case"usalchat":n.chatTabOperate(),n.chatUseSentence();break;case"sayhello":n.submitUsal()}}})},submitUsal:function(){var e=this;$(".account-container .sayhello-form").on("change",".radio-list .radio input",function(){var t=$(this).val();$.ajax({url:e.URL.greeting.url,method:e.URL.greeting.method,dataType:"json",data:{status:1,templateId:t},success:function(e){if(1==e.rescode)$.toast({content:"设置成功",lock:!0,type:"success",wrapClass:"",position:"top",time:3e3});else if(0==e.rescode){var t=e.resmsg;$.toast({content:t,lock:!0,type:"error",wrapClass:"",position:"top",time:3e3})}}})})},chatTabOperate:function(){var e=this;$(".account-container .set-usalbox").on("click",".op-sentence .link-add",function(){$(this).closest("dl").find(".defined-form").addClass("show-defined-form"),$(this).closest("dl").find(".count-num").length&&e.countArea($(this).closest("dl").find(".ipt-area"))}),$(".account-container .defined-form .ipt-area").on("input",function(){e.countArea($(this))}),$(".set-usalbox").on("click",".defined-form .btns .btn",function(){if($(this).hasClass("btn-back"))$(this).closest("dl").find(".defined-form").removeClass("show-defined-form"),$(".account-container .defined-form .ipt-area").val("");else{if(""==$(this).closest("dl").find(".defined-form .ipt-area").val().replace(/(\s*$)/g,""))return!1;if($(this).closest("dl").find(".defined-form .count-num .red").length)return!1;e.renderList($(".account-container .defined-form .ipt-area").val())}}),$(".set-usalbox .sentence-list").on("click",".link-remove",function(){e.delData($(this)),e.chatUseSentence()})},delData:function(e){var t=this,e=e;e.attr("data-url"),e.closest(".sentence-list");$.dialog({title:"",content:"确认删除该条常用语吗？",confirmText:"确定",element:e,cancelText:"取消",inline:!0,opacityLock:!0,wrapClass:"dialog-around-default",onOpen:function(e){e.find(".dialog-footer .btns .btn-cancel").attr("ka","chatwords_delete_cancel"),e.find(".dialog-footer .btns .btn-sure").attr("ka","chatwords_delete_sure")},onConfirm:function(i){$.ajax({url:t.URL.del.url,method:t.URL.del.method,data:{id:e.attr("data-id")},dataType:"json",success:function(i){if(1==i.rescode)e.closest("li").fadeOut(function(){e.parent("li").remove(),t.chatUseSentence()});else{var n=i.resmsg;$.toast({content:n,lock:!0,type:"error",wrapClass:"",position:"top",time:3e3})}}})},onClose:function(e){}})},renderList:function(e){var t=this;$.ajax({url:t.URL.add.url,method:t.URL.add.method,dataType:"json",data:{word:$(".set-usalbox .ipt-area").val()},success:function(e){if(1==e.rescode)$(".account-container .sentence-list ul").append(e.html),$(".account-container .defined-form .ipt-area").val(""),$(".set-usalbox .op-sentence .link-add").closest("dl").find(".defined-form").removeClass("show-defined-form"),t.chatUseSentence();else if(0==e.rescode){var i=e.resmsg;$.toast({content:i,lock:!0,type:"error",wrapClass:"",position:"top",time:3e3}),$(".account-container .defined-form .ipt-area").focus()}}})},getLength:function(e){var t=0,e=e;len=e.length,charCode=-1;for(var i=0;i<len;i++)charCode=e.charCodeAt(i),charCode>=0&&charCode<=128?t+=.5:t+=1;return Math.round(t)},countArea:function(e){var t=this,e=e,i=e.attr("data-range"),n=t.getLength(e.val()),s=e.closest(".defined-form").find(".count-num");s&&s.length&&(i=i.split(","),s.html("<em"+(n>i[1]?' class="red"':"")+">"+n+"</em>/"+i[1]))},phoneNumShow:function(e){var t=e||String(e);return t.slice(0,3)+"****"+t.slice(7)},dropSelect:function(e){e.find(".dropdown-select").each(function(){$(this).on("click",function(){$(this).hasClass("dropdown-disabled")||($(this).toggleClass("dropdown-select-open"),$(this).closest(".form-row").find(".dropdown-menu").toggleClass("dropdown-menu-open"))})}),e.find(".dropdown-menu").each(function(){var e=$(this),t=e.closest(".form-row").find(".dropdown-select"),i=t.find(".text-select"),n=t.find('input[type="hidden"]');e.on("click","li",function(){i.text($(this).attr("data-val")),n.val($(this).attr("data-val")),n.closest("dd").find(".tip-text").remove(),e.removeClass("dropdown-menu-open"),t.removeClass("dropdown-select-open")})}),$(document).on("touchend click",function(t){$(t.target).closest(".dropdown-menu").length||$(t.target).closest(".dropdown-select").length||(e.find(".dropdown-select").removeClass("dropdown-select-open"),e.find(".dropdown-menu").removeClass("dropdown-menu-open"))})},getRandomkey:function(e,t){var t=t,i=t.find(".ipt-code"),n=i.attr("data-url"),s=t.find(".randomkey");""==s.val()&&$.ajax({url:n,type:"POST",dataType:"json",data:{pk:$("#page_key_name").val()},success:function(t){1==t.rescode&&(e.find(".randomkey").val(t.randomKey),s.parent().find(".verifyimg").click(),e.find(".sign-scan .qrcode-box img").attr("src","/qrcode/"+t.qrId),e.find(".uuid").val(t.qrId))},error:function(e){}})},randomImage:function(){var e=this,t=$(".phone-form .operate-area");if(t.find(".randomkey").length&&""==t.find(".randomkey").val())return e.getRandomkey(t,$(".phone-form")),!1;t.find(".verifyimg").on("click",function(){$(this).attr("src","/captcha/?randomKey="+$(this).closest(".form-row").find(".randomkey").val()+"&_r="+(new Date).getTime())})},formValidate:function(){var e=this;$(".get-message-code").on("click",function(){var t=e.formPhoneValidate(),i=e.formImageCodeValidate();if(t&&i){var n=$(this);$.ajax({url:e.URL.sendsms.url,method:e.URL.sendsms.method,dataType:"json",data:{randomKey:$(".phone-form .randomkey").val(),regionCode:$(".phone-form .text-select").text(),mobile:$(".phone-form .ipt-phone").val(),captcha:$(".phone-form .ipt-image-code").val()},success:function(t){if(1==t.rescode)$(".get-message-code").html('<em class="num">60s</em> 后重试').addClass("count-down"),e.countDown($(".count-down"),function(){n.html("重新发送验证码").removeClass("count-down")}),$.toast({content:"验证码短信已发送，请查收",lock:!0,type:"success",wrapClass:"",position:"top",time:3e3});else if(0==t.rescode){var i=t.resmsg;switch(t.errorType){case 1:e.showError($(".ipt-phone"),i);break;case 2:e.showError($(".ipt-image-code"),i);break;case 4:e.showError($(".ipt-message-code"),i)}}},error:function(){$.toast({content:"网络错误修改失败",lock:!0,type:"error",wrapClass:"",position:"top",time:3e3})}})}})},countDown:function(e,t){var i=this,n=parseInt(e.find(".num").text().replace("s"),10);i.interCount=setInterval(function(){n--,e.find(".num").text(n+"s"),n<=0&&(t(),clearInterval(i.interCount),i.interCount=null)},1e3)},formPhoneValidate:function(){var e=this;e.removeError($(".ipt-phone"));var t=$(".ipt-phone").val(),i=$(".text-select").text();return t.length?/^\D+$/.test(t)?($(".ipt-phone").val(""),e.showError($(".ipt-phone"),"请输入正确的手机号"),$(".ipt-phone").focus(),!1):"+86"!=i||/^(1[3456789][0-9]{9})$/.test(t)?!!/^(\d{6,11})$/.test(t)||(e.showError($(".ipt-phone"),"请输入正确的手机号"),$(".ipt-phone").focus(),!1):(e.showError($(".ipt-phone"),"请输入正确的手机号"),$(".ipt-phone").focus(),!1):(e.showError($(".ipt-phone"),"请输入手机号"),!1)},formMessageCodeValidate:function(){var e=this;e.removeError($(".ipt-message-code"));var t=$(".ipt-message-code").val();return t.length?""==t?(e.showError($(".ipt-message-code"),"短信验证码错误"),$(".ipt-message-code").focus(),!1):t.match(/^.{4}$/)?!t.match(/\D+/)||($(".ipt-message-code").val(""),e.showError($(".ipt-message-code"),"短信验证码错误"),$(".ipt-message-code").focus(),!1):(e.showError($(".ipt-message-code"),"短信验证码错误"),$(".ipt-message-code").focus(),!1):(e.showError($(".ipt-message-code"),"请输入短信验证码"),$(".ipt-message-code").focus(),!1)},formImageCodeValidate:function(){var e=this;e.removeError($(".ipt-image-code"));var t=$(".ipt-image-code").val();return t.length?""==t?(e.showError($(".ipt-image-code"),"图片验证码错误"),$(".ipt-image-code").focus(),!1):t.match(/^.{4}$/)?!t.match(/[\u4e00-\u9fa5]/)||($(".ipt-image-code").val(""),e.showError($(".ipt-image-code"),"图片验证码错误"),$(".ipt-image-code").focus(),!1):(e.showError($(".ipt-image-code"),"图片验证码错误"),$(".ipt-image-code").focus(),!1):(e.showError($(".ipt-image-code"),"请输入图片验证码"),$(".ipt-image-code").focus(),!1)},showError:function(e,t){e.addClass("ipt-error"),e.parent(".ipt-wrap").length&&e.parent(".ipt-wrap").parent(".form-row").append('<div class="tip-text">'+t+"</div>"),e.parent(".cell-wrap").length&&(e.parent(".cell-wrap").parent(".form-row").find(".tip-text").remove(),e.parent(".cell-wrap").parent(".form-row").append('<div class="tip-text">'+t+"</div>"))},lisLength:function(){return $(".sentence-list ul li").length},removeError:function(e){e.removeClass("ipt-error"),e.parent(".ipt-wrap").length?e.parent(".ipt-wrap").parent(".form-row").find(".tip-text").remove():e.parent(".cell-wrap").parent(".form-row").find(".tip-text").remove()},confirmChangePhone:function(){var e=this;$(".phone-form").on("submit",function(t){t.preventDefault();var i=e.formPhoneValidate(),n=e.formMessageCodeValidate(),s=e.formImageCodeValidate();i&&n&&s&&$.ajax({url:e.URL.mobile.url,method:e.URL.mobile.method,dataType:"json",data:{randomKey:$(".phone-form .randomkey").val(),regionCode:$(".phone-form .text-select").html(),mobile:$(".phone-form .ipt-phone").val(),captcha:$(".phone-form .ipt-image-code").val(),smsCode:$(".phone-form .ipt-message-code").val()},success:function(t){if(1==t.rescode)$.toast({content:"修改成功",lock:!0,type:"success",wrapClass:"",position:"top",time:3e3}),e.refreshPage(0);else if(0==t.rescode){var i=t.resmsg;switch(t.errorType){case 1:e.showError($(".ipt-phone"),i);break;case 2:e.showError($(".ipt-image-code"),i);break;case 3:e.showError($(".ipt-message-code"),i)}}},error:function(){$.toast({content:"网络错误修改失败",lock:!0,type:"error",wrapClass:"",position:"top",time:3e3})}})})},refreshPage:function(e){setTimeout(function(){$(".account-container .set-nav ul li").eq(e).click()},300)},confirmChangePassword:function(){var e=this;$(".pwd-form").on("submit",function(t){if(t.preventDefault(),$(this).find(".form-btn .btn-origin-pwd").length){t.preventDefault();var i=e.pwdConfirm(),n=e.pwdConfirmAgain();i&&n&&$.ajax({url:e.URL.password.url,method:e.URL.password.method,dataType:"json",data:{newPassword:$(".pwd-form .ipt-pwd-orginal").val()},success:function(t){if(1==t.rescode)$.toast({content:"密码设置成功",lock:!0,type:"success",wrapClass:"",position:"top",time:3e3}),e.refreshPage(1);else{var i=t.resmsg;e.showError($(".ipt-pwd-orginal"),i)}},error:function(){}})}else $(this).find(".form-btn .btn-confirm-change-pwd").length&&(t.preventDefault(),e.changePasswordConfirmSet())})},pwdConfirm:function(){var e=this,t=$(".ipt-pwd-orginal").val();return e.removeError($(".ipt-pwd-orginal")),t.length?!!/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/.test(t)||(e.showError($(".ipt-pwd-orginal"),"请设置6-20位数字与字母组合密码"),$(".ipt-pwd-orginal").val(""),$(".ipt-pwd-orginal").focus(),!1):(e.removeError($(".ipt-pwd-orginal")),e.showError($(".ipt-pwd-orginal"),"请输入密码"),!1)},pwdConfirmAgain:function(){var e=this,t=$(".ipt-pwd-orginal-confirm").val(),i=$(".ipt-pwd-orginal").val();return e.removeError($(".ipt-pwd-orginal-confirm")),t.length?i===t||(e.showError($(".ipt-pwd-orginal-confirm"),"两次输入密码不一致"),$(".ipt-pwd-orginal-confirm").focus(),!1):(e.removeError($(".ipt-pwd-orginal-confirm")),e.showError($(".ipt-pwd-orginal-confirm"),"请重复输入密码"),!1)},oldPassword:function(){var e=this,t=$(".ipt-pwd-old");return e.removeError(t),!!t.val().length||(e.showError(t,"请输入旧密码"),t.focus(),!1)},newPassword:function(){var e=this,t=$(".ipt-pwd-new");$(".ipt-pwd-old").val();e.removeError(t);var i=t.val();return i.length?!!/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/.test(i)||(e.showError(t,"请设置6-20位数字与字母组合密码"),t.focus(),!1):(e.showError(t,"请输入新密码"),t.focus(),!1)},setConfirmChangePassword:function(){var e=this,t=$(".ipt-pwd-confirm"),i=$(".ipt-pwd-new").val();e.removeError(t);var n=t.val();return n.length?i===n||(e.showError(t,"两次输入密码不一致"),t.focus(),!1):(e.showError(t,"请再次输入新密码"),t.focus(),!1)},changePasswordConfirmSet:function(){var e=this,t=e.oldPassword(),i=e.newPassword(),n=e.setConfirmChangePassword();t&&i&&n&&$.ajax({url:e.URL.password.url,method:e.URL.password.method,dataType:"json",data:{oldPassword:$(".pwd-form .ipt-pwd-old").val(),newPassword:$(".pwd-form .ipt-pwd-new").val()},success:function(t){if(1==t.rescode)$.toast({content:"密码修改成功",lock:!0,type:"success",wrapClass:"",position:"top",time:3e3}),e.refreshPage(1);else if(0==t.rescode){var i=t.resmsg;switch(t.errorType){case 1:e.showError($(".ipt-pwd-old"),i);break;case 2:e.showError($(".ipt-pwd-new"),i)}e.showError($(".ipt-pwd-orginal"),i)}},error:function(){}})},chatUseSentence:function(){$(".account-container .sentence-list ul li").length?$(".set-usalbox .title").length?($(".no-chat-wrap").addClass("hide"),$(".set-usalbox .title").removeClass("hide")):($(".set-usalbox .set-item").prepend('<h3 class="title">常用语</h3>'),$(".no-chat-wrap").addClass("hide")):$(".no-chat-wrap").length?($(".no-chat-wrap").removeClass("hide"),$(".set-usalbox .title").addClass("hide")):($(".account-container .set-usalbox .set-item").prepend('<div class="no-chat-wrap"><h3 class="no-chat">您还没有常用回复语</h3><div class="no-chat-subtitle">设置常用回复语，可在沟通聊天时直接选用，减少重复输入</div></div>'),$(".account-container .set-usalbox .set-item h3.title").addClass("hide"))}};$(function(){window.location.href.indexOf("/geek/account/management")>0&&GeekAccount.init()});